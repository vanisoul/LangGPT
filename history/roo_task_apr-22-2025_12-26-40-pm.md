**User:**

<task>
我目前已有 prd 但是我需要更完善
</task>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:52:52 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
(Not available)

# Current Cost
$0.00

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>


# Current Workspace Directory (/home/bevis/ecs-ten/ecs-ten-server) Files
.env.example
.gitignore
.windsurfrules
bun.lock
final-swagger.json
justfile
package-lock.json
package.json
README-task-master.md
README.md
taskmaster-plan.md
tsconfig.json
generated/
generated/prisma/
generated/prisma/client.d.ts
generated/prisma/client.js
generated/prisma/default.d.ts
generated/prisma/default.js
generated/prisma/edge.d.ts
generated/prisma/edge.js
generated/prisma/index-browser.js
generated/prisma/index.d.ts
generated/prisma/index.js
generated/prisma/libquery_engine-debian-openssl-3.0.x.so.node
generated/prisma/package.json
generated/prisma/schema.prisma
generated/prisma/wasm.d.ts
generated/prisma/wasm.js
generated/prisma/runtime/
generated/prisma/runtime/edge-esm.js
generated/prisma/runtime/edge.js
generated/prisma/runtime/index-browser.d.ts
generated/prisma/runtime/index-browser.js
generated/prisma/runtime/library.d.ts
generated/prisma/runtime/library.js
generated/prisma/runtime/react-native.js
generated/prisma/runtime/wasm.js
prisma/
prisma/schema.prisma
scripts/
scripts/example_prd.txt
scripts/prd.txt
src/
src/env-manager.ts
src/index.ts
src/prisma-client.ts
src/middleware/
src/middleware/auth.ts
src/middleware/index.ts
src/middleware/jwt.ts
src/repositories/
src/repositories/user-repository.ts
src/routes/
src/routes/auth-route.ts
src/routes/index.ts
src/routes/user-route.ts
src/services/
src/services/auth-service.ts
src/services/user-service.ts
src/types/
src/types/user-types.ts
src/utils/
src/utils/password-util.ts
tasks/
</environment_details>

---

**Assistant:**

<thinking>
讓我先了解一下用戶的需求。用戶提到他已經有一個 PRD (產品需求文檔)，但需要更完善。我應該先查看現有的 PRD 內容，然後幫助用戶完善它。

從環境詳情中，我可以看到 PRD 文件位於 `scripts/prd.txt`。我應該先閱讀這個文件的內容，以了解當前的 PRD 狀態和內容。

我將使用 `read_file` 工具來查看 PRD 文件的內容。
</thinking>

<read_file>
<path>scripts/prd.txt</path>
</read_file>

---

**User:**

[read_file for 'scripts/prd.txt'] Result:
<file><path>scripts/prd.txt</path>
<content lines="1-60">
 1 | <context>
 2 | # Overview
 3 | This is a backend API service built with the Elysia framework running on the Bun environment. It uses Prisma ORM to interact with SQL Server database, providing rich functionality including user authentication, contract management, contract review processes, document management, and more. The API is defined in final-swagger.json, and the database structure is defined in prisma/schema.prisma.
 4 | 
 5 | # Core Features
 6 | - User authentication and authorization (JWT-based)
 7 | - Contract management (create, query, update contracts)
 8 | - Contract review workflow (multi-stage review and signing)
 9 | - Document management (attachment upload and management)
10 | - API endpoints (following final-swagger.json definition)
11 | 
12 | # User Experience
13 | - Provides RESTful API interfaces following final-swagger.json definition
14 | - Uses JWT for authentication
15 | - Provides Swagger documentation
16 | - Ensures API responses are consistent with database models
17 | </context>
18 | 
19 | <PRD>
20 | # Technical Architecture
21 | - Elysia framework: For building API services
22 | - Prisma ORM: For database interaction, based on models defined in prisma/schema.prisma
23 | - SQL Server: Database with multiple schemas (code, data, dbo, join)
24 | - JWT: For authentication
25 | - Swagger: API documentation, based on final-swagger.json
26 | 
27 | # Development Roadmap
28 | ## Phase 1: Infrastructure
29 | - Set up basic API structure following final-swagger.json definition
30 | - Implement user authentication and authorization (Auth-related APIs)
31 | - Set up database connections and models, ensuring consistency with prisma/schema.prisma
32 | 
33 | ## Phase 2: Core Functionality
34 | - Implement contract management functionality (Contract-related APIs)
35 | - Implement contract review workflow (ContractExaminer-related functionality)
36 | - Implement document management functionality (Attachment-related APIs)
37 | - Implement contract access control (ContractAccess-related APIs)
38 | 
39 | ## Phase 3: Optimization and Extension
40 | - Optimize API performance
41 | - Add more features and endpoints
42 | - Improve error handling and logging
43 | - Ensure all APIs are consistent with final-swagger.json definition
44 | 
45 | # Logical Dependency Chain
46 | - First implement user authentication and authorization (User, Auth API)
47 | - Then implement basic contract management functionality (Contract API)
48 | - Next implement contract review workflow (ContractExaminer, ContractExamStage)
49 | - Then implement contract access control (ContractAccess API)
50 | - Finally implement document management and other functionality (Attachment, ContractAttachment API)
51 | 
52 | # Risks and Mitigations
53 | - Complex database structure: Ensure proper mapping and management with Prisma, strictly following schema.prisma
54 | - Numerous API endpoints: Use modular design and good documentation, ensuring consistency with final-swagger.json
55 | - Performance considerations: Optimize queries and use appropriate indexes, especially for complex contract queries
56 | 
57 | # Appendix
58 | - Database contains multiple schemas: code, data, dbo, join, as detailed in prisma/schema.prisma
59 | - API definition details in final-swagger.json
60 | </PRD>
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:53:13 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
22,980 (11%)

# Current Cost
$0.09

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
我已經閱讀了現有的 PRD 文件。這是一個使用 Elysia 框架、Bun 環境和 Prisma ORM 的後端 API 服務。PRD 包含了技術架構、開發路線圖、邏輯依賴鏈、風險和緩解措施等部分。

為了更好地完善這個 PRD，我需要了解更多關於項目的細節。我應該查看一些關鍵文件，如 Prisma schema 和 Swagger 定義，以便更好地理解系統的數據模型和 API 設計。

首先，我將查看 Prisma schema 文件，了解數據庫結構：
</thinking>

<read_file>
<path>prisma/schema.prisma</path>
</read_file>

---

**User:**

[read_file for 'prisma/schema.prisma'] Result:
<file><path>prisma/schema.prisma</path>
<content lines="1-1500">
   1 | generator client {
   2 |   provider        = "prisma-client-js"
   3 |   output          = "../generated/prisma"
   4 |   previewFeatures = ["multiSchema"]
   5 | }
   6 | 
   7 | datasource db {
   8 |   provider = "sqlserver"
   9 |   url      = env("DATABASE_URL")
  10 |   schemas  = ["code", "data", "dbo", "join"]
  11 | }
  12 | 
  13 | /// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
  14 | model temp_ContractCustomizedField {
  15 |   ApplyNo    String?   @db.NVarChar(450)
  16 |   ContractId Int?
  17 |   Txt01      String?   @db.NVarChar(450)
  18 |   Txt02      String?   @db.NVarChar(450)
  19 |   Txt03      String?   @db.NVarChar(450)
  20 |   Txt04      String?   @db.NVarChar(450)
  21 |   Txt05      String?   @db.NVarChar(450)
  22 |   Txt06      String?   @db.NVarChar(450)
  23 |   Txt07      String?   @db.NVarChar(450)
  24 |   Txt08      String?   @db.NVarChar(450)
  25 |   Txt09      String?   @db.NVarChar(450)
  26 |   Txt10      String?   @db.NVarChar(450)
  27 |   Txt11      String?   @db.NVarChar(450)
  28 |   Txt12      String?   @db.NVarChar(450)
  29 |   Txt13      String?   @db.NVarChar(450)
  30 |   Txt14      String?   @db.NVarChar(450)
  31 |   Txt15      String?   @db.NVarChar(450)
  32 |   Txt16      String?   @db.NVarChar(450)
  33 |   Txt17      String?   @db.NVarChar(450)
  34 |   Txt18      String?   @db.NVarChar(450)
  35 |   Txt19      String?   @db.NVarChar(450)
  36 |   Txt20      String?   @db.NVarChar(450)
  37 |   Memo01     String?   @db.NVarChar(Max)
  38 |   Memo02     String?   @db.NVarChar(Max)
  39 |   Memo03     String?   @db.NVarChar(Max)
  40 |   Memo04     String?   @db.NVarChar(Max)
  41 |   Memo05     String?   @db.NVarChar(Max)
  42 |   Memo06     String?   @db.NVarChar(Max)
  43 |   Memo07     String?   @db.NVarChar(Max)
  44 |   Memo08     String?   @db.NVarChar(Max)
  45 |   Memo09     String?   @db.NVarChar(Max)
  46 |   Memo10     String?   @db.NVarChar(Max)
  47 |   Memo11     String?   @db.NVarChar(Max)
  48 |   Memo12     String?   @db.NVarChar(Max)
  49 |   Memo13     String?   @db.NVarChar(Max)
  50 |   Memo14     String?   @db.NVarChar(Max)
  51 |   Memo15     String?   @db.NVarChar(Max)
  52 |   Memo16     String?   @db.NVarChar(Max)
  53 |   Memo17     String?   @db.NVarChar(Max)
  54 |   Memo18     String?   @db.NVarChar(Max)
  55 |   Memo19     String?   @db.NVarChar(Max)
  56 |   Memo20     String?   @db.NVarChar(Max)
  57 |   CheckBox01 String?   @db.NVarChar(Max)
  58 |   CheckBox02 String?   @db.NVarChar(Max)
  59 |   CheckBox03 String?   @db.NVarChar(Max)
  60 |   CheckBox04 String?   @db.NVarChar(Max)
  61 |   CheckBox05 String?   @db.NVarChar(Max)
  62 |   CheckBox06 String?   @db.NVarChar(Max)
  63 |   CheckBox07 String?   @db.NVarChar(Max)
  64 |   CheckBox08 String?   @db.NVarChar(Max)
  65 |   CheckBox09 String?   @db.NVarChar(Max)
  66 |   CheckBox10 String?   @db.NVarChar(Max)
  67 |   CheckBox11 String?   @db.NVarChar(Max)
  68 |   CheckBox12 String?   @db.NVarChar(Max)
  69 |   CheckBox13 String?   @db.NVarChar(Max)
  70 |   CheckBox14 String?   @db.NVarChar(Max)
  71 |   CheckBox15 String?   @db.NVarChar(Max)
  72 |   CheckBox16 String?   @db.NVarChar(Max)
  73 |   CheckBox17 String?   @db.NVarChar(Max)
  74 |   CheckBox18 String?   @db.NVarChar(Max)
  75 |   CheckBox19 String?   @db.NVarChar(Max)
  76 |   CheckBox20 String?   @db.NVarChar(Max)
  77 |   Select01   String?   @db.NVarChar(Max)
  78 |   Select02   String?   @db.NVarChar(Max)
  79 |   Select03   String?   @db.NVarChar(Max)
  80 |   Select04   String?   @db.NVarChar(Max)
  81 |   Select05   String?   @db.NVarChar(Max)
  82 |   Select06   String?   @db.NVarChar(Max)
  83 |   Select07   String?   @db.NVarChar(Max)
  84 |   Select08   String?   @db.NVarChar(Max)
  85 |   Select09   String?   @db.NVarChar(Max)
  86 |   Select10   String?   @db.NVarChar(Max)
  87 |   Select11   String?   @db.NVarChar(Max)
  88 |   Select12   String?   @db.NVarChar(Max)
  89 |   Select13   String?   @db.NVarChar(Max)
  90 |   Select14   String?   @db.NVarChar(Max)
  91 |   Select15   String?   @db.NVarChar(Max)
  92 |   Select16   String?   @db.NVarChar(Max)
  93 |   Select17   String?   @db.NVarChar(Max)
  94 |   Select18   String?   @db.NVarChar(Max)
  95 |   Select19   String?   @db.NVarChar(Max)
  96 |   Select20   String?   @db.NVarChar(Max)
  97 |   Int01      Int?
  98 |   Int02      Int?
  99 |   Int03      Int?
 100 |   Int04      Int?
 101 |   Int05      Int?
 102 |   Int06      Int?
 103 |   Int07      Int?
 104 |   Int08      Int?
 105 |   Int09      Int?
 106 |   Int10      Int?
 107 |   Int11      Int?
 108 |   Int12      Int?
 109 |   Int13      Int?
 110 |   Int14      Int?
 111 |   Int15      Int?
 112 |   Int16      Int?
 113 |   Int17      Int?
 114 |   Int18      Int?
 115 |   Int19      Int?
 116 |   Int20      Int?
 117 |   Double01   Decimal?  @db.Decimal(18, 8)
 118 |   Double02   Decimal?  @db.Decimal(18, 8)
 119 |   Double03   Decimal?  @db.Decimal(18, 8)
 120 |   Double04   Decimal?  @db.Decimal(18, 8)
 121 |   Double05   Decimal?  @db.Decimal(18, 8)
 122 |   Double06   Decimal?  @db.Decimal(18, 8)
 123 |   Double07   Decimal?  @db.Decimal(18, 8)
 124 |   Double08   Decimal?  @db.Decimal(18, 8)
 125 |   Double09   Decimal?  @db.Decimal(18, 8)
 126 |   Double10   Decimal?  @db.Decimal(18, 8)
 127 |   Double11   Decimal?  @db.Decimal(18, 8)
 128 |   Double12   Decimal?  @db.Decimal(18, 8)
 129 |   Double13   Decimal?  @db.Decimal(18, 8)
 130 |   Double14   Decimal?  @db.Decimal(18, 8)
 131 |   Double15   Decimal?  @db.Decimal(18, 8)
 132 |   Double16   Decimal?  @db.Decimal(18, 8)
 133 |   Double17   Decimal?  @db.Decimal(18, 8)
 134 |   Double18   Decimal?  @db.Decimal(18, 8)
 135 |   Double19   Decimal?  @db.Decimal(18, 8)
 136 |   Double20   Decimal?  @db.Decimal(18, 8)
 137 |   Date01     DateTime? @db.DateTime
 138 |   Date02     DateTime? @db.DateTime
 139 |   Date03     DateTime? @db.DateTime
 140 |   Date04     DateTime? @db.DateTime
 141 |   Date05     DateTime? @db.DateTime
 142 |   Date06     DateTime? @db.DateTime
 143 |   Date07     DateTime? @db.DateTime
 144 |   Date08     DateTime? @db.DateTime
 145 |   Date09     DateTime? @db.DateTime
 146 |   Date10     DateTime? @db.DateTime
 147 |   Radio01    String?   @db.NVarChar(450)
 148 |   Radio02    String?   @db.NVarChar(450)
 149 |   Radio03    String?   @db.NVarChar(450)
 150 |   Radio04    String?   @db.NVarChar(450)
 151 |   Radio05    String?   @db.NVarChar(450)
 152 |   Radio06    String?   @db.NVarChar(450)
 153 |   Radio07    String?   @db.NVarChar(450)
 154 |   Radio08    String?   @db.NVarChar(450)
 155 |   Radio09    String?   @db.NVarChar(450)
 156 |   Radio10    String?   @db.NVarChar(450)
 157 |   Txt21      String?   @db.NVarChar(450)
 158 |   Txt22      String?   @db.NVarChar(450)
 159 |   Txt23      String?   @db.NVarChar(450)
 160 |   Txt24      String?   @db.NVarChar(450)
 161 |   Txt25      String?   @db.NVarChar(450)
 162 |   Txt26      String?   @db.NVarChar(450)
 163 |   Txt27      String?   @db.NVarChar(450)
 164 |   Txt28      String?   @db.NVarChar(450)
 165 |   Txt29      String?   @db.NVarChar(450)
 166 |   Txt30      String?   @db.NVarChar(450)
 167 | 
 168 |   @@map("_temp_ContractCustomizedField")
 169 |   @@ignore
 170 |   @@schema("dbo")
 171 | }
 172 | 
 173 | model ActingAgent {
 174 |   Sn          Int          @id(map: "PK_ActingUser") @default(autoincrement())
 175 |   ActingID    Int?
 176 |   UserID      Int?
 177 |   User        User?        @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "FK_ActingAgent_User")
 178 |   ActingEntry ActingEntry? @relation(fields: [ActingID], references: [ActingID], onDelete: Cascade, onUpdate: NoAction, map: "FK_ActingUser_ActingEntry")
 179 | 
 180 |   @@index([ActingID], map: "IX_ActingAgent_ActingID")
 181 |   @@index([Sn], map: "IX_ActingAgent_Sn")
 182 |   @@index([UserID], map: "IX_ActingAgent_UserID")
 183 |   @@schema("join")
 184 | }
 185 | 
 186 | model ActingContract {
 187 |   Sn          Int          @id(map: "PK_ActingContract") @default(autoincrement())
 188 |   ActingID    Int?
 189 |   ContractID  Int?
 190 |   ActingEntry ActingEntry? @relation(fields: [ActingID], references: [ActingID], onDelete: Cascade, map: "FK_ActingContract_ActingEntry")
 191 |   Contract    Contract?    @relation(fields: [ContractID], references: [ContractID], onDelete: Cascade, onUpdate: NoAction, map: "FK_ActingContract_Contract")
 192 | 
 193 |   @@index([ActingID], map: "IX_ActingContract_ActingID")
 194 |   @@index([ContractID], map: "IX_ActingContract_ContractID")
 195 |   @@schema("join")
 196 | }
 197 | 
 198 | model ActingEntry {
 199 |   ActingID            Int              @id(map: "PK_ActingEntry") @default(autoincrement())
 200 |   UserID              Int?
 201 |   ValidStartDate      DateTime?        @db.DateTime
 202 |   ValidEndDate        DateTime?        @db.DateTime
 203 |   Reason              String?          @db.NVarChar(Max)
 204 |   IsVaild             Boolean?         @default(true, map: "DF_ActingEntry_IsVaild")
 205 |   IsActingAllContract Boolean?         @default(false, map: "DF_ActingEntry_IsActingAllContract")
 206 |   CreatedUserID       Int?
 207 |   CreateType          Int?
 208 |   ActingAgent         ActingAgent[]
 209 |   ActingContract      ActingContract[]
 210 |   User                User?            @relation(fields: [UserID], references: [UserID], onDelete: Cascade, map: "FK_ActingEntry_User")
 211 | 
 212 |   @@index([ActingID], map: "IX_ActingEntry_ActingID")
 213 |   @@index([CreatedUserID], map: "IX_ActingEntry_CreatedUserID")
 214 |   @@index([CreateType], map: "IX_ActingEntry_CreateType")
 215 |   @@index([UserID], map: "IX_ActingEntry_UserID")
 216 |   @@index([ValidEndDate], map: "IX_ActingEntry_ValidEndDate")
 217 |   @@index([ValidStartDate], map: "IX_ActingEntry_ValidStartDate")
 218 |   @@schema("data")
 219 | }
 220 | 
 221 | model ApiLog {
 222 |   Sn         Int      @id(map: "PK_ContractCustomizedField") @default(autoincrement())
 223 |   UserID     Int?
 224 |   Uri        String?  @db.NVarChar(Max)
 225 |   Body       String?  @db.NVarChar(Max)
 226 |   Response   String?  @db.NVarChar(Max)
 227 |   CreateDate DateTime @default(now(), map: "DF_ApiLog_CreateDate") @db.DateTime
 228 |   User       User?    @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "FK_ApiLog_User")
 229 | 
 230 |   @@schema("dbo")
 231 | }
 232 | 
 233 | model Attachment {
 234 |   AttachmentID                        Int                                   @id(map: "PK_Attachment") @default(autoincrement())
 235 |   FilePath                            String?                               @db.NVarChar(Max)
 236 |   Version                             Int?                                  @default(1, map: "DF_Attachment_Version")
 237 |   CreateDate                          DateTime?                             @default(now(), map: "DF_Attachment_CreateDate") @db.DateTime
 238 |   UserID                              Int?
 239 |   FileName                            String?                               @db.NVarChar(Max)
 240 |   FileSize                            Int?
 241 |   Description                         String?                               @db.NVarChar(Max)
 242 |   Type                                String?                               @db.NVarChar(125)
 243 |   FileTypeID                          Int?
 244 |   Extension                           String?                               @db.NVarChar(125)
 245 |   Disable                             Boolean?                              @default(false, map: "DF_Attachment_Disable")
 246 |   BaseAttachmentID                    Int?
 247 |   OriginalWordPath                    String?                               @db.NVarChar(Max)
 248 |   OriginalTempFileName                String?                               @db.NVarChar(50)
 249 |   FileHash                            String?                               @db.NVarChar(Max)
 250 |   Attachment                          Attachment?                           @relation("AttachmentToAttachment", fields: [BaseAttachmentID], references: [AttachmentID], onDelete: NoAction, onUpdate: NoAction, map: "FK_Attachment_Attachment")
 251 |   other_Attachment                    Attachment[]                          @relation("AttachmentToAttachment")
 252 |   FileType                            FileType?                             @relation(fields: [FileTypeID], references: [Sn], onDelete: NoAction, onUpdate: NoAction, map: "FK_Attachment_FileType")
 253 |   User                                User?                                 @relation(fields: [UserID], references: [UserID], onDelete: Cascade, map: "FK_Attachment_User")
 254 |   AttachmentBIP                       AttachmentBIP[]
 255 |   AttachmentCertified                 AttachmentCertified[]
 256 |   AttachmentGuid                      AttachmentGuid?
 257 |   ContractAttachment                  ContractAttachment[]
 258 |   ContractFileTemplateAttachment      ContractFileTemplateAttachment[]
 259 |   ContractFileTemplateExtraAttachment ContractFileTemplateExtraAttachment[]
 260 |   EnvelopeAttachment                  EnvelopeAttachment[]
 261 |   EventAttachment                     EventAttachment[]
 262 |   OtherExaminerAttachment             OtherExaminerAttachment[]
 263 |   OtherExaminerConfigAttachment       OtherExaminerConfigAttachment[]
 264 |   SignAttachment                      SignAttachment[]
 265 | 
 266 |   @@index([AttachmentID], map: "IX_Attachment_AttachmentID")
 267 |   @@index([BaseAttachmentID], map: "IX_Attachment_BaseAttachmentID")
 268 |   @@index([CreateDate], map: "IX_Attachment_CreateDate")
 269 |   @@index([Disable], map: "IX_Attachment_Disable")
 270 |   @@index([Extension], map: "IX_Attachment_Extension")
 271 |   @@index([FileSize], map: "IX_Attachment_FileSize")
 272 |   @@index([FileTypeID], map: "IX_Attachment_FileTypeID")
 273 |   @@index([OriginalTempFileName], map: "IX_Attachment_OriginalTempFileName")
 274 |   @@index([Type], map: "IX_Attachment_Type")
 275 |   @@index([UserID], map: "IX_Attachment_UserID")
 276 |   @@index([Version], map: "IX_Attachment_Version")
 277 |   @@schema("data")
 278 | }
 279 | 
 280 | model AttachmentBIP {
 281 |   SN            Int        @id(map: "PK_AttachmentBIPInfo") @default(autoincrement())
 282 |   AttachmentID  Int
 283 |   CertificateId String?    @db.NVarChar(450)
 284 |   Attachment    Attachment @relation(fields: [AttachmentID], references: [AttachmentID], onUpdate: NoAction, map: "FK_AttachmentBIP_Attachment")
 285 | 
 286 |   @@index([AttachmentID], map: "IX_AttachmentBIP_AttachmentID")
 287 |   @@index([CertificateId], map: "IX_AttachmentBIP_CertificateId")
 288 |   @@schema("join")
 289 | }
 290 | 
 291 | model AttachmentCertified {
 292 |   SN                   Int                 @id(map: "PK_AttachmentPDF") @default(autoincrement())
 293 |   AttachmentID         Int?
 294 |   FilePath             String?             @db.NVarChar(Max)
 295 |   UserID               Int?
 296 |   FileName             String?             @db.NVarChar(Max)
 297 |   FileSize             Int?
 298 |   Extension            String?             @db.NVarChar(125)
 299 |   CreateDate           DateTime            @default(now(), map: "DF_AttachmentPDF_CreateDate") @db.DateTime
 300 |   Version              Int?                @default(0, map: "DF_AttachmentCertified_Version")
 301 |   SignAttachmentInfoSn Int?
 302 |   SignAttachmentInfo   SignAttachmentInfo? @relation(fields: [SignAttachmentInfoSn], references: [SN], onDelete: NoAction, onUpdate: NoAction, map: "FK_AttachmentCertified_SignAttachmentInfo")
 303 |   Attachment           Attachment?         @relation(fields: [AttachmentID], references: [AttachmentID], onDelete: Cascade, onUpdate: NoAction, map: "FK_AttachmentPDF_Attachment")
 304 |   User                 User?               @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "FK_AttachmentPDF_User")
 305 | 
 306 |   @@index([AttachmentID], map: "IX_AttachmentCertified_AttachmentID")
 307 |   @@index([CreateDate], map: "IX_AttachmentCertified_CreateDate")
 308 |   @@index([Extension], map: "IX_AttachmentCertified_Extension")
 309 |   @@index([FileSize], map: "IX_AttachmentCertified_FileSize")
 310 |   @@index([SignAttachmentInfoSn], map: "IX_AttachmentCertified_SignAttachmentInfoSn")
 311 |   @@index([UserID], map: "IX_AttachmentCertified_UserID")
 312 |   @@index([Version], map: "IX_AttachmentCertified_Version")
 313 |   @@schema("data")
 314 | }
 315 | 
 316 | model AttachmentGuid {
 317 |   AttachmentID Int        @id(map: "PK_AttachmentGuid")
 318 |   Guid         String     @db.NVarChar(200)
 319 |   Attachment   Attachment @relation(fields: [AttachmentID], references: [AttachmentID], onDelete: Cascade, onUpdate: NoAction, map: "FK_AttachmentGuid_Attachment")
 320 | 
 321 |   @@index([Guid], map: "IX_AttachmentGuid_Guid")
 322 |   @@schema("join")
 323 | }
 324 | 
 325 | model AttachmentWatermark {
 326 |   SN                    Int                  @id(map: "PK_AttachmentWatermark") @default(autoincrement())
 327 |   WatermarkSettings     String?              @db.Xml
 328 |   WatermarkSettingsJson String?              @db.NVarChar(Max)
 329 |   SignAttachmentInfo    SignAttachmentInfo[]
 330 | 
 331 |   @@schema("join")
 332 | }
 333 | 
 334 | model Authority {
 335 |   AuthorityID                                                      Int                                  @id(map: "PK_Authority")
 336 |   Name                                                             String?                              @db.NVarChar(125)
 337 |   Seq                                                              Int?
 338 |   GroupID                                                          Int?
 339 |   Disable                                                          Boolean?                             @default(false, map: "DF_Authority_Disable")
 340 |   AuthorityGroup                                                   AuthorityGroup?                      @relation(fields: [GroupID], references: [GroupID], onDelete: Cascade, map: "FK_Authority_AuthorityGroup")
 341 |   ExamStage_ExamStage_ViewAuthorityIDToAuthority                   ExamStage[]                          @relation("ExamStage_ViewAuthorityIDToAuthority")
 342 |   ExamStage_ExamStage_EditAuthorityIDToAuthority                   ExamStage[]                          @relation("ExamStage_EditAuthorityIDToAuthority")
 343 |   ExamStageAuthority_ExamStageAuthority_EditAuthorityIDToAuthority ExamStageAuthority[]                 @relation("ExamStageAuthority_EditAuthorityIDToAuthority")
 344 |   ExamStageAuthority_ExamStageAuthority_ViewAuthorityIDToAuthority ExamStageAuthority[]                 @relation("ExamStageAuthority_ViewAuthorityIDToAuthority")
 345 |   UserAuthority                                                    UserAuthority[]
 346 |   UserContractAuthority                                            UserContractAuthority[]
 347 |   UserContractAuthorityForDepartment                               UserContractAuthorityForDepartment[]
 348 | 
 349 |   @@index([AuthorityID], map: "IX_Authority_AuthorityID")
 350 |   @@index([Disable], map: "IX_Authority_Disable")
 351 |   @@index([GroupID], map: "IX_Authority_GroupID")
 352 |   @@index([Name], map: "IX_Authority_Name")
 353 |   @@index([Seq], map: "IX_Authority_Seq")
 354 |   @@schema("code")
 355 | }
 356 | 
 357 | model AuthorityChangeLog {
 358 |   Sn           Int      @id(map: "PK_AuthorityChangeLog") @default(autoincrement())
 359 |   LoginSn      Int
 360 |   ChangingUser String   @db.NVarChar(225)
 361 |   ChangingItem String   @db.NVarChar(Max)
 362 |   ChangingDate DateTime @db.DateTime
 363 |   LoginLog     LoginLog @relation(fields: [LoginSn], references: [Sn], onUpdate: NoAction, map: "FK_AuthorityChangeLog_LoginLog")
 364 | 
 365 |   @@index([ChangingDate], map: "IX_AuthorityChangeLog_ChangingDate")
 366 |   @@index([ChangingUser], map: "IX_AuthorityChangeLog_ChangingUser")
 367 |   @@index([LoginSn], map: "IX_AuthorityChangeLog_LoginSn")
 368 |   @@schema("data")
 369 | }
 370 | 
 371 | model AuthorityGroup {
 372 |   GroupID             Int         @id(map: "PK_AuthorityGroup")
 373 |   Name                String?     @db.NVarChar(125)
 374 |   Seq                 Int?
 375 |   ExamStageID         Int?
 376 |   Disable             Boolean?    @default(false, map: "DF_AuthorityGroup_Disable")
 377 |   ContractFlowGroupID Int?
 378 |   Authority           Authority[]
 379 | 
 380 |   @@index([ContractFlowGroupID], map: "IX_AuthorityGroup_ContractFlowGroupID")
 381 |   @@index([ExamStageID], map: "IX_AuthorityGroup_ContractFlowSeq")
 382 |   @@index([GroupID], map: "IX_AuthorityGroup_GroupID")
 383 |   @@index([Name], map: "IX_AuthorityGroup_Name")
 384 |   @@index([Seq], map: "IX_AuthorityGroup_Seq")
 385 |   @@schema("code")
 386 | }
 387 | 
 388 | model Classification {
 389 |   SN                     Int                      @id(map: "PK_Classification") @default(autoincrement())
 390 |   Name                   String                   @db.NVarChar(Max)
 391 |   ParentSN               Int?
 392 |   CreateDate             DateTime?                @default(now(), map: "DF_Classification_CreateDate") @db.DateTime
 393 |   IsEnable               Boolean                  @default(true, map: "DF_Classification_IsEnable")
 394 |   ContractClassification ContractClassification[]
 395 | 
 396 |   @@schema("code")
 397 | }
 398 | 
 399 | model CloseStage {
 400 |   CloseStageID Int        @id(map: "PK_CloseStage") @default(autoincrement())
 401 |   Name         String?    @db.NVarChar(450)
 402 |   SystemDefine Boolean?
 403 |   Disable      Boolean?
 404 |   Seq          Int?
 405 |   Contract     Contract[]
 406 | 
 407 |   @@index([Name], map: "IX_CloseStage_Name")
 408 |   @@index([Seq], map: "IX_CloseStage_Seq")
 409 |   @@schema("code")
 410 | }
 411 | 
 412 | model CloseStatus {
 413 |   Sn           Int      @id(map: "PK_CloseStatus") @default(autoincrement())
 414 |   Name         String?  @db.NVarChar(125)
 415 |   SystemDefine Boolean?
 416 |   Disable      Boolean?
 417 | 
 418 |   @@index([Name], map: "IX_CloseStatus_Name")
 419 |   @@schema("code")
 420 | }
 421 | 
 422 | model CompanyList {
 423 |   CompanyID   Int     @id(map: "PK_CompanyList") @default(autoincrement())
 424 |   CompanyType String? @db.NVarChar(50)
 425 |   CompanyName String? @db.NVarChar(50)
 426 | 
 427 |   @@index([CompanyName], map: "IX_CompanyList_CompanyName")
 428 |   @@index([CompanyType], map: "IX_CompanyList_CompanyType")
 429 |   @@schema("data")
 430 | }
 431 | 
 432 | model Contract {
 433 |   ContractID                                                              Int                      @id(map: "PK_Contract") @default(autoincrement())
 434 |   DocumentName                                                            String?                  @db.NVarChar(255)
 435 |   RecorderID                                                              Int?
 436 |   CreateDate                                                              DateTime?                @default(now(), map: "DF_Contract_CreateDate") @db.DateTime
 437 |   BranchID                                                                Int?
 438 |   Requirement                                                             String?                  @db.NVarChar(Max)
 439 |   ProvisionDate                                                           DateTime?                @db.DateTime
 440 |   PartnerMemo                                                             String?                  @db.NVarChar(Max)
 441 |   ReceiveNo                                                               String?                  @db.NVarChar(255)
 442 |   SaveNo                                                                  String?                  @db.NVarChar(255)
 443 |   ReceiveDate                                                             DateTime?                @db.DateTime
 444 |   SaveDate                                                                DateTime?                @db.DateTime
 445 |   ApplicationDate                                                         DateTime?                @db.DateTime
 446 |   UrgentLevel                                                             Int?                     @default(0, map: "DF_Contract_UrgentLevel")
 447 |   RequireSign                                                             Boolean?                 @default(false, map: "DF_Contract_RequireSign")
 448 |   RequirePartnerSign                                                      Boolean?                 @default(false, map: "DF_Contract_RequirePartnerSign")
 449 |   SignTypeID                                                              Int?
 450 |   CurrentStageID                                                          Int?
 451 |   BackStageID                                                             Int?
 452 |   ExchangeTypeID                                                          Int?
 453 |   CostClause                                                              String?                  @db.NVarChar(Max)
 454 |   OtherClause                                                             String?                  @db.NVarChar(Max)
 455 |   CostNTD                                                                 Decimal?                 @db.Decimal(18, 2)
 456 |   Cost                                                                    Decimal?                 @db.Decimal(18, 2)
 457 |   Memo                                                                    String?                  @db.NVarChar(Max)
 458 |   EffectiveDate                                                           DateTime?                @db.DateTime
 459 |   ValidStartDate                                                          DateTime?                @db.DateTime
 460 |   ValidEndDate                                                            DateTime?                @db.DateTime
 461 |   SignMemo                                                                String?                  @db.NVarChar(Max)
 462 |   DocumentNo                                                              String?                  @db.NVarChar(Max)
 463 |   LastSendMailDate                                                        DateTime?                @db.DateTime
 464 |   AlertExtend                                                             Boolean?
 465 |   AlertEmails                                                             String?                  @db.NVarChar(255)
 466 |   CompanySignID                                                           Int?
 467 |   ApplyNo                                                                 String?                  @db.NVarChar(255)
 468 |   AlertBeginDate                                                          DateTime?                @db.DateTime
 469 |   AlertPeriod                                                             Int?
 470 |   AutoExtend                                                              Boolean?
 471 |   ExtendYear                                                              Int?
 472 |   ExtendMonth                                                             Int?
 473 |   FinalCost                                                               Decimal?                 @db.Decimal(18, 2)
 474 |   AlertCCEmails                                                           String?                  @db.NVarChar(255)
 475 |   AlertBCCEmails                                                          String?                  @db.NVarChar(255)
 476 |   NeedCost                                                                Boolean?
 477 |   FinalCostExchangeTypeID                                                 Int?
 478 |   FinalCostNTD                                                            Decimal?                 @db.Decimal(18, 2)
 479 |   AlertEndDate                                                            DateTime?                @db.DateTime
 480 |   CloseMemo                                                               String?                  @db.NVarChar(Max)
 481 |   CloseStageID                                                            Int?
 482 |   AutoRenewDeadline                                                       Boolean?
 483 |   AutoRenewNewDate                                                        Boolean?
 484 |   AutoRenewValidEndDate                                                   DateTime?                @db.DateTime
 485 |   CloseCaseBeforeMonth                                                    Int?
 486 |   CloseCaseBeforeDay                                                      Int?
 487 |   ExtendWithoutNotice                                                     Boolean?
 488 |   ExtendPeriodYear                                                        Int?
 489 |   ExtendPeriodMonth                                                       Int?
 490 |   AutoCircleCount                                                         Int?
 491 |   TerminationWithoutNotice                                                Boolean?
 492 |   IsAlert                                                                 Boolean?
 493 |   NotifyBeforeDay                                                         Int?
 494 |   NotifyDay                                                               Int?
 495 |   CloseMailToSelect                                                       Int?
 496 |   CloseMailToOther                                                        String?                  @db.NVarChar(450)
 497 |   CloseCCMailToSelect                                                     Int?
 498 |   CloseCCMailToOther                                                      String?                  @db.NVarChar(450)
 499 |   CloseBCCMailToSelect                                                    Int?
 500 |   CloseBCCMailToOther                                                     String?                  @db.NVarChar(450)
 501 |   Txt01                                                                   String?                  @db.NVarChar(450)
 502 |   Txt02                                                                   String?                  @db.NVarChar(450)
 503 |   Txt03                                                                   String?                  @db.NVarChar(450)
 504 |   Txt04                                                                   String?                  @db.NVarChar(450)
 505 |   Txt05                                                                   String?                  @db.NVarChar(450)
 506 |   Txt06                                                                   String?                  @db.NVarChar(450)
 507 |   Txt07                                                                   String?                  @db.NVarChar(450)
 508 |   Txt08                                                                   String?                  @db.NVarChar(450)
 509 |   Txt09                                                                   String?                  @db.NVarChar(450)
 510 |   Txt10                                                                   String?                  @db.NVarChar(450)
 511 |   Memo01                                                                  String?                  @db.NVarChar(Max)
 512 |   Memo02                                                                  String?                  @db.NVarChar(Max)
 513 |   Memo03                                                                  String?                  @db.NVarChar(Max)
 514 |   Memo04                                                                  String?                  @db.NVarChar(Max)
 515 |   Memo05                                                                  String?                  @db.NVarChar(Max)
 516 |   Memo06                                                                  String?                  @db.NVarChar(Max)
 517 |   Memo07                                                                  String?                  @db.NVarChar(Max)
 518 |   Memo08                                                                  String?                  @db.NVarChar(Max)
 519 |   Memo09                                                                  String?                  @db.NVarChar(Max)
 520 |   Memo10                                                                  String?                  @db.NVarChar(Max)
 521 |   Memo11                                                                  String?                  @db.NVarChar(Max)
 522 |   Memo12                                                                  String?                  @db.NVarChar(Max)
 523 |   Memo13                                                                  String?                  @db.NVarChar(Max)
 524 |   Memo14                                                                  String?                  @db.NVarChar(Max)
 525 |   Memo15                                                                  String?                  @db.NVarChar(Max)
 526 |   Radio01                                                                 String?                  @db.NVarChar(2000)
 527 |   Radio02                                                                 String?                  @db.NVarChar(2000)
 528 |   Radio03                                                                 String?                  @db.NVarChar(2000)
 529 |   Radio04                                                                 String?                  @db.NVarChar(2000)
 530 |   Radio05                                                                 String?                  @db.NVarChar(2000)
 531 |   CheckBox01                                                              String?                  @db.NVarChar(2000)
 532 |   CheckBox02                                                              String?                  @db.NVarChar(2000)
 533 |   CheckBox03                                                              String?                  @db.NVarChar(2000)
 534 |   CheckBox04                                                              String?                  @db.NVarChar(2000)
 535 |   CheckBox05                                                              String?                  @db.NVarChar(2000)
 536 |   Select01                                                                String?                  @db.NVarChar(2000)
 537 |   Select02                                                                String?                  @db.NVarChar(2000)
 538 |   Select03                                                                String?                  @db.NVarChar(2000)
 539 |   Select04                                                                String?                  @db.NVarChar(2000)
 540 |   Select05                                                                String?                  @db.NVarChar(2000)
 541 |   Int01                                                                   Int?
 542 |   Int02                                                                   Int?
 543 |   Int03                                                                   Int?
 544 |   Int04                                                                   Int?
 545 |   Int05                                                                   Int?
 546 |   Double01                                                                Decimal?                 @db.Decimal(18, 8)
 547 |   Double02                                                                Decimal?                 @db.Decimal(18, 8)
 548 |   Double03                                                                Decimal?                 @db.Decimal(18, 8)
 549 |   Double04                                                                Decimal?                 @db.Decimal(18, 8)
 550 |   Double05                                                                Decimal?                 @db.Decimal(18, 8)
 551 |   Date01                                                                  DateTime?                @db.DateTime
 552 |   Date02                                                                  DateTime?                @db.DateTime
 553 |   Date03                                                                  DateTime?                @db.DateTime
 554 |   Date04                                                                  DateTime?                @db.DateTime
 555 |   Date05                                                                  DateTime?                @db.DateTime
 556 |   Date06                                                                  DateTime?                @db.DateTime
 557 |   Date07                                                                  DateTime?                @db.DateTime
 558 |   Date08                                                                  DateTime?                @db.DateTime
 559 |   Date09                                                                  DateTime?                @db.DateTime
 560 |   Date10                                                                  DateTime?                @db.DateTime
 561 |   ContractModuleSN                                                        Int?
 562 |   FinalCostExchangeRate                                                   Decimal?                 @db.Decimal(10, 2)
 563 |   DurationOtherMsg                                                        String?                  @db.NVarChar(Max)
 564 |   ApplicantDepartmentID                                                   Int?
 565 |   ContractCost                                                            Int?
 566 |   CostOtherText                                                           String?                  @db.NVarChar(450)
 567 |   ValidOtherType                                                          Int?
 568 |   ValidOtherTypeMemo                                                      String?                  @db.NVarChar(450)
 569 |   AutoExtendContract                                                      Int?
 570 |   AutoExtendLimited                                                       Int?
 571 |   AutoExtendLimitedFrequency                                              Int?
 572 |   AutoExtendFrequency                                                     Int?
 573 |   ValidDurationType                                                       Int?                     @default(0, map: "DF_Contract_ValidDurationType")
 574 |   LastAutoExtendDate                                                      DateTime?                @db.DateTime
 575 |   CountrySn                                                               Int?
 576 |   ActingContract                                                          ActingContract[]
 577 |   CloseStage                                                              CloseStage?              @relation(fields: [CloseStageID], references: [CloseStageID], onDelete: NoAction, onUpdate: NoAction, map: "FK_Contract_CloseStage")
 578 |   CountryCode                                                             CountryCode?             @relation(fields: [CountrySn], references: [Sn], onDelete: NoAction, onUpdate: NoAction, map: "FK_Contract_CountrySn_CountryCode_Sn")
 579 |   Department_Contract_BranchIDToDepartment                                Department?              @relation("Contract_BranchIDToDepartment", fields: [BranchID], references: [DepartmentID], onDelete: NoAction, onUpdate: NoAction, map: "FK_Contract_Department")
 580 |   Department_Contract_ApplicantDepartmentIDToDepartment                   Department?              @relation("Contract_ApplicantDepartmentIDToDepartment", fields: [ApplicantDepartmentID], references: [DepartmentID], onDelete: NoAction, onUpdate: NoAction, map: "FK_Contract_Department1")
 581 |   UrgentLevel_Contract_UrgentLevelToUrgentLevel                           UrgentLevel?             @relation("Contract_UrgentLevelToUrgentLevel", fields: [UrgentLevel], references: [UrgentLevelID], onDelete: NoAction, onUpdate: NoAction, map: "FK_Contract_UrgentLevel")
 582 |   User                                                                    User?                    @relation(fields: [RecorderID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "FK_Contract_User")
 583 |   ContractAccessRelated_ContractAccessRelated_MainContractIDToContract    ContractAccessRelated[]  @relation("ContractAccessRelated_MainContractIDToContract")
 584 |   ContractAccessRelated_ContractAccessRelated_RelatedContractIDToContract ContractAccessRelated[]  @relation("ContractAccessRelated_RelatedContractIDToContract")
 585 |   ContractAmount                                                          join_ContractAmount?
 586 |   ContractAttachment                                                      ContractAttachment[]
 587 |   ContractClassification                                                  ContractClassification[]
 588 |   ContractCustom                                                          ContractCustom?
 589 |   ContractCustomizedField                                                 ContractCustomizedField?
 590 |   ContractEnvelopes                                                       ContractEnvelopes[]
 591 |   ContractEvent                                                           ContractEvent[]
 592 |   ContractExaminer                                                        ContractExaminer[]
 593 |   ContractExamStageInfo                                                   ContractExamStageInfo?
 594 |   ContractExtendInfo                                                      ContractExtendInfo?
 595 |   ContractGuid                                                            ContractGuid?
 596 |   ContractHistory                                                         ContractHistory[]
 597 |   ContractMailLog                                                         ContractMailLog[]
 598 |   ContractMessageBoard                                                    ContractMessageBoard[]
 599 |   ContractOtherNotify                                                     ContractOtherNotify[]
 600 |   ContractPartner                                                         ContractPartner[]
 601 |   ContractRequireSign                                                     ContractRequireSign[]
 602 |   ContractStampDuty                                                       ContractStampDuty[]
 603 |   ContractType                                                            join_ContractType[]      @ignore
 604 |   ContractViewTemp                                                        ContractViewTemp?
 605 |   LTCLog                                                                  LTCLog[]
 606 |   PartnerSignLog                                                          PartnerSignLog[]
 607 |   ProjectContract                                                         ProjectContract[]
 608 |   RelatedContract_RelatedContract_ContractIDToContract                    RelatedContract[]        @relation("RelatedContract_ContractIDToContract")
 609 |   RelatedContract_RelatedContract_RelatedContractIDToContract             RelatedContract[]        @relation("RelatedContract_RelatedContractIDToContract")
 610 |   TempPartner                                                             TempPartner[]
 611 |   UserContractAuthority                                                   UserContractAuthority[]
 612 | 
 613 |   @@index([AlertBCCEmails], map: "IX_Contract_AlertBCCEmails")
 614 |   @@index([AlertBeginDate], map: "IX_Contract_AlertBeginDate")
 615 |   @@index([AlertCCEmails], map: "IX_Contract_AlertCCEmails")
 616 |   @@index([AlertEmails], map: "IX_Contract_AlertEmails")
 617 |   @@index([AlertEndDate], map: "IX_Contract_AlertEndDate")
 618 |   @@index([AlertPeriod], map: "IX_Contract_AlertPeriod")
 619 |   @@index([ApplicantDepartmentID], map: "IX_Contract_ApplicantDepartment")
 620 |   @@index([ApplicationDate], map: "IX_Contract_ApplicationDate")
 621 |   @@index([ApplyNo], map: "IX_Contract_ApplyNo")
 622 |   @@index([AutoCircleCount], map: "IX_Contract_AutoCircleCount")
 623 |   @@index([AutoExtendContract], map: "IX_Contract_AutoExtendContract")
 624 |   @@index([AutoExtendFrequency], map: "IX_Contract_AutoExtendFrequency")
 625 |   @@index([AutoExtendLimited], map: "IX_Contract_AutoExtendLimited")
 626 |   @@index([AutoExtendLimitedFrequency], map: "IX_Contract_AutoExtendLimitedFrequency")
 627 |   @@index([AutoRenewValidEndDate], map: "IX_Contract_AutoRenewValidEndDate")
 628 |   @@index([BackStageID], map: "IX_Contract_BackStageID")
 629 |   @@index([BranchID], map: "IX_Contract_BranchID")
 630 |   @@index([CloseBCCMailToOther], map: "IX_Contract_CloseBCCMailToOther")
 631 |   @@index([CloseBCCMailToSelect], map: "IX_Contract_CloseBCCMailToSelect")
 632 |   @@index([CloseCaseBeforeDay], map: "IX_Contract_CloseCaseBeforeDay")
 633 |   @@index([CloseCaseBeforeMonth], map: "IX_Contract_CloseCaseBeforeMonth")
 634 |   @@index([CloseCCMailToOther], map: "IX_Contract_CloseCCMailToOther")
 635 |   @@index([CloseCCMailToSelect], map: "IX_Contract_CloseCCMailToSelect")
 636 |   @@index([CloseMailToOther], map: "IX_Contract_CloseMailToOther")
 637 |   @@index([CloseMailToSelect], map: "IX_Contract_CloseMailToSelect")
 638 |   @@index([CloseStageID], map: "IX_Contract_CloseStageID")
 639 |   @@index([CompanySignID], map: "IX_Contract_CompanySignID")
 640 |   @@index([ContractCost], map: "IX_CONTRACT_CONTRACTCOST")
 641 |   @@index([ContractID], map: "IX_Contract_ContractID")
 642 |   @@index([ContractModuleSN], map: "IX_Contract_ContractModuleSN")
 643 |   @@index([Cost], map: "IX_Contract_Cost")
 644 |   @@index([CostNTD], map: "IX_Contract_CostNTD")
 645 |   @@index([CostOtherText], map: "IX_Contract_CostOtherText")
 646 |   @@index([CreateDate], map: "IX_Contract_CreateDate")
 647 |   @@index([CurrentStageID], map: "IX_Contract_CurrentStageID")
 648 |   @@index([Date01], map: "IX_Contract_Date01")
 649 |   @@index([Date02], map: "IX_Contract_Date02")
 650 |   @@index([Date03], map: "IX_Contract_Date03")
 651 |   @@index([Date04], map: "IX_Contract_Date04")
 652 |   @@index([Date05], map: "IX_Contract_Date05")
 653 |   @@index([Date06], map: "IX_Contract_Date06")
 654 |   @@index([Date07], map: "IX_Contract_Date07")
 655 |   @@index([Date08], map: "IX_Contract_Date08")
 656 |   @@index([Date09], map: "IX_Contract_Date09")
 657 |   @@index([Date10], map: "IX_Contract_Date10")
 658 |   @@index([DocumentName], map: "IX_Contract_DocumentName")
 659 |   @@index([Double01], map: "IX_Contract_Double01")
 660 |   @@index([Double02], map: "IX_Contract_Double02")
 661 |   @@index([Double03], map: "IX_Contract_Double03")
 662 |   @@index([Double04], map: "IX_Contract_Double04")
 663 |   @@index([Double05], map: "IX_Contract_Double05")
 664 |   @@index([EffectiveDate], map: "IX_Contract_EffectiveDate")
 665 |   @@index([ExchangeTypeID], map: "IX_Contract_ExchangeTypeID")
 666 |   @@index([ExtendMonth], map: "IX_Contract_ExtendMonth")
 667 |   @@index([ExtendPeriodMonth], map: "IX_Contract_ExtendPeriodMonth")
 668 |   @@index([ExtendPeriodYear], map: "IX_Contract_ExtendPeriodYear")
 669 |   @@index([ExtendYear], map: "IX_Contract_ExtendYear")
 670 |   @@index([FinalCost], map: "IX_Contract_FinalCost")
 671 |   @@index([FinalCostExchangeRate], map: "IX_Contract_FinalCostExchangeRate")
 672 |   @@index([FinalCostExchangeTypeID], map: "IX_Contract_FinalCostExchangeTypeID")
 673 |   @@index([FinalCostNTD], map: "IX_Contract_FinalCostNTD")
 674 |   @@index([Int01], map: "IX_Contract_Int01")
 675 |   @@index([Int02], map: "IX_Contract_Int02")
 676 |   @@index([Int03], map: "IX_Contract_Int03")
 677 |   @@index([Int04], map: "IX_Contract_Int04")
 678 |   @@index([Int05], map: "IX_Contract_Int05")
 679 |   @@index([LastAutoExtendDate], map: "IX_Contract_LastAutoExtendDate")
 680 |   @@index([LastSendMailDate], map: "IX_Contract_LastSendMailDate")
 681 |   @@index([NotifyBeforeDay], map: "IX_Contract_NotifyBeforeDay")
 682 |   @@index([NotifyDay], map: "IX_Contract_NotifyDay")
 683 |   @@index([ProvisionDate], map: "IX_Contract_ProvisionDate")
 684 |   @@index([ReceiveDate], map: "IX_Contract_ReceiveDate")
 685 |   @@index([ReceiveNo], map: "IX_Contract_ReceiveNo")
 686 |   @@index([RecorderID], map: "IX_Contract_RecorderID")
 687 |   @@index([RequirePartnerSign], map: "IX_Contract_RequirePartnerSign")
 688 |   @@index([RequireSign], map: "IX_Contract_RequireSign")
 689 |   @@index([SaveDate], map: "IX_Contract_SaveDate")
 690 |   @@index([SaveNo], map: "IX_Contract_SaveNo")
 691 |   @@index([SignTypeID], map: "IX_Contract_SignTypeID")
 692 |   @@index([Txt01], map: "IX_Contract_Txt01")
 693 |   @@index([Txt02], map: "IX_Contract_Txt02")
 694 |   @@index([Txt03], map: "IX_Contract_Txt03")
 695 |   @@index([Txt04], map: "IX_Contract_Txt04")
 696 |   @@index([Txt05], map: "IX_Contract_Txt05")
 697 |   @@index([Txt06], map: "IX_Contract_Txt06")
 698 |   @@index([Txt07], map: "IX_Contract_Txt07")
 699 |   @@index([Txt08], map: "IX_Contract_Txt08")
 700 |   @@index([Txt09], map: "IX_Contract_Txt09")
 701 |   @@index([Txt10], map: "IX_Contract_Txt10")
 702 |   @@index([UrgentLevel], map: "IX_Contract_UrgentLevel")
 703 |   @@index([ValidDurationType], map: "IX_Contract_ValidDurationType")
 704 |   @@index([ValidEndDate], map: "IX_Contract_ValidEndDate")
 705 |   @@index([ValidOtherType], map: "IX_Contract_ValidOtherType")
 706 |   @@index([ValidOtherTypeMemo], map: "IX_Contract_ValidOtherTypeMemo")
 707 |   @@index([ValidStartDate], map: "IX_Contract_ValidStartDate")
 708 |   @@schema("data")
 709 | }
 710 | 
 711 | model ContractAccessRelated {
 712 |   SN                                                         Int       @id(map: "PK_ContractAccessRelated") @default(autoincrement())
 713 |   MainContractID                                             Int?
 714 |   RelatedContractID                                          Int?
 715 |   CreateDateTime                                             DateTime  @db.DateTime
 716 |   Txt01                                                      String?   @db.NVarChar(450)
 717 |   Txt02                                                      String?   @db.NVarChar(450)
 718 |   Txt03                                                      String?   @db.NVarChar(450)
 719 |   Txt04                                                      String?   @db.NVarChar(450)
 720 |   Contract_ContractAccessRelated_MainContractIDToContract    Contract? @relation("ContractAccessRelated_MainContractIDToContract", fields: [MainContractID], references: [ContractID], onDelete: Cascade, onUpdate: NoAction, map: "FK_ContractAccessRelated_Contract")
 721 |   Contract_ContractAccessRelated_RelatedContractIDToContract Contract? @relation("ContractAccessRelated_RelatedContractIDToContract", fields: [RelatedContractID], references: [ContractID], onDelete: NoAction, onUpdate: NoAction, map: "FK_ContractAccessRelated_Contract1")
 722 | 
 723 |   @@index([CreateDateTime], map: "IX_ContractAccessRelated_CreateDateTime")
 724 |   @@index([MainContractID], map: "IX_ContractAccessRelated_MainContractID")
 725 |   @@index([RelatedContractID], map: "IX_ContractAccessRelated_RelatedContractID")
 726 |   @@index([Txt01], map: "IX_ContractAccessRelated_Txt01")
 727 |   @@index([Txt02], map: "IX_ContractAccessRelated_Txt02")
 728 |   @@index([Txt03], map: "IX_ContractAccessRelated_Txt03")
 729 |   @@index([Txt04], map: "IX_ContractAccessRelated_Txt04")
 730 |   @@schema("join")
 731 | }
 732 | 
 733 | model ContractAccessType {
 734 |   SN                 Int                  @id(map: "PK_ContractAccessType_SN") @default(autoincrement())
 735 |   Name               String               @db.NVarChar(300)
 736 |   Seq                Int
 737 |   Enable             Boolean
 738 |   ContractExtendInfo ContractExtendInfo[]
 739 | 
 740 |   @@index([Name], map: "IX_ContractAccessType_Name")
 741 |   @@index([Seq], map: "IX_ContractAccessType_Seq")
 742 |   @@schema("code")
 743 | }
 744 | 
 745 | /// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
 746 | model code_ContractAmount {
 747 |   ContractAmountID Int                   @id @default(autoincrement())
 748 |   AmountItem       String                @db.NVarChar(250)
 749 |   Disable          Boolean               @default(false, map: "DF_ContractAmount_Disable")
 750 |   SystemDefine     Boolean               @default(false, map: "DF_ContractAmount_SystemDefine")
 751 |   ContractAmount   join_ContractAmount[]
 752 | 
 753 |   @@index([AmountItem], map: "IX_ContractAmount_AmountItem")
 754 |   @@map("ContractAmount")
 755 |   @@ignore
 756 |   @@schema("code")
 757 | }
 758 | 
 759 | model join_ContractAmount {
 760 |   SN               Int                  @id(map: "PK_ContractAmount_1") @default(autoincrement())
 761 |   ContractID       Int                  @unique(map: "UC_ContractAmount_ContractID")
 762 |   ContractAmountID Int?
 763 |   ExchangeTypeID   Int?
 764 |   Cost             Decimal?             @db.Decimal(18, 2)
 765 |   CostNTD          Decimal?             @db.Decimal(18, 2)
 766 |   ExchangeRate     Decimal?             @db.Decimal(10, 2)
 767 |   Tax              Int?
 768 |   PayPeriod        String?              @db.NVarChar(450)
 769 |   Contract         Contract             @relation(fields: [ContractID], references: [ContractID], onDelete: Cascade, map: "FK_ContractAmount_Contract")
 770 |   ContractAmount   code_ContractAmount? @relation(fields: [ContractAmountID], references: [ContractAmountID], onDelete: NoAction, onUpdate: NoAction, map: "FK_ContractAmount_ContractAmount") @ignore
 771 |   Exchange         Exchange?            @relation(fields: [ExchangeTypeID], references: [Sn], onDelete: NoAction, onUpdate: NoAction, map: "FK_ContractAmount_Exchange")
 772 | 
 773 |   @@map("ContractAmount")
 774 |   @@schema("join")
 775 | }
 776 | 
 777 | model ContractAttachment {
 778 |   Sn                     Int         @id(map: "PK_ContractAttachment") @default(autoincrement())
 779 |   AttachmentID           Int?
 780 |   ContractID             Int?
 781 |   ExamStageID            Int?
 782 |   ExaminerSn             Int?
 783 |   ContractFileTemplateSN Int?
 784 |   Attachment             Attachment? @relation(fields: [AttachmentID], references: [AttachmentID], onDelete: Cascade, map: "FK_ContractAttachment_Attachment")
 785 |   Contract               Contract?   @relation(fields: [ContractID], references: [ContractID], onDelete: Cascade, map: "FK_ContractAttachment_Contract")
 786 | 
 787 |   @@index([AttachmentID], map: "IX_ContractAttachment_AttachmentID")
 788 |   @@index([ContractFileTemplateSN], map: "IX_ContractAttachment_ContractFileTemplateSN")
 789 |   @@index([ContractID], map: "IX_ContractAttachment_ContractID")
 790 |   @@index([ExaminerSn], map: "IX_ContractAttachment_ExaminerSn")
 791 |   @@index([ExamStageID], map: "IX_ContractAttachment_ExamStageID")
 792 |   @@schema("join")
 793 | }
 794 | 
 795 | model ContractAttachmentStatus {
 796 |   Sn           Int     @id(map: "PK_ContractAttachmentStatus") @default(autoincrement())
 797 |   AttachmentId Int
 798 |   ContractId   Int
 799 |   IsDelete     Boolean
 800 | 
 801 |   @@index([AttachmentId], map: "IX_ContractAttachmentStatus_AttachmentId")
 802 |   @@index([ContractId], map: "IX_ContractAttachmentStatus_ContractId")
 803 |   @@schema("join")
 804 | }
 805 | 
 806 | model ContractClassification {
 807 |   SN               Int            @id(map: "PK_ContractClassification") @default(autoincrement())
 808 |   ContractID       Int
 809 |   ClassificationSN Int
 810 |   Classification   Classification @relation(fields: [ClassificationSN], references: [SN], onDelete: Cascade, map: "FK_ContractClassification_ClassificationSN_Classification_SN")
 811 |   Contract         Contract       @relation(fields: [ContractID], references: [ContractID], onDelete: Cascade, map: "FK_ContractClassification_ContractID_Contract_ContractID")
 812 | 
 813 |   @@index([ClassificationSN], map: "IX_ContractClassification_ClassificationSN")
 814 |   @@index([ContractID], map: "IX_ContractClassification_ContractID")
 815 |   @@schema("join")
 816 | }
 817 | 
 818 | model ContractCurrentExaminerTemp {
 819 |   SN         Int     @id(map: "PK_ContractCurrentExaminerTemp") @default(autoincrement())
 820 |   ContractID Int
 821 |   UserID     Int
 822 |   ExamType   String? @db.NVarChar(50)
 823 | 
 824 |   @@index([ContractID], map: "IX_ContractCurrentExaminerTemp_ContractID")
 825 |   @@index([ExamType], map: "IX_ContractCurrentExaminerTemp_ExamType")
 826 |   @@index([UserID], map: "IX_ContractCurrentExaminerTemp_UserID")
 827 |   @@schema("dbo")
 828 | }
 829 | 
 830 | model ContractCustom {
 831 |   ContractID             Int          @id(map: "PK_ContractCustom_ContractID")
 832 |   ApplicableField        Boolean?
 833 |   WhoPaymentField        String?      @db.NVarChar(100)
 834 |   OtherPaymentField      String?      @db.NVarChar(200)
 835 |   CountryCodeSn          Int?
 836 |   SiteCodeSn             Int?
 837 |   BusinessComment        String?      @db.NVarChar(Max)
 838 |   CompanyCode            String?      @db.NVarChar(200)
 839 |   CompanyType1           String?      @db.NVarChar(50)
 840 |   YearField              String?      @db.NVarChar(50)
 841 |   CountryField           String?      @db.NVarChar(50)
 842 |   CompanyType2           String?      @db.NVarChar(50)
 843 |   Cus_ProductProjectName String?      @db.NVarChar(450)
 844 |   NeedSignature          Boolean?
 845 |   Contract               Contract     @relation(fields: [ContractID], references: [ContractID], onDelete: Cascade, map: "FK_ContractCustom_Contract")
 846 |   CountryCode            CountryCode? @relation(fields: [CountryCodeSn], references: [Sn], onDelete: NoAction, onUpdate: NoAction, map: "FK_ContractCustom_CountryCode")
 847 |   SiteCode               SiteCode?    @relation(fields: [SiteCodeSn], references: [Sn], onDelete: NoAction, onUpdate: NoAction, map: "FK_ContractCustom_SiteCode")
 848 | 
 849 |   @@index([CompanyCode], map: "IX_ContractCustom_CompanyCode")
 850 |   @@index([CompanyType1], map: "IX_ContractCustom_CompanyType1")
 851 |   @@index([CompanyType2], map: "IX_ContractCustom_CompanyType2")
 852 |   @@index([CountryCodeSn], map: "IX_ContractCustom_CountryCodeSn")
 853 |   @@index([CountryField], map: "IX_ContractCustom_CountryField")
 854 |   @@index([Cus_ProductProjectName], map: "IX_ContractCustom_Cus_ProductProjectName")
 855 |   @@index([OtherPaymentField], map: "IX_ContractCustom_OtherPaymentField")
 856 |   @@index([SiteCodeSn], map: "IX_ContractCustom_SiteCodeSn")
 857 |   @@index([WhoPaymentField], map: "IX_ContractCustom_WhoPaymentField")
 858 |   @@index([YearField], map: "IX_ContractCustom_YearField")
 859 |   @@schema("data")
 860 | }
 861 | 
 862 | model ContractCustomizedField {
 863 |   ContractId Int       @id(map: "PK_ContractCustomizedField")
 864 |   Txt01      String?   @db.NVarChar(Max)
 865 |   Txt02      String?   @db.NVarChar(Max)
 866 |   Txt03      String?   @db.NVarChar(Max)
 867 |   Txt04      String?   @db.NVarChar(Max)
 868 |   Txt05      String?   @db.NVarChar(Max)
 869 |   Txt06      String?   @db.NVarChar(Max)
 870 |   Txt07      String?   @db.NVarChar(Max)
 871 |   Txt08      String?   @db.NVarChar(Max)
 872 |   Txt09      String?   @db.NVarChar(Max)
 873 |   Txt10      String?   @db.NVarChar(Max)
 874 |   Txt11      String?   @db.NVarChar(Max)
 875 |   Txt12      String?   @db.NVarChar(Max)
 876 |   Txt13      String?   @db.NVarChar(Max)
 877 |   Txt14      String?   @db.NVarChar(Max)
 878 |   Txt15      String?   @db.NVarChar(Max)
 879 |   Txt16      String?   @db.NVarChar(Max)
 880 |   Txt17      String?   @db.NVarChar(Max)
 881 |   Txt18      String?   @db.NVarChar(Max)
 882 |   Txt19      String?   @db.NVarChar(Max)
 883 |   Txt20      String?   @db.NVarChar(Max)
 884 |   Memo01     String?   @db.NVarChar(Max)
 885 |   Memo02     String?   @db.NVarChar(Max)
 886 |   Memo03     String?   @db.NVarChar(Max)
 887 |   Memo04     String?   @db.NVarChar(Max)
 888 |   Memo05     String?   @db.NVarChar(Max)
 889 |   Memo06     String?   @db.NVarChar(Max)
 890 |   Memo07     String?   @db.NVarChar(Max)
 891 |   Memo08     String?   @db.NVarChar(Max)
 892 |   Memo09     String?   @db.NVarChar(Max)
 893 |   Memo10     String?   @db.NVarChar(Max)
 894 |   Memo11     String?   @db.NVarChar(Max)
 895 |   Memo12     String?   @db.NVarChar(Max)
 896 |   Memo13     String?   @db.NVarChar(Max)
 897 |   Memo14     String?   @db.NVarChar(Max)
 898 |   Memo15     String?   @db.NVarChar(Max)
 899 |   Memo16     String?   @db.NVarChar(Max)
 900 |   Memo17     String?   @db.NVarChar(Max)
 901 |   Memo18     String?   @db.NVarChar(Max)
 902 |   Memo19     String?   @db.NVarChar(Max)
 903 |   Memo20     String?   @db.NVarChar(Max)
 904 |   CheckBox01 String?   @db.NVarChar(Max)
 905 |   CheckBox02 String?   @db.NVarChar(Max)
 906 |   CheckBox03 String?   @db.NVarChar(Max)
 907 |   CheckBox04 String?   @db.NVarChar(Max)
 908 |   CheckBox05 String?   @db.NVarChar(Max)
 909 |   CheckBox06 String?   @db.NVarChar(Max)
 910 |   CheckBox07 String?   @db.NVarChar(Max)
 911 |   CheckBox08 String?   @db.NVarChar(Max)
 912 |   CheckBox09 String?   @db.NVarChar(Max)
 913 |   CheckBox10 String?   @db.NVarChar(Max)
 914 |   CheckBox11 String?   @db.NVarChar(Max)
 915 |   CheckBox12 String?   @db.NVarChar(Max)
 916 |   CheckBox13 String?   @db.NVarChar(Max)
 917 |   CheckBox14 String?   @db.NVarChar(Max)
 918 |   CheckBox15 String?   @db.NVarChar(Max)
 919 |   CheckBox16 String?   @db.NVarChar(Max)
 920 |   CheckBox17 String?   @db.NVarChar(Max)
 921 |   CheckBox18 String?   @db.NVarChar(Max)
 922 |   CheckBox19 String?   @db.NVarChar(Max)
 923 |   CheckBox20 String?   @db.NVarChar(Max)
 924 |   Select01   String?   @db.NVarChar(Max)
 925 |   Select02   String?   @db.NVarChar(Max)
 926 |   Select03   String?   @db.NVarChar(Max)
 927 |   Select04   String?   @db.NVarChar(Max)
 928 |   Select05   String?   @db.NVarChar(Max)
 929 |   Select06   String?   @db.NVarChar(Max)
 930 |   Select07   String?   @db.NVarChar(Max)
 931 |   Select08   String?   @db.NVarChar(Max)
 932 |   Select09   String?   @db.NVarChar(Max)
 933 |   Select10   String?   @db.NVarChar(Max)
 934 |   Select11   String?   @db.NVarChar(Max)
 935 |   Select12   String?   @db.NVarChar(Max)
 936 |   Select13   String?   @db.NVarChar(Max)
 937 |   Select14   String?   @db.NVarChar(Max)
 938 |   Select15   String?   @db.NVarChar(Max)
 939 |   Select16   String?   @db.NVarChar(Max)
 940 |   Select17   String?   @db.NVarChar(Max)
 941 |   Select18   String?   @db.NVarChar(Max)
 942 |   Select19   String?   @db.NVarChar(Max)
 943 |   Select20   String?   @db.NVarChar(Max)
 944 |   Int01      Int?
 945 |   Int02      Int?
 946 |   Int03      Int?
 947 |   Int04      Int?
 948 |   Int05      Int?
 949 |   Int06      Int?
 950 |   Int07      Int?
 951 |   Int08      Int?
 952 |   Int09      Int?
 953 |   Int10      Int?
 954 |   Int11      Int?
 955 |   Int12      Int?
 956 |   Int13      Int?
 957 |   Int14      Int?
 958 |   Int15      Int?
 959 |   Int16      Int?
 960 |   Int17      Int?
 961 |   Int18      Int?
 962 |   Int19      Int?
 963 |   Int20      Int?
 964 |   Double01   Decimal?  @db.Decimal(18, 8)
 965 |   Double02   Decimal?  @db.Decimal(18, 8)
 966 |   Double03   Decimal?  @db.Decimal(18, 8)
 967 |   Double04   Decimal?  @db.Decimal(18, 8)
 968 |   Double05   Decimal?  @db.Decimal(18, 8)
 969 |   Double06   Decimal?  @db.Decimal(18, 8)
 970 |   Double07   Decimal?  @db.Decimal(18, 8)
 971 |   Double08   Decimal?  @db.Decimal(18, 8)
 972 |   Double09   Decimal?  @db.Decimal(18, 8)
 973 |   Double10   Decimal?  @db.Decimal(18, 8)
 974 |   Double11   Decimal?  @db.Decimal(18, 8)
 975 |   Double12   Decimal?  @db.Decimal(18, 8)
 976 |   Double13   Decimal?  @db.Decimal(18, 8)
 977 |   Double14   Decimal?  @db.Decimal(18, 8)
 978 |   Double15   Decimal?  @db.Decimal(18, 8)
 979 |   Double16   Decimal?  @db.Decimal(18, 8)
 980 |   Double17   Decimal?  @db.Decimal(18, 8)
 981 |   Double18   Decimal?  @db.Decimal(18, 8)
 982 |   Double19   Decimal?  @db.Decimal(18, 8)
 983 |   Double20   Decimal?  @db.Decimal(18, 8)
 984 |   Date01     DateTime? @db.DateTime
 985 |   Date02     DateTime? @db.DateTime
 986 |   Date03     DateTime? @db.DateTime
 987 |   Date04     DateTime? @db.DateTime
 988 |   Date05     DateTime? @db.DateTime
 989 |   Date06     DateTime? @db.DateTime
 990 |   Date07     DateTime? @db.DateTime
 991 |   Date08     DateTime? @db.DateTime
 992 |   Date09     DateTime? @db.DateTime
 993 |   Date10     DateTime? @db.DateTime
 994 |   Radio01    String?   @db.NVarChar(450)
 995 |   Radio02    String?   @db.NVarChar(450)
 996 |   Radio03    String?   @db.NVarChar(450)
 997 |   Radio04    String?   @db.NVarChar(450)
 998 |   Radio05    String?   @db.NVarChar(450)
 999 |   Radio06    String?   @db.NVarChar(450)
1000 |   Radio07    String?   @db.NVarChar(450)
1001 |   Radio08    String?   @db.NVarChar(450)
1002 |   Radio09    String?   @db.NVarChar(450)
1003 |   Radio10    String?   @db.NVarChar(450)
1004 |   Txt21      String?   @db.NVarChar(Max)
1005 |   Txt22      String?   @db.NVarChar(Max)
1006 |   Txt23      String?   @db.NVarChar(Max)
1007 |   Txt24      String?   @db.NVarChar(Max)
1008 |   Txt25      String?   @db.NVarChar(Max)
1009 |   Txt26      String?   @db.NVarChar(Max)
1010 |   Txt27      String?   @db.NVarChar(Max)
1011 |   Txt28      String?   @db.NVarChar(Max)
1012 |   Txt29      String?   @db.NVarChar(Max)
1013 |   Txt30      String?   @db.NVarChar(Max)
1014 |   Txt31      String?   @db.NVarChar(450)
1015 |   Txt32      String?   @db.NVarChar(450)
1016 |   Txt33      String?   @db.NVarChar(450)
1017 |   Txt34      String?   @db.NVarChar(450)
1018 |   Txt35      String?   @db.NVarChar(450)
1019 |   Contract   Contract  @relation(fields: [ContractId], references: [ContractID], onDelete: Cascade, onUpdate: NoAction, map: "FK_ContractCustomizedField_Contract")
1020 | 
1021 |   @@index([Date01], map: "IX_ContractCustomizedField_Date01")
1022 |   @@index([Date02], map: "IX_ContractCustomizedField_Date02")
1023 |   @@index([Date03], map: "IX_ContractCustomizedField_Date03")
1024 |   @@index([Date04], map: "IX_ContractCustomizedField_Date04")
1025 |   @@index([Date05], map: "IX_ContractCustomizedField_Date05")
1026 |   @@index([Date06], map: "IX_ContractCustomizedField_Date06")
1027 |   @@index([Date07], map: "IX_ContractCustomizedField_Date07")
1028 |   @@index([Date08], map: "IX_ContractCustomizedField_Date08")
1029 |   @@index([Date09], map: "IX_ContractCustomizedField_Date09")
1030 |   @@index([Date10], map: "IX_ContractCustomizedField_Date10")
1031 |   @@index([Double01], map: "IX_ContractCustomizedField_Double01")
1032 |   @@index([Double02], map: "IX_ContractCustomizedField_Double02")
1033 |   @@index([Double03], map: "IX_ContractCustomizedField_Double03")
1034 |   @@index([Double04], map: "IX_ContractCustomizedField_Double04")
1035 |   @@index([Double05], map: "IX_ContractCustomizedField_Double05")
1036 |   @@index([Double06], map: "IX_ContractCustomizedField_Double06")
1037 |   @@index([Double07], map: "IX_ContractCustomizedField_Double07")
1038 |   @@index([Double08], map: "IX_ContractCustomizedField_Double08")
1039 |   @@index([Double09], map: "IX_ContractCustomizedField_Double09")
1040 |   @@index([Double10], map: "IX_ContractCustomizedField_Double10")
1041 |   @@index([Double11], map: "IX_ContractCustomizedField_Double11")
1042 |   @@index([Double12], map: "IX_ContractCustomizedField_Double12")
1043 |   @@index([Double13], map: "IX_ContractCustomizedField_Double13")
1044 |   @@index([Double14], map: "IX_ContractCustomizedField_Double14")
1045 |   @@index([Double15], map: "IX_ContractCustomizedField_Double15")
1046 |   @@index([Double16], map: "IX_ContractCustomizedField_Double16")
1047 |   @@index([Double17], map: "IX_ContractCustomizedField_Double17")
1048 |   @@index([Double18], map: "IX_ContractCustomizedField_Double18")
1049 |   @@index([Double19], map: "IX_ContractCustomizedField_Double19")
1050 |   @@index([Double20], map: "IX_ContractCustomizedField_Double20")
1051 |   @@index([Int01], map: "IX_ContractCustomizedField_Int01")
1052 |   @@index([Int02], map: "IX_ContractCustomizedField_Int02")
1053 |   @@index([Int03], map: "IX_ContractCustomizedField_Int03")
1054 |   @@index([Int04], map: "IX_ContractCustomizedField_Int04")
1055 |   @@index([Int05], map: "IX_ContractCustomizedField_Int05")
1056 |   @@index([Int06], map: "IX_ContractCustomizedField_Int06")
1057 |   @@index([Int07], map: "IX_ContractCustomizedField_Int07")
1058 |   @@index([Int08], map: "IX_ContractCustomizedField_Int08")
1059 |   @@index([Int09], map: "IX_ContractCustomizedField_Int09")
1060 |   @@index([Int10], map: "IX_ContractCustomizedField_Int10")
1061 |   @@index([Int11], map: "IX_ContractCustomizedField_Int11")
1062 |   @@index([Int12], map: "IX_ContractCustomizedField_Int12")
1063 |   @@index([Int13], map: "IX_ContractCustomizedField_Int13")
1064 |   @@index([Int14], map: "IX_ContractCustomizedField_Int14")
1065 |   @@index([Int15], map: "IX_ContractCustomizedField_Int15")
1066 |   @@index([Int16], map: "IX_ContractCustomizedField_Int16")
1067 |   @@index([Int17], map: "IX_ContractCustomizedField_Int17")
1068 |   @@index([Int18], map: "IX_ContractCustomizedField_Int18")
1069 |   @@index([Int19], map: "IX_ContractCustomizedField_Int19")
1070 |   @@index([Int20], map: "IX_ContractCustomizedField_Int20")
1071 |   @@index([Radio01], map: "IX_ContractCustomizedField_Radio01")
1072 |   @@index([Radio02], map: "IX_ContractCustomizedField_Radio02")
1073 |   @@index([Radio03], map: "IX_ContractCustomizedField_Radio03")
1074 |   @@index([Radio04], map: "IX_ContractCustomizedField_Radio04")
1075 |   @@index([Radio05], map: "IX_ContractCustomizedField_Radio05")
1076 |   @@index([Radio06], map: "IX_ContractCustomizedField_Radio06")
1077 |   @@index([Radio07], map: "IX_ContractCustomizedField_Radio07")
1078 |   @@index([Radio08], map: "IX_ContractCustomizedField_Radio08")
1079 |   @@index([Radio09], map: "IX_ContractCustomizedField_Radio09")
1080 |   @@index([Radio10], map: "IX_ContractCustomizedField_Radio10")
1081 |   @@index([Txt31], map: "IX_ContractCustomizedField_Txt31")
1082 |   @@index([Txt32], map: "IX_ContractCustomizedField_Txt32")
1083 |   @@index([Txt33], map: "IX_ContractCustomizedField_Txt33")
1084 |   @@index([Txt34], map: "IX_ContractCustomizedField_Txt34")
1085 |   @@index([Txt35], map: "IX_ContractCustomizedField_Txt35")
1086 |   @@schema("join")
1087 | }
1088 | 
1089 | model ContractCustomizedFieldForSearch {
1090 |   ContractId                             Int                               @id(map: "PK_ContractCustomizedFieldViewTemp")
1091 |   Txt01                                  String?                           @db.NVarChar(450)
1092 |   Txt02                                  String?                           @db.NVarChar(450)
1093 |   Txt03                                  String?                           @db.NVarChar(450)
1094 |   Txt04                                  String?                           @db.NVarChar(450)
1095 |   Txt05                                  String?                           @db.NVarChar(450)
1096 |   Txt06                                  String?                           @db.NVarChar(450)
1097 |   Txt07                                  String?                           @db.NVarChar(450)
1098 |   Txt08                                  String?                           @db.NVarChar(450)
1099 |   Txt09                                  String?                           @db.NVarChar(450)
1100 |   Txt10                                  String?                           @db.NVarChar(450)
1101 |   Txt11                                  String?                           @db.NVarChar(450)
1102 |   Txt12                                  String?                           @db.NVarChar(450)
1103 |   Txt13                                  String?                           @db.NVarChar(450)
1104 |   Txt14                                  String?                           @db.NVarChar(450)
1105 |   Txt15                                  String?                           @db.NVarChar(450)
1106 |   Txt16                                  String?                           @db.NVarChar(450)
1107 |   Txt17                                  String?                           @db.NVarChar(450)
1108 |   Txt18                                  String?                           @db.NVarChar(450)
1109 |   Txt19                                  String?                           @db.NVarChar(450)
1110 |   Txt20                                  String?                           @db.NVarChar(450)
1111 |   Memo01                                 String?                           @db.NVarChar(Max)
1112 |   Memo02                                 String?                           @db.NVarChar(Max)
1113 |   Memo03                                 String?                           @db.NVarChar(Max)
1114 |   Memo04                                 String?                           @db.NVarChar(Max)
1115 |   Memo05                                 String?                           @db.NVarChar(Max)
1116 |   Memo06                                 String?                           @db.NVarChar(Max)
1117 |   Memo07                                 String?                           @db.NVarChar(Max)
1118 |   Memo08                                 String?                           @db.NVarChar(Max)
1119 |   Memo09                                 String?                           @db.NVarChar(Max)
1120 |   Memo10                                 String?                           @db.NVarChar(Max)
1121 |   Memo11                                 String?                           @db.NVarChar(Max)
1122 |   Memo12                                 String?                           @db.NVarChar(Max)
1123 |   Memo13                                 String?                           @db.NVarChar(Max)
1124 |   Memo14                                 String?                           @db.NVarChar(Max)
1125 |   Memo15                                 String?                           @db.NVarChar(Max)
1126 |   Memo16                                 String?                           @db.NVarChar(Max)
1127 |   Memo17                                 String?                           @db.NVarChar(Max)
1128 |   Memo18                                 String?                           @db.NVarChar(Max)
1129 |   Memo19                                 String?                           @db.NVarChar(Max)
1130 |   Memo20                                 String?                           @db.NVarChar(Max)
1131 |   CheckBox01                             String?                           @db.NVarChar(Max)
1132 |   CheckBox02                             String?                           @db.NVarChar(Max)
1133 |   CheckBox03                             String?                           @db.NVarChar(Max)
1134 |   CheckBox04                             String?                           @db.NVarChar(Max)
1135 |   CheckBox05                             String?                           @db.NVarChar(Max)
1136 |   CheckBox06                             String?                           @db.NVarChar(Max)
1137 |   CheckBox07                             String?                           @db.NVarChar(Max)
1138 |   CheckBox08                             String?                           @db.NVarChar(Max)
1139 |   CheckBox09                             String?                           @db.NVarChar(Max)
1140 |   CheckBox10                             String?                           @db.NVarChar(Max)
1141 |   CheckBox11                             String?                           @db.NVarChar(Max)
1142 |   CheckBox12                             String?                           @db.NVarChar(Max)
1143 |   CheckBox13                             String?                           @db.NVarChar(Max)
1144 |   CheckBox14                             String?                           @db.NVarChar(Max)
1145 |   CheckBox15                             String?                           @db.NVarChar(Max)
1146 |   CheckBox16                             String?                           @db.NVarChar(Max)
1147 |   CheckBox17                             String?                           @db.NVarChar(Max)
1148 |   CheckBox18                             String?                           @db.NVarChar(Max)
1149 |   CheckBox19                             String?                           @db.NVarChar(Max)
1150 |   CheckBox20                             String?                           @db.NVarChar(Max)
1151 |   Select01                               String?                           @db.NVarChar(Max)
1152 |   Select02                               String?                           @db.NVarChar(Max)
1153 |   Select03                               String?                           @db.NVarChar(Max)
1154 |   Select04                               String?                           @db.NVarChar(Max)
1155 |   Select05                               String?                           @db.NVarChar(Max)
1156 |   Select06                               String?                           @db.NVarChar(Max)
1157 |   Select07                               String?                           @db.NVarChar(Max)
1158 |   Select08                               String?                           @db.NVarChar(Max)
1159 |   Select09                               String?                           @db.NVarChar(Max)
1160 |   Select10                               String?                           @db.NVarChar(Max)
1161 |   Select11                               String?                           @db.NVarChar(Max)
1162 |   Select12                               String?                           @db.NVarChar(Max)
1163 |   Select13                               String?                           @db.NVarChar(Max)
1164 |   Select14                               String?                           @db.NVarChar(Max)
1165 |   Select15                               String?                           @db.NVarChar(Max)
1166 |   Select16                               String?                           @db.NVarChar(Max)
1167 |   Select17                               String?                           @db.NVarChar(Max)
1168 |   Select18                               String?                           @db.NVarChar(Max)
1169 |   Select19                               String?                           @db.NVarChar(Max)
1170 |   Select20                               String?                           @db.NVarChar(Max)
1171 |   Int01                                  Int?
1172 |   Int02                                  Int?
1173 |   Int03                                  Int?
1174 |   Int04                                  Int?
1175 |   Int05                                  Int?
1176 |   Int06                                  Int?
1177 |   Int07                                  Int?
1178 |   Int08                                  Int?
1179 |   Int09                                  Int?
1180 |   Int10                                  Int?
1181 |   Int11                                  Int?
1182 |   Int12                                  Int?
1183 |   Int13                                  Int?
1184 |   Int14                                  Int?
1185 |   Int15                                  Int?
1186 |   Int16                                  Int?
1187 |   Int17                                  Int?
1188 |   Int18                                  Int?
1189 |   Int19                                  Int?
1190 |   Int20                                  Int?
1191 |   Double01                               Decimal?                          @db.Decimal(18, 8)
1192 |   Double02                               Decimal?                          @db.Decimal(18, 8)
1193 |   Double03                               Decimal?                          @db.Decimal(18, 8)
1194 |   Double04                               Decimal?                          @db.Decimal(18, 8)
1195 |   Double05                               Decimal?                          @db.Decimal(18, 8)
1196 |   Double06                               Decimal?                          @db.Decimal(18, 8)
1197 |   Double07                               Decimal?                          @db.Decimal(18, 8)
1198 |   Double08                               Decimal?                          @db.Decimal(18, 8)
1199 |   Double09                               Decimal?                          @db.Decimal(18, 8)
1200 |   Double10                               Decimal?                          @db.Decimal(18, 8)
1201 |   Double11                               Decimal?                          @db.Decimal(18, 8)
1202 |   Double12                               Decimal?                          @db.Decimal(18, 8)
1203 |   Double13                               Decimal?                          @db.Decimal(18, 8)
1204 |   Double14                               Decimal?                          @db.Decimal(18, 8)
1205 |   Double15                               Decimal?                          @db.Decimal(18, 8)
1206 |   Double16                               Decimal?                          @db.Decimal(18, 8)
1207 |   Double17                               Decimal?                          @db.Decimal(18, 8)
1208 |   Double18                               Decimal?                          @db.Decimal(18, 8)
1209 |   Double19                               Decimal?                          @db.Decimal(18, 8)
1210 |   Double20                               Decimal?                          @db.Decimal(18, 8)
1211 |   Date01                                 DateTime?                         @db.DateTime
1212 |   Date02                                 DateTime?                         @db.DateTime
1213 |   Date03                                 DateTime?                         @db.DateTime
1214 |   Date04                                 DateTime?                         @db.DateTime
1215 |   Date05                                 DateTime?                         @db.DateTime
1216 |   Date06                                 DateTime?                         @db.DateTime
1217 |   Date07                                 DateTime?                         @db.DateTime
1218 |   Date08                                 DateTime?                         @db.DateTime
1219 |   Date09                                 DateTime?                         @db.DateTime
1220 |   Date10                                 DateTime?                         @db.DateTime
1221 |   Radio01                                String?                           @db.NVarChar(450)
1222 |   Radio02                                String?                           @db.NVarChar(450)
1223 |   Radio03                                String?                           @db.NVarChar(450)
1224 |   Radio04                                String?                           @db.NVarChar(450)
1225 |   Radio05                                String?                           @db.NVarChar(450)
1226 |   Radio06                                String?                           @db.NVarChar(450)
1227 |   Radio07                                String?                           @db.NVarChar(450)
1228 |   Radio08                                String?                           @db.NVarChar(450)
1229 |   Radio09                                String?                           @db.NVarChar(450)
1230 |   Radio10                                String?                           @db.NVarChar(450)
1231 |   Txt21                                  String?                           @db.NVarChar(450)
1232 |   Txt22                                  String?                           @db.NVarChar(450)
1233 |   Txt23                                  String?                           @db.NVarChar(450)
1234 |   Txt24                                  String?                           @db.NVarChar(450)
1235 |   Txt25                                  String?                           @db.NVarChar(450)
1236 |   Txt26                                  String?                           @db.NVarChar(450)
1237 |   Txt27                                  String?                           @db.NVarChar(450)
1238 |   Txt28                                  String?                           @db.NVarChar(450)
1239 |   Txt29                                  String?                           @db.NVarChar(450)
1240 |   Txt30                                  String?                           @db.NVarChar(450)
1241 |   Txt31                                  String?                           @db.NVarChar(450)
1242 |   Txt32                                  String?                           @db.NVarChar(450)
1243 |   Txt33                                  String?                           @db.NVarChar(450)
1244 |   Txt34                                  String?                           @db.NVarChar(450)
1245 |   Txt35                                  String?                           @db.NVarChar(450)
1246 |   ContractCustomizedFieldForSearch       ContractCustomizedFieldForSearch  @relation("ContractCustomizedFieldForSearchToContractCustomizedFieldForSearch", fields: [ContractId], references: [ContractId], onUpdate: NoAction, map: "FK_ContractCustomizedFieldViewTemp_ContractCustomizedField")
1247 |   other_ContractCustomizedFieldForSearch ContractCustomizedFieldForSearch? @relation("ContractCustomizedFieldForSearchToContractCustomizedFieldForSearch")
1248 | 
1249 |   @@index([Date01], map: "IX_ContractCustomizedFieldForSearch_Date01")
1250 |   @@index([Date02], map: "IX_ContractCustomizedFieldForSearch_Date02")
1251 |   @@index([Date03], map: "IX_ContractCustomizedFieldForSearch_Date03")
1252 |   @@index([Date04], map: "IX_ContractCustomizedFieldForSearch_Date04")
1253 |   @@index([Date05], map: "IX_ContractCustomizedFieldForSearch_Date05")
1254 |   @@index([Date06], map: "IX_ContractCustomizedFieldForSearch_Date06")
1255 |   @@index([Date07], map: "IX_ContractCustomizedFieldForSearch_Date07")
1256 |   @@index([Date08], map: "IX_ContractCustomizedFieldForSearch_Date08")
1257 |   @@index([Date09], map: "IX_ContractCustomizedFieldForSearch_Date09")
1258 |   @@index([Date10], map: "IX_ContractCustomizedFieldForSearch_Date10")
1259 |   @@index([Double01], map: "IX_ContractCustomizedFieldForSearch_Double01")
1260 |   @@index([Double02], map: "IX_ContractCustomizedFieldForSearch_Double02")
1261 |   @@index([Double03], map: "IX_ContractCustomizedFieldForSearch_Double03")
1262 |   @@index([Double04], map: "IX_ContractCustomizedFieldForSearch_Double04")
1263 |   @@index([Double05], map: "IX_ContractCustomizedFieldForSearch_Double05")
1264 |   @@index([Double06], map: "IX_ContractCustomizedFieldForSearch_Double06")
1265 |   @@index([Double07], map: "IX_ContractCustomizedFieldForSearch_Double07")
1266 |   @@index([Double08], map: "IX_ContractCustomizedFieldForSearch_Double08")
1267 |   @@index([Double09], map: "IX_ContractCustomizedFieldForSearch_Double09")
1268 |   @@index([Double10], map: "IX_ContractCustomizedFieldForSearch_Double10")
1269 |   @@index([Double11], map: "IX_ContractCustomizedFieldForSearch_Double11")
1270 |   @@index([Double12], map: "IX_ContractCustomizedFieldForSearch_Double12")
1271 |   @@index([Double13], map: "IX_ContractCustomizedFieldForSearch_Double13")
1272 |   @@index([Double14], map: "IX_ContractCustomizedFieldForSearch_Double14")
1273 |   @@index([Double15], map: "IX_ContractCustomizedFieldForSearch_Double15")
1274 |   @@index([Double16], map: "IX_ContractCustomizedFieldForSearch_Double16")
1275 |   @@index([Double17], map: "IX_ContractCustomizedFieldForSearch_Double17")
1276 |   @@index([Double18], map: "IX_ContractCustomizedFieldForSearch_Double18")
1277 |   @@index([Double19], map: "IX_ContractCustomizedFieldForSearch_Double19")
1278 |   @@index([Double20], map: "IX_ContractCustomizedFieldForSearch_Double20")
1279 |   @@index([Int01], map: "IX_ContractCustomizedFieldForSearch_Int01")
1280 |   @@index([Int02], map: "IX_ContractCustomizedFieldForSearch_Int02")
1281 |   @@index([Int03], map: "IX_ContractCustomizedFieldForSearch_Int03")
1282 |   @@index([Int04], map: "IX_ContractCustomizedFieldForSearch_Int04")
1283 |   @@index([Int05], map: "IX_ContractCustomizedFieldForSearch_Int05")
1284 |   @@index([Int06], map: "IX_ContractCustomizedFieldForSearch_Int06")
1285 |   @@index([Int07], map: "IX_ContractCustomizedFieldForSearch_Int07")
1286 |   @@index([Int08], map: "IX_ContractCustomizedFieldForSearch_Int08")
1287 |   @@index([Int09], map: "IX_ContractCustomizedFieldForSearch_Int09")
1288 |   @@index([Int10], map: "IX_ContractCustomizedFieldForSearch_Int10")
1289 |   @@index([Int11], map: "IX_ContractCustomizedFieldForSearch_Int11")
1290 |   @@index([Int12], map: "IX_ContractCustomizedFieldForSearch_Int12")
1291 |   @@index([Int13], map: "IX_ContractCustomizedFieldForSearch_Int13")
1292 |   @@index([Int14], map: "IX_ContractCustomizedFieldForSearch_Int14")
1293 |   @@index([Int15], map: "IX_ContractCustomizedFieldForSearch_Int15")
1294 |   @@index([Int16], map: "IX_ContractCustomizedFieldForSearch_Int16")
1295 |   @@index([Int17], map: "IX_ContractCustomizedFieldForSearch_Int17")
1296 |   @@index([Int18], map: "IX_ContractCustomizedFieldForSearch_Int18")
1297 |   @@index([Int19], map: "IX_ContractCustomizedFieldForSearch_Int19")
1298 |   @@index([Int20], map: "IX_ContractCustomizedFieldForSearch_Int20")
1299 |   @@index([Radio01], map: "IX_ContractCustomizedFieldForSearch_Radio01")
1300 |   @@index([Radio02], map: "IX_ContractCustomizedFieldForSearch_Radio02")
1301 |   @@index([Radio03], map: "IX_ContractCustomizedFieldForSearch_Radio03")
1302 |   @@index([Radio04], map: "IX_ContractCustomizedFieldForSearch_Radio04")
1303 |   @@index([Radio05], map: "IX_ContractCustomizedFieldForSearch_Radio05")
1304 |   @@index([Radio06], map: "IX_ContractCustomizedFieldForSearch_Radio06")
1305 |   @@index([Radio07], map: "IX_ContractCustomizedFieldForSearch_Radio07")
1306 |   @@index([Radio08], map: "IX_ContractCustomizedFieldForSearch_Radio08")
1307 |   @@index([Radio09], map: "IX_ContractCustomizedFieldForSearch_Radio09")
1308 |   @@index([Radio10], map: "IX_ContractCustomizedFieldForSearch_Radio10")
1309 |   @@index([Txt01], map: "IX_ContractCustomizedFieldForSearch_Txt01")
1310 |   @@index([Txt02], map: "IX_ContractCustomizedFieldForSearch_Txt02")
1311 |   @@index([Txt03], map: "IX_ContractCustomizedFieldForSearch_Txt03")
1312 |   @@index([Txt04], map: "IX_ContractCustomizedFieldForSearch_Txt04")
1313 |   @@index([Txt05], map: "IX_ContractCustomizedFieldForSearch_Txt05")
1314 |   @@index([Txt06], map: "IX_ContractCustomizedFieldForSearch_Txt06")
1315 |   @@index([Txt07], map: "IX_ContractCustomizedFieldForSearch_Txt07")
1316 |   @@index([Txt08], map: "IX_ContractCustomizedFieldForSearch_Txt08")
1317 |   @@index([Txt09], map: "IX_ContractCustomizedFieldForSearch_Txt09")
1318 |   @@index([Txt10], map: "IX_ContractCustomizedFieldForSearch_Txt10")
1319 |   @@index([Txt11], map: "IX_ContractCustomizedFieldForSearch_Txt11")
1320 |   @@index([Txt12], map: "IX_ContractCustomizedFieldForSearch_Txt12")
1321 |   @@index([Txt13], map: "IX_ContractCustomizedFieldForSearch_Txt13")
1322 |   @@index([Txt14], map: "IX_ContractCustomizedFieldForSearch_Txt14")
1323 |   @@index([Txt15], map: "IX_ContractCustomizedFieldForSearch_Txt15")
1324 |   @@index([Txt16], map: "IX_ContractCustomizedFieldForSearch_Txt16")
1325 |   @@index([Txt17], map: "IX_ContractCustomizedFieldForSearch_Txt17")
1326 |   @@index([Txt18], map: "IX_ContractCustomizedFieldForSearch_Txt18")
1327 |   @@index([Txt19], map: "IX_ContractCustomizedFieldForSearch_Txt19")
1328 |   @@index([Txt20], map: "IX_ContractCustomizedFieldForSearch_Txt20")
1329 |   @@index([Txt21], map: "IX_ContractCustomizedFieldForSearch_Txt21")
1330 |   @@index([Txt23], map: "IX_ContractCustomizedFieldForSearch_Txt22")
1331 |   @@index([Txt23], map: "IX_ContractCustomizedFieldForSearch_Txt23")
1332 |   @@index([Txt24], map: "IX_ContractCustomizedFieldForSearch_Txt24")
1333 |   @@index([Txt25], map: "IX_ContractCustomizedFieldForSearch_Txt25")
1334 |   @@index([Txt26], map: "IX_ContractCustomizedFieldForSearch_Txt26")
1335 |   @@index([Txt27], map: "IX_ContractCustomizedFieldForSearch_Txt27")
1336 |   @@index([Txt28], map: "IX_ContractCustomizedFieldForSearch_Txt28")
1337 |   @@index([Txt29], map: "IX_ContractCustomizedFieldForSearch_Txt29")
1338 |   @@index([Txt30], map: "IX_ContractCustomizedFieldForSearch_Txt30")
1339 |   @@index([Txt31], map: "IX_ContractCustomizedFieldForSearch_Txt31")
1340 |   @@index([Txt32], map: "IX_ContractCustomizedFieldForSearch_Txt32")
1341 |   @@index([Txt33], map: "IX_ContractCustomizedFieldForSearch_Txt33")
1342 |   @@index([Txt34], map: "IX_ContractCustomizedFieldForSearch_Txt34")
1343 |   @@index([Txt35], map: "IX_ContractCustomizedFieldForSearch_Txt35")
1344 |   @@schema("join")
1345 | }
1346 | 
1347 | model ContractEnvelopes {
1348 |   sn            Int          @id(map: "PK_ContractEnvelopes") @default(autoincrement())
1349 |   contractId    Int
1350 |   envelopesGuid String       @db.NVarChar(255)
1351 |   Contract      Contract     @relation(fields: [contractId], references: [ContractID], onUpdate: NoAction, map: "FK_ContractEnvelopes_Contract")
1352 |   EnvelopeInfo  EnvelopeInfo @relation(fields: [envelopesGuid], references: [envelopesGuid], onUpdate: NoAction, map: "FK_ContractEnvelopes_EnvelopeInfo")
1353 | 
1354 |   @@schema("dbo")
1355 | }
1356 | 
1357 | model ContractEvent {
1358 |   Sn         Int       @id(map: "PK_Event_1") @default(autoincrement())
1359 |   EventID    Int?
1360 |   ContractID Int?
1361 |   Contract   Contract? @relation(fields: [ContractID], references: [ContractID], onDelete: Cascade, map: "FK_Event_Contract")
1362 |   Event      Event?    @relation(fields: [EventID], references: [EventID], onDelete: Cascade, map: "FK_Event_Event")
1363 | 
1364 |   @@index([ContractID], map: "IX_ContractEvent_ContractID")
1365 |   @@index([EventID], map: "IX_ContractEvent_EventID")
1366 |   @@schema("join")
1367 | }
1368 | 
1369 | model ContractExaminer {
1370 |   Sn                  Int                   @id(map: "PK_ContractExaminer") @default(autoincrement())
1371 |   ContractID          Int
1372 |   ExamStageID         Int
1373 |   ExamStatusID        Int
1374 |   UserID              Int?
1375 |   ExamMemo            String?               @db.NVarChar(Max)
1376 |   AssignDate          DateTime?             @default(now(), map: "DF_ContractExaminer_AssignDate") @db.DateTime
1377 |   ExamDate            DateTime?             @default(now(), map: "DF_ContractExaminer_ExamDate") @db.DateTime
1378 |   ReAssign            Boolean?              @default(false, map: "DF_ContractExaminer_ReExam")
1379 |   Type                Int?                  @default(0, map: "DF_ContractExaminer_SignStage")
1380 |   SignType            Int?
1381 |   Signer              String?               @db.NVarChar(125)
1382 |   StayDate            DateTime?             @db.DateTime
1383 |   CompleteHours       Decimal?              @db.Decimal(10, 2)
1384 |   NoticeOthers        String?               @db.NVarChar(Max)
1385 |   ExamSeq             Int                   @default(1, map: "DF_ContractExaminer_ExamSeq")
1386 |   ExamStageSeq        Int?
1387 |   Contract            Contract              @relation(fields: [ContractID], references: [ContractID], onDelete: Cascade, map: "FK_ContractExaminer_Contract")
1388 |   ExamStage           ExamStage             @relation(fields: [ExamStageID], references: [ExamStageID], onDelete: Cascade, map: "FK_ContractExaminer_ExamStage")
1389 |   ExamStatus          ExamStatus            @relation(fields: [ExamStatusID], references: [ExamStatusID], onUpdate: NoAction, map: "FK_ContractExaminer_ExamStatus")
1390 |   User                User?                 @relation(fields: [UserID], references: [UserID], onDelete: Cascade, map: "FK_ContractExaminer_User")
1391 |   OtherExaminer       OtherExaminer[]
1392 |   OtherExaminerConfig OtherExaminerConfig[]
1393 | 
1394 |   @@index([Sn], map: "IX_ContractExaminer")
1395 |   @@index([AssignDate], map: "IX_ContractExaminer_AssignDate")
1396 |   @@index([CompleteHours], map: "IX_ContractExaminer_CompleteHours")
1397 |   @@index([ContractID], map: "IX_ContractExaminer_ContractID")
1398 |   @@index([ExamDate], map: "IX_ContractExaminer_ExamDate")
1399 |   @@index([ExamSeq], map: "IX_ContractExaminer_ExamSeq")
1400 |   @@index([ExamStageID], map: "IX_ContractExaminer_ExamStageID")
1401 |   @@index([ExamStageSeq], map: "IX_ContractExaminer_ExamStageSeq")
1402 |   @@index([ExamStatusID], map: "IX_ContractExaminer_ExamStatusID")
1403 |   @@index([ReAssign], map: "IX_ContractExaminer_ReAssign")
1404 |   @@index([Signer], map: "IX_ContractExaminer_Signer")
1405 |   @@index([SignType], map: "IX_ContractExaminer_SignType")
1406 |   @@index([Sn], map: "IX_ContractExaminer_Sn")
1407 |   @@index([StayDate], map: "IX_ContractExaminer_StayDate")
1408 |   @@index([Type], map: "IX_ContractExaminer_Type")
1409 |   @@index([UserID], map: "IX_ContractExaminer_UserID")
1410 |   @@schema("data")
1411 | }
1412 | 
1413 | model ContractExamStageInfo {
1414 |   ContractID                      Int      @id(map: "PK__Contract__C90D3409525B4127")
1415 |   AttributionRights               Int?
1416 |   AttributionRightsText           String?  @db.NVarChar(Max)
1417 |   ConfidentialityRequirements     Int?
1418 |   ConfidentialityRequirementsText String?  @db.NVarChar(Max)
1419 |   NoInfringementGuarantee         Int?
1420 |   NoInfringementGuaranteeText     String?  @db.NVarChar(Max)
1421 |   InfringementInvestigation       Int?
1422 |   InfringementInvestigationText   String?  @db.NVarChar(Max)
1423 |   Contract                        Contract @relation(fields: [ContractID], references: [ContractID], onDelete: Cascade, onUpdate: NoAction, map: "FK_ContractExamStageInfo_ContractID")
1424 | 
1425 |   @@index([AttributionRights], map: "IX_ContractExamStageInfo_AttributionRights")
1426 |   @@index([ConfidentialityRequirements], map: "IX_ContractExamStageInfo_ConfidentialityRequirements")
1427 |   @@index([InfringementInvestigation], map: "IX_ContractExamStageInfo_InfringementInvestigation")
1428 |   @@index([NoInfringementGuarantee], map: "IX_ContractExamStageInfo_NoInfringementGuarantee")
1429 |   @@schema("join")
1430 | }
1431 | 
1432 | model ContractExtendInfo {
1433 |   ContractID             Int                @id(map: "PK_ContractExtendInfo")
1434 |   ContractAccessTypeSN   Int
1435 |   ContractAccessTypeMemo String?            @db.NVarChar(Max)
1436 |   AccessStartDate        DateTime           @db.DateTime
1437 |   AccessEndDate          DateTime?          @db.DateTime
1438 |   ContractAccessDescript String?            @db.NVarChar(Max)
1439 |   ContractAccessReason   String?            @db.NVarChar(Max)
1440 |   SearchStartDate        DateTime?          @db.DateTime
1441 |   SearchEndDate          DateTime?          @db.DateTime
1442 |   Recede                 Boolean?
1443 |   Contract               Contract           @relation(fields: [ContractID], references: [ContractID], onDelete: Cascade, onUpdate: NoAction, map: "FK_ContractExtendInfo_Contract")
1444 |   ContractAccessType     ContractAccessType @relation(fields: [ContractAccessTypeSN], references: [SN], onUpdate: NoAction, map: "FK_ContractExtendInfo_ContractAccessType")
1445 | 
1446 |   @@index([AccessEndDate], map: "IX_ContractExtendInfo_AccessEndDate")
1447 |   @@index([AccessStartDate], map: "IX_ContractExtendInfo_AccessStartDate")
1448 |   @@index([ContractAccessTypeSN], map: "IX_ContractExtendInfo_ContractAccessTypeSN")
1449 |   @@index([SearchEndDate], map: "IX_ContractExtendInfo_SearchEndDate")
1450 |   @@index([SearchStartDate], map: "IX_ContractExtendInfo_SearchStartDate")
1451 |   @@schema("data")
1452 | }
1453 | 
1454 | model ContractFileTemplate {
1455 |   SN                                      Int                                       @id(map: "PK_ContractFileTemplate") @default(autoincrement())
1456 |   TemplateName                            String                                    @db.NVarChar(Max)
1457 |   ContractFileTemplateTypeSN              Int
1458 |   IsOpen                                  Boolean                                   @default(true, map: "DF_ContractFileTemplate_IsOpen")
1459 |   Remark                                  String?                                   @db.NVarChar(Max)
1460 |   UserID                                  Int
1461 |   CreateDate                              DateTime                                  @default(now(), map: "DF_ContractFileTemplate_CreacteDate") @db.DateTime
1462 |   IsOnlineEditMode                        Boolean                                   @default(false, map: "DF_ContractFileTemplate_IsOnlineEditMode")
1463 |   ContractFileTemplateType                ContractFileTemplateType                  @relation(fields: [ContractFileTemplateTypeSN], references: [SN], onUpdate: NoAction, map: "FK_ContractFileTemplate_ContractFileTemplateType")
1464 |   User                                    User                                      @relation(fields: [UserID], references: [UserID], onUpdate: NoAction, map: "FK_ContractFileTemplate_User")
1465 |   ContractFileTemplateAttachment          ContractFileTemplateAttachment[]
1466 |   ContractFileTemplateDepartmentAuthority ContractFileTemplateDepartmentAuthority[]
1467 |   ContractFileTemplateExtraAttachment     ContractFileTemplateExtraAttachment[]
1468 |   ContractFileTemplateUserAuthority       ContractFileTemplateUserAuthority[]
1469 | 
1470 |   @@index([ContractFileTemplateTypeSN], map: "IX_ContractFileTemplate_ContractFileTemplateTypeSN")
1471 |   @@index([CreateDate], map: "IX_ContractFileTemplate_CreateDate")
1472 |   @@index([UserID], map: "IX_ContractFileTemplate_UserID")
1473 |   @@schema("data")
1474 | }
1475 | 
1476 | model ContractFileTemplateAttachment {
1477 |   SN                     Int                  @id(map: "PK_ContractFileTemplateAttachment") @default(autoincrement())
1478 |   ContractFileTemplateSN Int
1479 |   AttachmentID           Int
1480 |   TemplateConfig         String?              @db.NVarChar(Max)
1481 |   IsFrontEnd             Boolean              @default(false, map: "DF_ContractFileTemplateAttachment_IsEND")
1482 |   Attachment             Attachment           @relation(fields: [AttachmentID], references: [AttachmentID], onUpdate: NoAction, map: "FK_ContractFileTemplateAttachment_Attachment")
1483 |   ContractFileTemplate   ContractFileTemplate @relation(fields: [ContractFileTemplateSN], references: [SN], onDelete: Cascade, onUpdate: NoAction, map: "FK_ContractFileTemplateAttachment_ContractFileTemplate")
1484 | 
1485 |   @@index([AttachmentID], map: "IX_ContractFileTemplateAttachment_AttachmentID")
1486 |   @@index([ContractFileTemplateSN], map: "IX_ContractFileTemplateAttachment_ContractFileTemplateSN")
1487 |   @@schema("join")
1488 | }
1489 | 
1490 | model ContractFileTemplateDepartmentAuthority {
1491 |   SN                     Int                  @id(map: "PK_ContractFileTemplateDepartmentAuthority") @default(autoincrement())
1492 |   ContractFileTemplateSN Int
1493 |   DepartmentID           Int?
1494 |   CreateDate             DateTime             @db.DateTime
1495 |   CreateUserID           Int
1496 |   ContractFileTemplate   ContractFileTemplate @relation(fields: [ContractFileTemplateSN], references: [SN], onDelete: Cascade, map: "FK_ContractFileTemplateDepartmentAuthority_ContractFileTemplateDepartmentAuthority")
1497 |   Department             Department?          @relation(fields: [DepartmentID], references: [DepartmentID], onDelete: NoAction, onUpdate: NoAction, map: "FK_ContractFileTemplateDepartmentAuthority_Department")
1498 | 
1499 |   @@index([ContractFileTemplateSN], map: "IX_ContractFileTemplateDepartmentAuthority_ContractFileTemplateSN")
1500 |   @@index([CreateDate], map: "IX_ContractFileTemplateDepartmentAuthority_CreateDate")
</content>
<notice>Showing only 1500 of 3986 total lines. Use start_line and end_line if you need to read more</notice>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:53:25 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
24,432 (12%)

# Current Cost
$0.10

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
我已經查看了 Prisma schema，這是一個相當複雜的數據庫結構，包含了多個模型，如 User、Contract、ContractExaminer 等，這些都與 PRD 中提到的功能相關。

現在我需要查看一下 Swagger 定義，以了解 API 設計。讓我查看 final-swagger.json 文件：
</thinking>

<read_file>
<path>final-swagger.json</path>
</read_file>

---

**User:**

[read_file for 'final-swagger.json'] Result:
<file><path>final-swagger.json</path>
<content lines="1-1500">
   1 | {
   2 |   "Workspace": null,
   3 |   "Info": {
   4 |     "Title": "My Mock API",
   5 |     "Description": "\u7528\u65BC\u6E2C\u8A66 I/O \u64CD\u4F5C\u7684\u6A21\u64EC API\u3002",
   6 |     "Version": "v1",
   7 |     "TermsOfService": null,
   8 |     "Contact": null,
   9 |     "License": null,
  10 |     "Extensions": {}
  11 |   },
  12 |   "Servers": [],
  13 |   "Paths": {
  14 |     "/Auth/LoginLocal": {
  15 |       "Summary": null,
  16 |       "Description": null,
  17 |       "Operations": {
  18 |         "Post": {
  19 |           "Tags": [
  20 |             {
  21 |               "Name": "Auth",
  22 |               "Description": null,
  23 |               "ExternalDocs": null,
  24 |               "Extensions": {},
  25 |               "UnresolvedReference": false,
  26 |               "Reference": null
  27 |             }
  28 |           ],
  29 |           "Summary": "\u7528\u6236\u672C\u5730\u767B\u5165 - \u9A57\u8B49\u7528\u6236\u7684\u5E33\u865F\u5BC6\u78BC\u4E26\u751F\u6210\u8EAB\u4EFD\u4EE4\u724C",
  30 |           "Description": null,
  31 |           "ExternalDocs": null,
  32 |           "OperationId": null,
  33 |           "Parameters": [],
  34 |           "RequestBody": {
  35 |             "UnresolvedReference": false,
  36 |             "Reference": null,
  37 |             "Description": "\u767B\u5165\u8ACB\u6C42\uFF0C\u5305\u542B\u7528\u6236\u540D\u548C\u5BC6\u78BC",
  38 |             "Required": false,
  39 |             "Content": {
  40 |               "application/json": {
  41 |                 "Schema": {
  42 |                   "Title": null,
  43 |                   "Type": null,
  44 |                   "Format": null,
  45 |                   "Description": null,
  46 |                   "Maximum": null,
  47 |                   "ExclusiveMaximum": null,
  48 |                   "Minimum": null,
  49 |                   "ExclusiveMinimum": null,
  50 |                   "MaxLength": null,
  51 |                   "MinLength": null,
  52 |                   "Pattern": null,
  53 |                   "MultipleOf": null,
  54 |                   "Default": null,
  55 |                   "ReadOnly": false,
  56 |                   "WriteOnly": false,
  57 |                   "AllOf": [],
  58 |                   "OneOf": [],
  59 |                   "AnyOf": [],
  60 |                   "Not": null,
  61 |                   "Required": [],
  62 |                   "Items": null,
  63 |                   "MaxItems": null,
  64 |                   "MinItems": null,
  65 |                   "UniqueItems": null,
  66 |                   "Properties": {},
  67 |                   "MaxProperties": null,
  68 |                   "MinProperties": null,
  69 |                   "AdditionalPropertiesAllowed": true,
  70 |                   "AdditionalProperties": null,
  71 |                   "Discriminator": null,
  72 |                   "Example": null,
  73 |                   "Enum": [],
  74 |                   "Nullable": false,
  75 |                   "ExternalDocs": null,
  76 |                   "Deprecated": false,
  77 |                   "Xml": null,
  78 |                   "Extensions": {},
  79 |                   "UnresolvedReference": false,
  80 |                   "Reference": {
  81 |                     "ExternalResource": null,
  82 |                     "Type": 0,
  83 |                     "Id": "LoginModel",
  84 |                     "IsExternal": false,
  85 |                     "IsLocal": true,
  86 |                     "HostDocument": null,
  87 |                     "ReferenceV3": "#/components/schemas/LoginModel",
  88 |                     "ReferenceV2": "#/definitions/LoginModel"
  89 |                   }
  90 |                 },
  91 |                 "Example": null,
  92 |                 "Examples": {},
  93 |                 "Encoding": {},
  94 |                 "Extensions": {}
  95 |               },
  96 |               "text/json": {
  97 |                 "Schema": {
  98 |                   "Title": null,
  99 |                   "Type": null,
 100 |                   "Format": null,
 101 |                   "Description": null,
 102 |                   "Maximum": null,
 103 |                   "ExclusiveMaximum": null,
 104 |                   "Minimum": null,
 105 |                   "ExclusiveMinimum": null,
 106 |                   "MaxLength": null,
 107 |                   "MinLength": null,
 108 |                   "Pattern": null,
 109 |                   "MultipleOf": null,
 110 |                   "Default": null,
 111 |                   "ReadOnly": false,
 112 |                   "WriteOnly": false,
 113 |                   "AllOf": [],
 114 |                   "OneOf": [],
 115 |                   "AnyOf": [],
 116 |                   "Not": null,
 117 |                   "Required": [],
 118 |                   "Items": null,
 119 |                   "MaxItems": null,
 120 |                   "MinItems": null,
 121 |                   "UniqueItems": null,
 122 |                   "Properties": {},
 123 |                   "MaxProperties": null,
 124 |                   "MinProperties": null,
 125 |                   "AdditionalPropertiesAllowed": true,
 126 |                   "AdditionalProperties": null,
 127 |                   "Discriminator": null,
 128 |                   "Example": null,
 129 |                   "Enum": [],
 130 |                   "Nullable": false,
 131 |                   "ExternalDocs": null,
 132 |                   "Deprecated": false,
 133 |                   "Xml": null,
 134 |                   "Extensions": {},
 135 |                   "UnresolvedReference": false,
 136 |                   "Reference": {
 137 |                     "ExternalResource": null,
 138 |                     "Type": 0,
 139 |                     "Id": "LoginModel",
 140 |                     "IsExternal": false,
 141 |                     "IsLocal": true,
 142 |                     "HostDocument": null,
 143 |                     "ReferenceV3": "#/components/schemas/LoginModel",
 144 |                     "ReferenceV2": "#/definitions/LoginModel"
 145 |                   }
 146 |                 },
 147 |                 "Example": null,
 148 |                 "Examples": {},
 149 |                 "Encoding": {},
 150 |                 "Extensions": {}
 151 |               },
 152 |               "application/*\u002Bjson": {
 153 |                 "Schema": {
 154 |                   "Title": null,
 155 |                   "Type": null,
 156 |                   "Format": null,
 157 |                   "Description": null,
 158 |                   "Maximum": null,
 159 |                   "ExclusiveMaximum": null,
 160 |                   "Minimum": null,
 161 |                   "ExclusiveMinimum": null,
 162 |                   "MaxLength": null,
 163 |                   "MinLength": null,
 164 |                   "Pattern": null,
 165 |                   "MultipleOf": null,
 166 |                   "Default": null,
 167 |                   "ReadOnly": false,
 168 |                   "WriteOnly": false,
 169 |                   "AllOf": [],
 170 |                   "OneOf": [],
 171 |                   "AnyOf": [],
 172 |                   "Not": null,
 173 |                   "Required": [],
 174 |                   "Items": null,
 175 |                   "MaxItems": null,
 176 |                   "MinItems": null,
 177 |                   "UniqueItems": null,
 178 |                   "Properties": {},
 179 |                   "MaxProperties": null,
 180 |                   "MinProperties": null,
 181 |                   "AdditionalPropertiesAllowed": true,
 182 |                   "AdditionalProperties": null,
 183 |                   "Discriminator": null,
 184 |                   "Example": null,
 185 |                   "Enum": [],
 186 |                   "Nullable": false,
 187 |                   "ExternalDocs": null,
 188 |                   "Deprecated": false,
 189 |                   "Xml": null,
 190 |                   "Extensions": {},
 191 |                   "UnresolvedReference": false,
 192 |                   "Reference": {
 193 |                     "ExternalResource": null,
 194 |                     "Type": 0,
 195 |                     "Id": "LoginModel",
 196 |                     "IsExternal": false,
 197 |                     "IsLocal": true,
 198 |                     "HostDocument": null,
 199 |                     "ReferenceV3": "#/components/schemas/LoginModel",
 200 |                     "ReferenceV2": "#/definitions/LoginModel"
 201 |                   }
 202 |                 },
 203 |                 "Example": null,
 204 |                 "Examples": {},
 205 |                 "Encoding": {},
 206 |                 "Extensions": {}
 207 |               }
 208 |             },
 209 |             "Extensions": {}
 210 |           },
 211 |           "Responses": {
 212 |             "200": {
 213 |               "Description": "OK",
 214 |               "Headers": {},
 215 |               "Content": {
 216 |                 "application/json": {
 217 |                   "Schema": {
 218 |                     "Title": null,
 219 |                     "Type": null,
 220 |                     "Format": null,
 221 |                     "Description": null,
 222 |                     "Maximum": null,
 223 |                     "ExclusiveMaximum": null,
 224 |                     "Minimum": null,
 225 |                     "ExclusiveMinimum": null,
 226 |                     "MaxLength": null,
 227 |                     "MinLength": null,
 228 |                     "Pattern": null,
 229 |                     "MultipleOf": null,
 230 |                     "Default": null,
 231 |                     "ReadOnly": false,
 232 |                     "WriteOnly": false,
 233 |                     "AllOf": [],
 234 |                     "OneOf": [],
 235 |                     "AnyOf": [],
 236 |                     "Not": null,
 237 |                     "Required": [],
 238 |                     "Items": null,
 239 |                     "MaxItems": null,
 240 |                     "MinItems": null,
 241 |                     "UniqueItems": null,
 242 |                     "Properties": {},
 243 |                     "MaxProperties": null,
 244 |                     "MinProperties": null,
 245 |                     "AdditionalPropertiesAllowed": true,
 246 |                     "AdditionalProperties": null,
 247 |                     "Discriminator": null,
 248 |                     "Example": null,
 249 |                     "Enum": [],
 250 |                     "Nullable": false,
 251 |                     "ExternalDocs": null,
 252 |                     "Deprecated": false,
 253 |                     "Xml": null,
 254 |                     "Extensions": {},
 255 |                     "UnresolvedReference": false,
 256 |                     "Reference": {
 257 |                       "ExternalResource": null,
 258 |                       "Type": 0,
 259 |                       "Id": "LoginResultResult",
 260 |                       "IsExternal": false,
 261 |                       "IsLocal": true,
 262 |                       "HostDocument": null,
 263 |                       "ReferenceV3": "#/components/schemas/LoginResultResult",
 264 |                       "ReferenceV2": "#/definitions/LoginResultResult"
 265 |                     }
 266 |                   },
 267 |                   "Example": null,
 268 |                   "Examples": {},
 269 |                   "Encoding": {},
 270 |                   "Extensions": {}
 271 |                 }
 272 |               },
 273 |               "Links": {},
 274 |               "Extensions": {},
 275 |               "UnresolvedReference": false,
 276 |               "Reference": null
 277 |             }
 278 |           },
 279 |           "Callbacks": {},
 280 |           "Deprecated": false,
 281 |           "Security": [],
 282 |           "Servers": [],
 283 |           "Extensions": {}
 284 |         }
 285 |       },
 286 |       "Servers": [],
 287 |       "Parameters": [],
 288 |       "Extensions": {},
 289 |       "UnresolvedReference": false,
 290 |       "Reference": null
 291 |     },
 292 |     "/Contract/CreateContract": {
 293 |       "Summary": null,
 294 |       "Description": null,
 295 |       "Operations": {
 296 |         "Post": {
 297 |           "Tags": [
 298 |             {
 299 |               "Name": "Contract",
 300 |               "Description": null,
 301 |               "ExternalDocs": null,
 302 |               "Extensions": {},
 303 |               "UnresolvedReference": false,
 304 |               "Reference": null
 305 |             }
 306 |           ],
 307 |           "Summary": "\u5EFA\u7ACB\u65B0\u5408\u7D04 - \u5275\u5EFA\u4E00\u500B\u65B0\u7684\u5408\u7D04\u8A18\u9304\u53CA\u5176\u76F8\u95DC\u8CC7\u6599",
 308 |           "Description": null,
 309 |           "ExternalDocs": null,
 310 |           "OperationId": null,
 311 |           "Parameters": [],
 312 |           "RequestBody": {
 313 |             "UnresolvedReference": false,
 314 |             "Reference": null,
 315 |             "Description": "\u8981\u5EFA\u7ACB\u7684\u5408\u7D04\u8A73\u7D30\u8CC7\u6599",
 316 |             "Required": false,
 317 |             "Content": {
 318 |               "application/json": {
 319 |                 "Schema": {
 320 |                   "Title": null,
 321 |                   "Type": null,
 322 |                   "Format": null,
 323 |                   "Description": null,
 324 |                   "Maximum": null,
 325 |                   "ExclusiveMaximum": null,
 326 |                   "Minimum": null,
 327 |                   "ExclusiveMinimum": null,
 328 |                   "MaxLength": null,
 329 |                   "MinLength": null,
 330 |                   "Pattern": null,
 331 |                   "MultipleOf": null,
 332 |                   "Default": null,
 333 |                   "ReadOnly": false,
 334 |                   "WriteOnly": false,
 335 |                   "AllOf": [],
 336 |                   "OneOf": [],
 337 |                   "AnyOf": [],
 338 |                   "Not": null,
 339 |                   "Required": [],
 340 |                   "Items": null,
 341 |                   "MaxItems": null,
 342 |                   "MinItems": null,
 343 |                   "UniqueItems": null,
 344 |                   "Properties": {},
 345 |                   "MaxProperties": null,
 346 |                   "MinProperties": null,
 347 |                   "AdditionalPropertiesAllowed": true,
 348 |                   "AdditionalProperties": null,
 349 |                   "Discriminator": null,
 350 |                   "Example": null,
 351 |                   "Enum": [],
 352 |                   "Nullable": false,
 353 |                   "ExternalDocs": null,
 354 |                   "Deprecated": false,
 355 |                   "Xml": null,
 356 |                   "Extensions": {},
 357 |                   "UnresolvedReference": false,
 358 |                   "Reference": {
 359 |                     "ExternalResource": null,
 360 |                     "Type": 0,
 361 |                     "Id": "CreateContractModel",
 362 |                     "IsExternal": false,
 363 |                     "IsLocal": true,
 364 |                     "HostDocument": null,
 365 |                     "ReferenceV3": "#/components/schemas/CreateContractModel",
 366 |                     "ReferenceV2": "#/definitions/CreateContractModel"
 367 |                   }
 368 |                 },
 369 |                 "Example": null,
 370 |                 "Examples": {},
 371 |                 "Encoding": {},
 372 |                 "Extensions": {}
 373 |               },
 374 |               "text/json": {
 375 |                 "Schema": {
 376 |                   "Title": null,
 377 |                   "Type": null,
 378 |                   "Format": null,
 379 |                   "Description": null,
 380 |                   "Maximum": null,
 381 |                   "ExclusiveMaximum": null,
 382 |                   "Minimum": null,
 383 |                   "ExclusiveMinimum": null,
 384 |                   "MaxLength": null,
 385 |                   "MinLength": null,
 386 |                   "Pattern": null,
 387 |                   "MultipleOf": null,
 388 |                   "Default": null,
 389 |                   "ReadOnly": false,
 390 |                   "WriteOnly": false,
 391 |                   "AllOf": [],
 392 |                   "OneOf": [],
 393 |                   "AnyOf": [],
 394 |                   "Not": null,
 395 |                   "Required": [],
 396 |                   "Items": null,
 397 |                   "MaxItems": null,
 398 |                   "MinItems": null,
 399 |                   "UniqueItems": null,
 400 |                   "Properties": {},
 401 |                   "MaxProperties": null,
 402 |                   "MinProperties": null,
 403 |                   "AdditionalPropertiesAllowed": true,
 404 |                   "AdditionalProperties": null,
 405 |                   "Discriminator": null,
 406 |                   "Example": null,
 407 |                   "Enum": [],
 408 |                   "Nullable": false,
 409 |                   "ExternalDocs": null,
 410 |                   "Deprecated": false,
 411 |                   "Xml": null,
 412 |                   "Extensions": {},
 413 |                   "UnresolvedReference": false,
 414 |                   "Reference": {
 415 |                     "ExternalResource": null,
 416 |                     "Type": 0,
 417 |                     "Id": "CreateContractModel",
 418 |                     "IsExternal": false,
 419 |                     "IsLocal": true,
 420 |                     "HostDocument": null,
 421 |                     "ReferenceV3": "#/components/schemas/CreateContractModel",
 422 |                     "ReferenceV2": "#/definitions/CreateContractModel"
 423 |                   }
 424 |                 },
 425 |                 "Example": null,
 426 |                 "Examples": {},
 427 |                 "Encoding": {},
 428 |                 "Extensions": {}
 429 |               },
 430 |               "application/*\u002Bjson": {
 431 |                 "Schema": {
 432 |                   "Title": null,
 433 |                   "Type": null,
 434 |                   "Format": null,
 435 |                   "Description": null,
 436 |                   "Maximum": null,
 437 |                   "ExclusiveMaximum": null,
 438 |                   "Minimum": null,
 439 |                   "ExclusiveMinimum": null,
 440 |                   "MaxLength": null,
 441 |                   "MinLength": null,
 442 |                   "Pattern": null,
 443 |                   "MultipleOf": null,
 444 |                   "Default": null,
 445 |                   "ReadOnly": false,
 446 |                   "WriteOnly": false,
 447 |                   "AllOf": [],
 448 |                   "OneOf": [],
 449 |                   "AnyOf": [],
 450 |                   "Not": null,
 451 |                   "Required": [],
 452 |                   "Items": null,
 453 |                   "MaxItems": null,
 454 |                   "MinItems": null,
 455 |                   "UniqueItems": null,
 456 |                   "Properties": {},
 457 |                   "MaxProperties": null,
 458 |                   "MinProperties": null,
 459 |                   "AdditionalPropertiesAllowed": true,
 460 |                   "AdditionalProperties": null,
 461 |                   "Discriminator": null,
 462 |                   "Example": null,
 463 |                   "Enum": [],
 464 |                   "Nullable": false,
 465 |                   "ExternalDocs": null,
 466 |                   "Deprecated": false,
 467 |                   "Xml": null,
 468 |                   "Extensions": {},
 469 |                   "UnresolvedReference": false,
 470 |                   "Reference": {
 471 |                     "ExternalResource": null,
 472 |                     "Type": 0,
 473 |                     "Id": "CreateContractModel",
 474 |                     "IsExternal": false,
 475 |                     "IsLocal": true,
 476 |                     "HostDocument": null,
 477 |                     "ReferenceV3": "#/components/schemas/CreateContractModel",
 478 |                     "ReferenceV2": "#/definitions/CreateContractModel"
 479 |                   }
 480 |                 },
 481 |                 "Example": null,
 482 |                 "Examples": {},
 483 |                 "Encoding": {},
 484 |                 "Extensions": {}
 485 |               }
 486 |             },
 487 |             "Extensions": {}
 488 |           },
 489 |           "Responses": {
 490 |             "200": {
 491 |               "Description": "OK",
 492 |               "Headers": {},
 493 |               "Content": {
 494 |                 "application/json": {
 495 |                   "Schema": {
 496 |                     "Title": null,
 497 |                     "Type": null,
 498 |                     "Format": null,
 499 |                     "Description": null,
 500 |                     "Maximum": null,
 501 |                     "ExclusiveMaximum": null,
 502 |                     "Minimum": null,
 503 |                     "ExclusiveMinimum": null,
 504 |                     "MaxLength": null,
 505 |                     "MinLength": null,
 506 |                     "Pattern": null,
 507 |                     "MultipleOf": null,
 508 |                     "Default": null,
 509 |                     "ReadOnly": false,
 510 |                     "WriteOnly": false,
 511 |                     "AllOf": [],
 512 |                     "OneOf": [],
 513 |                     "AnyOf": [],
 514 |                     "Not": null,
 515 |                     "Required": [],
 516 |                     "Items": null,
 517 |                     "MaxItems": null,
 518 |                     "MinItems": null,
 519 |                     "UniqueItems": null,
 520 |                     "Properties": {},
 521 |                     "MaxProperties": null,
 522 |                     "MinProperties": null,
 523 |                     "AdditionalPropertiesAllowed": true,
 524 |                     "AdditionalProperties": null,
 525 |                     "Discriminator": null,
 526 |                     "Example": null,
 527 |                     "Enum": [],
 528 |                     "Nullable": false,
 529 |                     "ExternalDocs": null,
 530 |                     "Deprecated": false,
 531 |                     "Xml": null,
 532 |                     "Extensions": {},
 533 |                     "UnresolvedReference": false,
 534 |                     "Reference": {
 535 |                       "ExternalResource": null,
 536 |                       "Type": 0,
 537 |                       "Id": "ContractDetailInfoResultResult",
 538 |                       "IsExternal": false,
 539 |                       "IsLocal": true,
 540 |                       "HostDocument": null,
 541 |                       "ReferenceV3": "#/components/schemas/ContractDetailInfoResultResult",
 542 |                       "ReferenceV2": "#/definitions/ContractDetailInfoResultResult"
 543 |                     }
 544 |                   },
 545 |                   "Example": null,
 546 |                   "Examples": {},
 547 |                   "Encoding": {},
 548 |                   "Extensions": {}
 549 |                 }
 550 |               },
 551 |               "Links": {},
 552 |               "Extensions": {},
 553 |               "UnresolvedReference": false,
 554 |               "Reference": null
 555 |             }
 556 |           },
 557 |           "Callbacks": {},
 558 |           "Deprecated": false,
 559 |           "Security": [],
 560 |           "Servers": [],
 561 |           "Extensions": {}
 562 |         }
 563 |       },
 564 |       "Servers": [],
 565 |       "Parameters": [],
 566 |       "Extensions": {},
 567 |       "UnresolvedReference": false,
 568 |       "Reference": null
 569 |     },
 570 |     "/Contract/GetContractBasic": {
 571 |       "Summary": null,
 572 |       "Description": null,
 573 |       "Operations": {
 574 |         "Get": {
 575 |           "Tags": [
 576 |             {
 577 |               "Name": "Contract",
 578 |               "Description": null,
 579 |               "ExternalDocs": null,
 580 |               "Extensions": {},
 581 |               "UnresolvedReference": false,
 582 |               "Reference": null
 583 |             }
 584 |           ],
 585 |           "Summary": "\u7372\u53D6\u5408\u7D04\u57FA\u672C\u8CC7\u8A0A - \u6839\u64DA\u5408\u7D04ID\u67E5\u8A62\u55AE\u4E00\u5408\u7D04\u7684\u57FA\u672C\u8CC7\u6599",
 586 |           "Description": null,
 587 |           "ExternalDocs": null,
 588 |           "OperationId": null,
 589 |           "Parameters": [
 590 |             {
 591 |               "UnresolvedReference": false,
 592 |               "Reference": null,
 593 |               "Name": "ContractGuid",
 594 |               "In": 0,
 595 |               "Description": "\u5408\u7D04\u8B58\u5225\u78BC GUID",
 596 |               "Required": true,
 597 |               "Deprecated": false,
 598 |               "AllowEmptyValue": false,
 599 |               "Style": 2,
 600 |               "Explode": true,
 601 |               "AllowReserved": false,
 602 |               "Schema": {
 603 |                 "Title": null,
 604 |                 "Type": "string",
 605 |                 "Format": null,
 606 |                 "Description": null,
 607 |                 "Maximum": null,
 608 |                 "ExclusiveMaximum": null,
 609 |                 "Minimum": null,
 610 |                 "ExclusiveMinimum": null,
 611 |                 "MaxLength": null,
 612 |                 "MinLength": null,
 613 |                 "Pattern": null,
 614 |                 "MultipleOf": null,
 615 |                 "Default": null,
 616 |                 "ReadOnly": false,
 617 |                 "WriteOnly": false,
 618 |                 "AllOf": [],
 619 |                 "OneOf": [],
 620 |                 "AnyOf": [],
 621 |                 "Not": null,
 622 |                 "Required": [],
 623 |                 "Items": null,
 624 |                 "MaxItems": null,
 625 |                 "MinItems": null,
 626 |                 "UniqueItems": null,
 627 |                 "Properties": {},
 628 |                 "MaxProperties": null,
 629 |                 "MinProperties": null,
 630 |                 "AdditionalPropertiesAllowed": true,
 631 |                 "AdditionalProperties": null,
 632 |                 "Discriminator": null,
 633 |                 "Example": null,
 634 |                 "Enum": [],
 635 |                 "Nullable": false,
 636 |                 "ExternalDocs": null,
 637 |                 "Deprecated": false,
 638 |                 "Xml": null,
 639 |                 "Extensions": {},
 640 |                 "UnresolvedReference": false,
 641 |                 "Reference": null
 642 |               },
 643 |               "Examples": {},
 644 |               "Example": null,
 645 |               "Content": {},
 646 |               "Extensions": {}
 647 |             }
 648 |           ],
 649 |           "RequestBody": null,
 650 |           "Responses": {
 651 |             "200": {
 652 |               "Description": "OK",
 653 |               "Headers": {},
 654 |               "Content": {
 655 |                 "application/json": {
 656 |                   "Schema": {
 657 |                     "Title": null,
 658 |                     "Type": null,
 659 |                     "Format": null,
 660 |                     "Description": null,
 661 |                     "Maximum": null,
 662 |                     "ExclusiveMaximum": null,
 663 |                     "Minimum": null,
 664 |                     "ExclusiveMinimum": null,
 665 |                     "MaxLength": null,
 666 |                     "MinLength": null,
 667 |                     "Pattern": null,
 668 |                     "MultipleOf": null,
 669 |                     "Default": null,
 670 |                     "ReadOnly": false,
 671 |                     "WriteOnly": false,
 672 |                     "AllOf": [],
 673 |                     "OneOf": [],
 674 |                     "AnyOf": [],
 675 |                     "Not": null,
 676 |                     "Required": [],
 677 |                     "Items": null,
 678 |                     "MaxItems": null,
 679 |                     "MinItems": null,
 680 |                     "UniqueItems": null,
 681 |                     "Properties": {},
 682 |                     "MaxProperties": null,
 683 |                     "MinProperties": null,
 684 |                     "AdditionalPropertiesAllowed": true,
 685 |                     "AdditionalProperties": null,
 686 |                     "Discriminator": null,
 687 |                     "Example": null,
 688 |                     "Enum": [],
 689 |                     "Nullable": false,
 690 |                     "ExternalDocs": null,
 691 |                     "Deprecated": false,
 692 |                     "Xml": null,
 693 |                     "Extensions": {},
 694 |                     "UnresolvedReference": false,
 695 |                     "Reference": {
 696 |                       "ExternalResource": null,
 697 |                       "Type": 0,
 698 |                       "Id": "ContractBasicInfoResultResult",
 699 |                       "IsExternal": false,
 700 |                       "IsLocal": true,
 701 |                       "HostDocument": null,
 702 |                       "ReferenceV3": "#/components/schemas/ContractBasicInfoResultResult",
 703 |                       "ReferenceV2": "#/definitions/ContractBasicInfoResultResult"
 704 |                     }
 705 |                   },
 706 |                   "Example": null,
 707 |                   "Examples": {},
 708 |                   "Encoding": {},
 709 |                   "Extensions": {}
 710 |                 }
 711 |               },
 712 |               "Links": {},
 713 |               "Extensions": {},
 714 |               "UnresolvedReference": false,
 715 |               "Reference": null
 716 |             }
 717 |           },
 718 |           "Callbacks": {},
 719 |           "Deprecated": false,
 720 |           "Security": [],
 721 |           "Servers": [],
 722 |           "Extensions": {}
 723 |         }
 724 |       },
 725 |       "Servers": [],
 726 |       "Parameters": [],
 727 |       "Extensions": {},
 728 |       "UnresolvedReference": false,
 729 |       "Reference": null
 730 |     },
 731 |     "/Contract/GetContractDetail": {
 732 |       "Summary": null,
 733 |       "Description": null,
 734 |       "Operations": {
 735 |         "Get": {
 736 |           "Tags": [
 737 |             {
 738 |               "Name": "Contract",
 739 |               "Description": null,
 740 |               "ExternalDocs": null,
 741 |               "Extensions": {},
 742 |               "UnresolvedReference": false,
 743 |               "Reference": null
 744 |             }
 745 |           ],
 746 |           "Summary": "\u7372\u53D6\u5408\u7D04\u8A73\u7D30\u8CC7\u8A0A - \u6839\u64DA\u5408\u7D04ID\u67E5\u8A62\u55AE\u4E00\u5408\u7D04\u7684\u5168\u90E8\u8A73\u7D30\u8CC7\u6599",
 747 |           "Description": null,
 748 |           "ExternalDocs": null,
 749 |           "OperationId": null,
 750 |           "Parameters": [
 751 |             {
 752 |               "UnresolvedReference": false,
 753 |               "Reference": null,
 754 |               "Name": "ContractGuid",
 755 |               "In": 0,
 756 |               "Description": "\u5408\u7D04\u8B58\u5225\u78BC GUID",
 757 |               "Required": true,
 758 |               "Deprecated": false,
 759 |               "AllowEmptyValue": false,
 760 |               "Style": 2,
 761 |               "Explode": true,
 762 |               "AllowReserved": false,
 763 |               "Schema": {
 764 |                 "Title": null,
 765 |                 "Type": "string",
 766 |                 "Format": null,
 767 |                 "Description": null,
 768 |                 "Maximum": null,
 769 |                 "ExclusiveMaximum": null,
 770 |                 "Minimum": null,
 771 |                 "ExclusiveMinimum": null,
 772 |                 "MaxLength": null,
 773 |                 "MinLength": null,
 774 |                 "Pattern": null,
 775 |                 "MultipleOf": null,
 776 |                 "Default": null,
 777 |                 "ReadOnly": false,
 778 |                 "WriteOnly": false,
 779 |                 "AllOf": [],
 780 |                 "OneOf": [],
 781 |                 "AnyOf": [],
 782 |                 "Not": null,
 783 |                 "Required": [],
 784 |                 "Items": null,
 785 |                 "MaxItems": null,
 786 |                 "MinItems": null,
 787 |                 "UniqueItems": null,
 788 |                 "Properties": {},
 789 |                 "MaxProperties": null,
 790 |                 "MinProperties": null,
 791 |                 "AdditionalPropertiesAllowed": true,
 792 |                 "AdditionalProperties": null,
 793 |                 "Discriminator": null,
 794 |                 "Example": null,
 795 |                 "Enum": [],
 796 |                 "Nullable": false,
 797 |                 "ExternalDocs": null,
 798 |                 "Deprecated": false,
 799 |                 "Xml": null,
 800 |                 "Extensions": {},
 801 |                 "UnresolvedReference": false,
 802 |                 "Reference": null
 803 |               },
 804 |               "Examples": {},
 805 |               "Example": null,
 806 |               "Content": {},
 807 |               "Extensions": {}
 808 |             }
 809 |           ],
 810 |           "RequestBody": null,
 811 |           "Responses": {
 812 |             "200": {
 813 |               "Description": "OK",
 814 |               "Headers": {},
 815 |               "Content": {
 816 |                 "application/json": {
 817 |                   "Schema": {
 818 |                     "Title": null,
 819 |                     "Type": null,
 820 |                     "Format": null,
 821 |                     "Description": null,
 822 |                     "Maximum": null,
 823 |                     "ExclusiveMaximum": null,
 824 |                     "Minimum": null,
 825 |                     "ExclusiveMinimum": null,
 826 |                     "MaxLength": null,
 827 |                     "MinLength": null,
 828 |                     "Pattern": null,
 829 |                     "MultipleOf": null,
 830 |                     "Default": null,
 831 |                     "ReadOnly": false,
 832 |                     "WriteOnly": false,
 833 |                     "AllOf": [],
 834 |                     "OneOf": [],
 835 |                     "AnyOf": [],
 836 |                     "Not": null,
 837 |                     "Required": [],
 838 |                     "Items": null,
 839 |                     "MaxItems": null,
 840 |                     "MinItems": null,
 841 |                     "UniqueItems": null,
 842 |                     "Properties": {},
 843 |                     "MaxProperties": null,
 844 |                     "MinProperties": null,
 845 |                     "AdditionalPropertiesAllowed": true,
 846 |                     "AdditionalProperties": null,
 847 |                     "Discriminator": null,
 848 |                     "Example": null,
 849 |                     "Enum": [],
 850 |                     "Nullable": false,
 851 |                     "ExternalDocs": null,
 852 |                     "Deprecated": false,
 853 |                     "Xml": null,
 854 |                     "Extensions": {},
 855 |                     "UnresolvedReference": false,
 856 |                     "Reference": {
 857 |                       "ExternalResource": null,
 858 |                       "Type": 0,
 859 |                       "Id": "ContractDetailInfoResultResult",
 860 |                       "IsExternal": false,
 861 |                       "IsLocal": true,
 862 |                       "HostDocument": null,
 863 |                       "ReferenceV3": "#/components/schemas/ContractDetailInfoResultResult",
 864 |                       "ReferenceV2": "#/definitions/ContractDetailInfoResultResult"
 865 |                     }
 866 |                   },
 867 |                   "Example": null,
 868 |                   "Examples": {},
 869 |                   "Encoding": {},
 870 |                   "Extensions": {}
 871 |                 }
 872 |               },
 873 |               "Links": {},
 874 |               "Extensions": {},
 875 |               "UnresolvedReference": false,
 876 |               "Reference": null
 877 |             }
 878 |           },
 879 |           "Callbacks": {},
 880 |           "Deprecated": false,
 881 |           "Security": [],
 882 |           "Servers": [],
 883 |           "Extensions": {}
 884 |         }
 885 |       },
 886 |       "Servers": [],
 887 |       "Parameters": [],
 888 |       "Extensions": {},
 889 |       "UnresolvedReference": false,
 890 |       "Reference": null
 891 |     },
 892 |     "/ContractAccess/CreateContractAccess": {
 893 |       "Summary": null,
 894 |       "Description": null,
 895 |       "Operations": {
 896 |         "Post": {
 897 |           "Tags": [
 898 |             {
 899 |               "Name": "ContractAccess",
 900 |               "Description": null,
 901 |               "ExternalDocs": null,
 902 |               "Extensions": {},
 903 |               "UnresolvedReference": false,
 904 |               "Reference": null
 905 |             }
 906 |           ],
 907 |           "Summary": "\u5275\u5EFA\u5408\u7D04\u8ABF\u95B1\u7533\u8ACB - \u63D0\u4EA4\u4E00\u500B\u65B0\u7684\u5408\u7D04\u8ABF\u95B1\u6B0A\u9650\u7533\u8ACB",
 908 |           "Description": null,
 909 |           "ExternalDocs": null,
 910 |           "OperationId": null,
 911 |           "Parameters": [],
 912 |           "RequestBody": {
 913 |             "UnresolvedReference": false,
 914 |             "Reference": null,
 915 |             "Description": "\u8ABF\u95B1\u7533\u8ACB\u7684\u8A73\u7D30\u8CC7\u6599\uFF0C\u5305\u542B\u7533\u8ACB\u4EBA\u3001\u8ABF\u95B1\u6642\u9593\u6BB5\u548C\u8ABF\u95B1\u539F\u56E0\u7B49",
 916 |             "Required": false,
 917 |             "Content": {
 918 |               "application/json": {
 919 |                 "Schema": {
 920 |                   "Title": null,
 921 |                   "Type": null,
 922 |                   "Format": null,
 923 |                   "Description": null,
 924 |                   "Maximum": null,
 925 |                   "ExclusiveMaximum": null,
 926 |                   "Minimum": null,
 927 |                   "ExclusiveMinimum": null,
 928 |                   "MaxLength": null,
 929 |                   "MinLength": null,
 930 |                   "Pattern": null,
 931 |                   "MultipleOf": null,
 932 |                   "Default": null,
 933 |                   "ReadOnly": false,
 934 |                   "WriteOnly": false,
 935 |                   "AllOf": [],
 936 |                   "OneOf": [],
 937 |                   "AnyOf": [],
 938 |                   "Not": null,
 939 |                   "Required": [],
 940 |                   "Items": null,
 941 |                   "MaxItems": null,
 942 |                   "MinItems": null,
 943 |                   "UniqueItems": null,
 944 |                   "Properties": {},
 945 |                   "MaxProperties": null,
 946 |                   "MinProperties": null,
 947 |                   "AdditionalPropertiesAllowed": true,
 948 |                   "AdditionalProperties": null,
 949 |                   "Discriminator": null,
 950 |                   "Example": null,
 951 |                   "Enum": [],
 952 |                   "Nullable": false,
 953 |                   "ExternalDocs": null,
 954 |                   "Deprecated": false,
 955 |                   "Xml": null,
 956 |                   "Extensions": {},
 957 |                   "UnresolvedReference": false,
 958 |                   "Reference": {
 959 |                     "ExternalResource": null,
 960 |                     "Type": 0,
 961 |                     "Id": "CreateContractAccessModel",
 962 |                     "IsExternal": false,
 963 |                     "IsLocal": true,
 964 |                     "HostDocument": null,
 965 |                     "ReferenceV3": "#/components/schemas/CreateContractAccessModel",
 966 |                     "ReferenceV2": "#/definitions/CreateContractAccessModel"
 967 |                   }
 968 |                 },
 969 |                 "Example": null,
 970 |                 "Examples": {},
 971 |                 "Encoding": {},
 972 |                 "Extensions": {}
 973 |               },
 974 |               "text/json": {
 975 |                 "Schema": {
 976 |                   "Title": null,
 977 |                   "Type": null,
 978 |                   "Format": null,
 979 |                   "Description": null,
 980 |                   "Maximum": null,
 981 |                   "ExclusiveMaximum": null,
 982 |                   "Minimum": null,
 983 |                   "ExclusiveMinimum": null,
 984 |                   "MaxLength": null,
 985 |                   "MinLength": null,
 986 |                   "Pattern": null,
 987 |                   "MultipleOf": null,
 988 |                   "Default": null,
 989 |                   "ReadOnly": false,
 990 |                   "WriteOnly": false,
 991 |                   "AllOf": [],
 992 |                   "OneOf": [],
 993 |                   "AnyOf": [],
 994 |                   "Not": null,
 995 |                   "Required": [],
 996 |                   "Items": null,
 997 |                   "MaxItems": null,
 998 |                   "MinItems": null,
 999 |                   "UniqueItems": null,
1000 |                   "Properties": {},
1001 |                   "MaxProperties": null,
1002 |                   "MinProperties": null,
1003 |                   "AdditionalPropertiesAllowed": true,
1004 |                   "AdditionalProperties": null,
1005 |                   "Discriminator": null,
1006 |                   "Example": null,
1007 |                   "Enum": [],
1008 |                   "Nullable": false,
1009 |                   "ExternalDocs": null,
1010 |                   "Deprecated": false,
1011 |                   "Xml": null,
1012 |                   "Extensions": {},
1013 |                   "UnresolvedReference": false,
1014 |                   "Reference": {
1015 |                     "ExternalResource": null,
1016 |                     "Type": 0,
1017 |                     "Id": "CreateContractAccessModel",
1018 |                     "IsExternal": false,
1019 |                     "IsLocal": true,
1020 |                     "HostDocument": null,
1021 |                     "ReferenceV3": "#/components/schemas/CreateContractAccessModel",
1022 |                     "ReferenceV2": "#/definitions/CreateContractAccessModel"
1023 |                   }
1024 |                 },
1025 |                 "Example": null,
1026 |                 "Examples": {},
1027 |                 "Encoding": {},
1028 |                 "Extensions": {}
1029 |               },
1030 |               "application/*\u002Bjson": {
1031 |                 "Schema": {
1032 |                   "Title": null,
1033 |                   "Type": null,
1034 |                   "Format": null,
1035 |                   "Description": null,
1036 |                   "Maximum": null,
1037 |                   "ExclusiveMaximum": null,
1038 |                   "Minimum": null,
1039 |                   "ExclusiveMinimum": null,
1040 |                   "MaxLength": null,
1041 |                   "MinLength": null,
1042 |                   "Pattern": null,
1043 |                   "MultipleOf": null,
1044 |                   "Default": null,
1045 |                   "ReadOnly": false,
1046 |                   "WriteOnly": false,
1047 |                   "AllOf": [],
1048 |                   "OneOf": [],
1049 |                   "AnyOf": [],
1050 |                   "Not": null,
1051 |                   "Required": [],
1052 |                   "Items": null,
1053 |                   "MaxItems": null,
1054 |                   "MinItems": null,
1055 |                   "UniqueItems": null,
1056 |                   "Properties": {},
1057 |                   "MaxProperties": null,
1058 |                   "MinProperties": null,
1059 |                   "AdditionalPropertiesAllowed": true,
1060 |                   "AdditionalProperties": null,
1061 |                   "Discriminator": null,
1062 |                   "Example": null,
1063 |                   "Enum": [],
1064 |                   "Nullable": false,
1065 |                   "ExternalDocs": null,
1066 |                   "Deprecated": false,
1067 |                   "Xml": null,
1068 |                   "Extensions": {},
1069 |                   "UnresolvedReference": false,
1070 |                   "Reference": {
1071 |                     "ExternalResource": null,
1072 |                     "Type": 0,
1073 |                     "Id": "CreateContractAccessModel",
1074 |                     "IsExternal": false,
1075 |                     "IsLocal": true,
1076 |                     "HostDocument": null,
1077 |                     "ReferenceV3": "#/components/schemas/CreateContractAccessModel",
1078 |                     "ReferenceV2": "#/definitions/CreateContractAccessModel"
1079 |                   }
1080 |                 },
1081 |                 "Example": null,
1082 |                 "Examples": {},
1083 |                 "Encoding": {},
1084 |                 "Extensions": {}
1085 |               }
1086 |             },
1087 |             "Extensions": {}
1088 |           },
1089 |           "Responses": {
1090 |             "200": {
1091 |               "Description": "OK",
1092 |               "Headers": {},
1093 |               "Content": {
1094 |                 "application/json": {
1095 |                   "Schema": {
1096 |                     "Title": null,
1097 |                     "Type": null,
1098 |                     "Format": null,
1099 |                     "Description": null,
1100 |                     "Maximum": null,
1101 |                     "ExclusiveMaximum": null,
1102 |                     "Minimum": null,
1103 |                     "ExclusiveMinimum": null,
1104 |                     "MaxLength": null,
1105 |                     "MinLength": null,
1106 |                     "Pattern": null,
1107 |                     "MultipleOf": null,
1108 |                     "Default": null,
1109 |                     "ReadOnly": false,
1110 |                     "WriteOnly": false,
1111 |                     "AllOf": [],
1112 |                     "OneOf": [],
1113 |                     "AnyOf": [],
1114 |                     "Not": null,
1115 |                     "Required": [],
1116 |                     "Items": null,
1117 |                     "MaxItems": null,
1118 |                     "MinItems": null,
1119 |                     "UniqueItems": null,
1120 |                     "Properties": {},
1121 |                     "MaxProperties": null,
1122 |                     "MinProperties": null,
1123 |                     "AdditionalPropertiesAllowed": true,
1124 |                     "AdditionalProperties": null,
1125 |                     "Discriminator": null,
1126 |                     "Example": null,
1127 |                     "Enum": [],
1128 |                     "Nullable": false,
1129 |                     "ExternalDocs": null,
1130 |                     "Deprecated": false,
1131 |                     "Xml": null,
1132 |                     "Extensions": {},
1133 |                     "UnresolvedReference": false,
1134 |                     "Reference": {
1135 |                       "ExternalResource": null,
1136 |                       "Type": 0,
1137 |                       "Id": "CreateContractAccessResultResult",
1138 |                       "IsExternal": false,
1139 |                       "IsLocal": true,
1140 |                       "HostDocument": null,
1141 |                       "ReferenceV3": "#/components/schemas/CreateContractAccessResultResult",
1142 |                       "ReferenceV2": "#/definitions/CreateContractAccessResultResult"
1143 |                     }
1144 |                   },
1145 |                   "Example": null,
1146 |                   "Examples": {},
1147 |                   "Encoding": {},
1148 |                   "Extensions": {}
1149 |                 }
1150 |               },
1151 |               "Links": {},
1152 |               "Extensions": {},
1153 |               "UnresolvedReference": false,
1154 |               "Reference": null
1155 |             }
1156 |           },
1157 |           "Callbacks": {},
1158 |           "Deprecated": false,
1159 |           "Security": [],
1160 |           "Servers": [],
1161 |           "Extensions": {}
1162 |         }
1163 |       },
1164 |       "Servers": [],
1165 |       "Parameters": [],
1166 |       "Extensions": {},
1167 |       "UnresolvedReference": false,
1168 |       "Reference": null
1169 |     },
1170 |     "/ContractAccess/GetContractAccess": {
1171 |       "Summary": null,
1172 |       "Description": null,
1173 |       "Operations": {
1174 |         "Get": {
1175 |           "Tags": [
1176 |             {
1177 |               "Name": "ContractAccess",
1178 |               "Description": null,
1179 |               "ExternalDocs": null,
1180 |               "Extensions": {},
1181 |               "UnresolvedReference": false,
1182 |               "Reference": null
1183 |             }
1184 |           ],
1185 |           "Summary": "\u7372\u53D6\u5408\u7D04\u8ABF\u95B1\u8A73\u60C5 - \u6839\u64DA\u5408\u7D04GUID\u67E5\u8A62\u7279\u5B9A\u7684\u5408\u7D04\u8ABF\u95B1\u7533\u8ACB",
1186 |           "Description": null,
1187 |           "ExternalDocs": null,
1188 |           "OperationId": null,
1189 |           "Parameters": [
1190 |             {
1191 |               "UnresolvedReference": false,
1192 |               "Reference": null,
1193 |               "Name": "ContractGuid",
1194 |               "In": 0,
1195 |               "Description": "\u8981\u67E5\u8A62\u7684\u5408\u7D04GUID",
1196 |               "Required": false,
1197 |               "Deprecated": false,
1198 |               "AllowEmptyValue": false,
1199 |               "Style": 2,
1200 |               "Explode": true,
1201 |               "AllowReserved": false,
1202 |               "Schema": {
1203 |                 "Title": null,
1204 |                 "Type": "string",
1205 |                 "Format": null,
1206 |                 "Description": null,
1207 |                 "Maximum": null,
1208 |                 "ExclusiveMaximum": null,
1209 |                 "Minimum": null,
1210 |                 "ExclusiveMinimum": null,
1211 |                 "MaxLength": null,
1212 |                 "MinLength": null,
1213 |                 "Pattern": null,
1214 |                 "MultipleOf": null,
1215 |                 "Default": null,
1216 |                 "ReadOnly": false,
1217 |                 "WriteOnly": false,
1218 |                 "AllOf": [],
1219 |                 "OneOf": [],
1220 |                 "AnyOf": [],
1221 |                 "Not": null,
1222 |                 "Required": [],
1223 |                 "Items": null,
1224 |                 "MaxItems": null,
1225 |                 "MinItems": null,
1226 |                 "UniqueItems": null,
1227 |                 "Properties": {},
1228 |                 "MaxProperties": null,
1229 |                 "MinProperties": null,
1230 |                 "AdditionalPropertiesAllowed": true,
1231 |                 "AdditionalProperties": null,
1232 |                 "Discriminator": null,
1233 |                 "Example": null,
1234 |                 "Enum": [],
1235 |                 "Nullable": false,
1236 |                 "ExternalDocs": null,
1237 |                 "Deprecated": false,
1238 |                 "Xml": null,
1239 |                 "Extensions": {},
1240 |                 "UnresolvedReference": false,
1241 |                 "Reference": null
1242 |               },
1243 |               "Examples": {},
1244 |               "Example": null,
1245 |               "Content": {},
1246 |               "Extensions": {}
1247 |             }
1248 |           ],
1249 |           "RequestBody": null,
1250 |           "Responses": {
1251 |             "200": {
1252 |               "Description": "OK",
1253 |               "Headers": {},
1254 |               "Content": {
1255 |                 "application/json": {
1256 |                   "Schema": {
1257 |                     "Title": null,
1258 |                     "Type": null,
1259 |                     "Format": null,
1260 |                     "Description": null,
1261 |                     "Maximum": null,
1262 |                     "ExclusiveMaximum": null,
1263 |                     "Minimum": null,
1264 |                     "ExclusiveMinimum": null,
1265 |                     "MaxLength": null,
1266 |                     "MinLength": null,
1267 |                     "Pattern": null,
1268 |                     "MultipleOf": null,
1269 |                     "Default": null,
1270 |                     "ReadOnly": false,
1271 |                     "WriteOnly": false,
1272 |                     "AllOf": [],
1273 |                     "OneOf": [],
1274 |                     "AnyOf": [],
1275 |                     "Not": null,
1276 |                     "Required": [],
1277 |                     "Items": null,
1278 |                     "MaxItems": null,
1279 |                     "MinItems": null,
1280 |                     "UniqueItems": null,
1281 |                     "Properties": {},
1282 |                     "MaxProperties": null,
1283 |                     "MinProperties": null,
1284 |                     "AdditionalPropertiesAllowed": true,
1285 |                     "AdditionalProperties": null,
1286 |                     "Discriminator": null,
1287 |                     "Example": null,
1288 |                     "Enum": [],
1289 |                     "Nullable": false,
1290 |                     "ExternalDocs": null,
1291 |                     "Deprecated": false,
1292 |                     "Xml": null,
1293 |                     "Extensions": {},
1294 |                     "UnresolvedReference": false,
1295 |                     "Reference": {
1296 |                       "ExternalResource": null,
1297 |                       "Type": 0,
1298 |                       "Id": "GetContractAccessResultResult",
1299 |                       "IsExternal": false,
1300 |                       "IsLocal": true,
1301 |                       "HostDocument": null,
1302 |                       "ReferenceV3": "#/components/schemas/GetContractAccessResultResult",
1303 |                       "ReferenceV2": "#/definitions/GetContractAccessResultResult"
1304 |                     }
1305 |                   },
1306 |                   "Example": null,
1307 |                   "Examples": {},
1308 |                   "Encoding": {},
1309 |                   "Extensions": {}
1310 |                 }
1311 |               },
1312 |               "Links": {},
1313 |               "Extensions": {},
1314 |               "UnresolvedReference": false,
1315 |               "Reference": null
1316 |             }
1317 |           },
1318 |           "Callbacks": {},
1319 |           "Deprecated": false,
1320 |           "Security": [],
1321 |           "Servers": [],
1322 |           "Extensions": {}
1323 |         }
1324 |       },
1325 |       "Servers": [],
1326 |       "Parameters": [],
1327 |       "Extensions": {},
1328 |       "UnresolvedReference": false,
1329 |       "Reference": null
1330 |     },
1331 |     "/ContractAccesses/GetPendingContractAccesses": {
1332 |       "Summary": null,
1333 |       "Description": null,
1334 |       "Operations": {
1335 |         "Post": {
1336 |           "Tags": [
1337 |             {
1338 |               "Name": "ContractAccesses",
1339 |               "Description": null,
1340 |               "ExternalDocs": null,
1341 |               "Extensions": {},
1342 |               "UnresolvedReference": false,
1343 |               "Reference": null
1344 |             }
1345 |           ],
1346 |           "Summary": "\u7372\u53D6\u5F85\u5BE9\u7684\u5408\u7D04\u8ABF\u95B1\u5217\u8868 - \u67E5\u8A62\u6240\u6709\u9700\u8981\u8655\u7406\u7684\u5408\u7D04\u8ABF\u95B1\u7533\u8ACB",
1347 |           "Description": null,
1348 |           "ExternalDocs": null,
1349 |           "OperationId": null,
1350 |           "Parameters": [],
1351 |           "RequestBody": {
1352 |             "UnresolvedReference": false,
1353 |             "Reference": null,
1354 |             "Description": "\u5305\u542B\u904E\u6FFE\u689D\u4EF6\u3001\u6392\u5E8F\u548C\u5206\u9801\u8A2D\u7F6E\u7684\u8ACB\u6C42\u6578\u64DA",
1355 |             "Required": false,
1356 |             "Content": {
1357 |               "application/json": {
1358 |                 "Schema": {
1359 |                   "Title": null,
1360 |                   "Type": null,
1361 |                   "Format": null,
1362 |                   "Description": null,
1363 |                   "Maximum": null,
1364 |                   "ExclusiveMaximum": null,
1365 |                   "Minimum": null,
1366 |                   "ExclusiveMinimum": null,
1367 |                   "MaxLength": null,
1368 |                   "MinLength": null,
1369 |                   "Pattern": null,
1370 |                   "MultipleOf": null,
1371 |                   "Default": null,
1372 |                   "ReadOnly": false,
1373 |                   "WriteOnly": false,
1374 |                   "AllOf": [],
1375 |                   "OneOf": [],
1376 |                   "AnyOf": [],
1377 |                   "Not": null,
1378 |                   "Required": [],
1379 |                   "Items": null,
1380 |                   "MaxItems": null,
1381 |                   "MinItems": null,
1382 |                   "UniqueItems": null,
1383 |                   "Properties": {},
1384 |                   "MaxProperties": null,
1385 |                   "MinProperties": null,
1386 |                   "AdditionalPropertiesAllowed": true,
1387 |                   "AdditionalProperties": null,
1388 |                   "Discriminator": null,
1389 |                   "Example": null,
1390 |                   "Enum": [],
1391 |                   "Nullable": false,
1392 |                   "ExternalDocs": null,
1393 |                   "Deprecated": false,
1394 |                   "Xml": null,
1395 |                   "Extensions": {},
1396 |                   "UnresolvedReference": false,
1397 |                   "Reference": {
1398 |                     "ExternalResource": null,
1399 |                     "Type": 0,
1400 |                     "Id": "BasicQuery",
1401 |                     "IsExternal": false,
1402 |                     "IsLocal": true,
1403 |                     "HostDocument": null,
1404 |                     "ReferenceV3": "#/components/schemas/BasicQuery",
1405 |                     "ReferenceV2": "#/definitions/BasicQuery"
1406 |                   }
1407 |                 },
1408 |                 "Example": null,
1409 |                 "Examples": {},
1410 |                 "Encoding": {},
1411 |                 "Extensions": {}
1412 |               },
1413 |               "text/json": {
1414 |                 "Schema": {
1415 |                   "Title": null,
1416 |                   "Type": null,
1417 |                   "Format": null,
1418 |                   "Description": null,
1419 |                   "Maximum": null,
1420 |                   "ExclusiveMaximum": null,
1421 |                   "Minimum": null,
1422 |                   "ExclusiveMinimum": null,
1423 |                   "MaxLength": null,
1424 |                   "MinLength": null,
1425 |                   "Pattern": null,
1426 |                   "MultipleOf": null,
1427 |                   "Default": null,
1428 |                   "ReadOnly": false,
1429 |                   "WriteOnly": false,
1430 |                   "AllOf": [],
1431 |                   "OneOf": [],
1432 |                   "AnyOf": [],
1433 |                   "Not": null,
1434 |                   "Required": [],
1435 |                   "Items": null,
1436 |                   "MaxItems": null,
1437 |                   "MinItems": null,
1438 |                   "UniqueItems": null,
1439 |                   "Properties": {},
1440 |                   "MaxProperties": null,
1441 |                   "MinProperties": null,
1442 |                   "AdditionalPropertiesAllowed": true,
1443 |                   "AdditionalProperties": null,
1444 |                   "Discriminator": null,
1445 |                   "Example": null,
1446 |                   "Enum": [],
1447 |                   "Nullable": false,
1448 |                   "ExternalDocs": null,
1449 |                   "Deprecated": false,
1450 |                   "Xml": null,
1451 |                   "Extensions": {},
1452 |                   "UnresolvedReference": false,
1453 |                   "Reference": {
1454 |                     "ExternalResource": null,
1455 |                     "Type": 0,
1456 |                     "Id": "BasicQuery",
1457 |                     "IsExternal": false,
1458 |                     "IsLocal": true,
1459 |                     "HostDocument": null,
1460 |                     "ReferenceV3": "#/components/schemas/BasicQuery",
1461 |                     "ReferenceV2": "#/definitions/BasicQuery"
1462 |                   }
1463 |                 },
1464 |                 "Example": null,
1465 |                 "Examples": {},
1466 |                 "Encoding": {},
1467 |                 "Extensions": {}
1468 |               },
1469 |               "application/*\u002Bjson": {
1470 |                 "Schema": {
1471 |                   "Title": null,
1472 |                   "Type": null,
1473 |                   "Format": null,
1474 |                   "Description": null,
1475 |                   "Maximum": null,
1476 |                   "ExclusiveMaximum": null,
1477 |                   "Minimum": null,
1478 |                   "ExclusiveMinimum": null,
1479 |                   "MaxLength": null,
1480 |                   "MinLength": null,
1481 |                   "Pattern": null,
1482 |                   "MultipleOf": null,
1483 |                   "Default": null,
1484 |                   "ReadOnly": false,
1485 |                   "WriteOnly": false,
1486 |                   "AllOf": [],
1487 |                   "OneOf": [],
1488 |                   "AnyOf": [],
1489 |                   "Not": null,
1490 |                   "Required": [],
1491 |                   "Items": null,
1492 |                   "MaxItems": null,
1493 |                   "MinItems": null,
1494 |                   "UniqueItems": null,
1495 |                   "Properties": {},
1496 |                   "MaxProperties": null,
1497 |                   "MinProperties": null,
1498 |                   "AdditionalPropertiesAllowed": true,
1499 |                   "AdditionalProperties": null,
1500 |                   "Discriminator": null,
</content>
<notice>Showing only 1500 of 37214 total lines. Use start_line and end_line if you need to read more</notice>
<list_code_definition_names># final-swagger.json
1--37214 | {
3--11 |   "Info": {
13--7989 |   "Paths": {
14--291 |     "/Auth/LoginLocal": {
17--285 |       "Operations": {
18--284 |         "Post": {
19--28 |           "Tags": [
20--27 |             {
34--210 |           "RequestBody": {
39--208 |             "Content": {
40--95 |               "application/json": {
41--90 |                 "Schema": {
80--89 |                   "Reference": {
96--151 |               "text/json": {
97--146 |                 "Schema": {
136--145 |                   "Reference": {
152--207 |               "application/*\u002Bjson": {
153--202 |                 "Schema": {
192--201 |                   "Reference": {
211--278 |           "Responses": {
212--277 |             "200": {
215--272 |               "Content": {
216--271 |                 "application/json": {
217--266 |                   "Schema": {
256--265 |                     "Reference": {
292--569 |     "/Contract/CreateContract": {
295--563 |       "Operations": {
296--562 |         "Post": {
297--306 |           "Tags": [
298--305 |             {
312--488 |           "RequestBody": {
317--486 |             "Content": {
318--373 |               "application/json": {
319--368 |                 "Schema": {
358--367 |                   "Reference": {
374--429 |               "text/json": {
375--424 |                 "Schema": {
414--423 |                   "Reference": {
430--485 |               "application/*\u002Bjson": {
431--480 |                 "Schema": {
470--479 |                   "Reference": {
489--556 |           "Responses": {
490--555 |             "200": {
493--550 |               "Content": {
494--549 |                 "application/json": {
495--544 |                   "Schema": {
534--543 |                     "Reference": {
570--730 |     "/Contract/GetContractBasic": {
573--724 |       "Operations": {
574--723 |         "Get": {
575--584 |           "Tags": [
576--583 |             {
589--648 |           "Parameters": [
590--647 |             {
602--642 |               "Schema": {
650--717 |           "Responses": {
651--716 |             "200": {
654--711 |               "Content": {
655--710 |                 "application/json": {
656--705 |                   "Schema": {
695--704 |                     "Reference": {
731--891 |     "/Contract/GetContractDetail": {
734--885 |       "Operations": {
735--884 |         "Get": {
736--745 |           "Tags": [
737--744 |             {
750--809 |           "Parameters": [
751--808 |             {
763--803 |               "Schema": {
811--878 |           "Responses": {
812--877 |             "200": {
815--872 |               "Content": {
816--871 |                 "application/json": {
817--866 |                   "Schema": {
856--865 |                     "Reference": {
892--1169 |     "/ContractAccess/CreateContractAccess": {
895--1163 |       "Operations": {
896--1162 |         "Post": {
897--906 |           "Tags": [
898--905 |             {
912--1088 |           "RequestBody": {
917--1086 |             "Content": {
918--973 |               "application/json": {
919--968 |                 "Schema": {
958--967 |                   "Reference": {
974--1029 |               "text/json": {
975--1024 |                 "Schema": {
1014--1023 |                   "Reference": {
1030--1085 |               "application/*\u002Bjson": {
1031--1080 |                 "Schema": {
1070--1079 |                   "Reference": {
1089--1156 |           "Responses": {
1090--1155 |             "200": {
1093--1150 |               "Content": {
1094--1149 |                 "application/json": {
1095--1144 |                   "Schema": {
1134--1143 |                     "Reference": {
1170--1330 |     "/ContractAccess/GetContractAccess": {
1173--1324 |       "Operations": {
1174--1323 |         "Get": {
1175--1184 |           "Tags": [
1176--1183 |             {
1189--1248 |           "Parameters": [
1190--1247 |             {
1202--1242 |               "Schema": {
1250--1317 |           "Responses": {
1251--1316 |             "200": {
1254--1311 |               "Content": {
1255--1310 |                 "application/json": {
1256--1305 |                   "Schema": {
1295--1304 |                     "Reference": {
1331--1608 |     "/ContractAccesses/GetPendingContractAccesses": {
1334--1602 |       "Operations": {
1335--1601 |         "Post": {
1336--1345 |           "Tags": [
1337--1344 |             {
1351--1527 |           "RequestBody": {
1356--1525 |             "Content": {
1357--1412 |               "application/json": {
1358--1407 |                 "Schema": {
1397--1406 |                   "Reference": {
1413--1468 |               "text/json": {
1414--1463 |                 "Schema": {
1453--1462 |                   "Reference": {
1469--1524 |               "application/*\u002Bjson": {
1470--1519 |                 "Schema": {
1509--1518 |                   "Reference": {
1528--1595 |           "Responses": {
1529--1594 |             "200": {
1532--1589 |               "Content": {
1533--1588 |                 "application/json": {
1534--1583 |                   "Schema": {
1573--1582 |                     "Reference": {
1609--1769 |     "/ContractArchive/GetContractArchive": {
1612--1763 |       "Operations": {
1613--1762 |         "Get": {
1614--1623 |           "Tags": [
1615--1622 |             {
1628--1687 |           "Parameters": [
1629--1686 |             {
1641--1681 |               "Schema": {
1689--1756 |           "Responses": {
1690--1755 |             "200": {
1693--1750 |               "Content": {
1694--1749 |                 "application/json": {
1695--1744 |                   "Schema": {
1734--1743 |                     "Reference": {
1770--3224 |     "/ContractArchive/ArchiveContract": {
1773--3218 |       "Operations": {
1774--3217 |         "Get": {
1775--1784 |           "Tags": [
1776--1783 |             {
1789--3142 |           "Parameters": [
1790--1847 |             {
1802--1842 |               "Schema": {
1848--1905 |             {
1860--1900 |               "Schema": {
1906--1963 |             {
1918--1958 |               "Schema": {
1964--2030 |             {
1976--2025 |               "Schema": {
2015--2024 |                 "Reference": {
2031--2088 |             {
2043--2083 |               "Schema": {
2089--2146 |             {
2101--2141 |               "Schema": {
2147--2204 |             {
2159--2199 |               "Schema": {
2205--2271 |             {
2217--2266 |               "Schema": {
2256--2265 |                 "Reference": {
2272--2329 |             {
2284--2324 |               "Schema": {
2330--2387 |             {
2342--2382 |               "Schema": {
2388--2445 |             {
2400--2440 |               "Schema": {
2446--2503 |             {
2458--2498 |               "Schema": {
2504--2561 |             {
2516--2556 |               "Schema": {
2562--2619 |             {
2574--2614 |               "Schema": {
2620--2677 |             {
2632--2672 |               "Schema": {
2678--2735 |             {
2690--2730 |               "Schema": {
2736--2802 |             {
2748--2797 |               "Schema": {
2787--2796 |                 "Reference": {
2803--2860 |             {
2815--2855 |               "Schema": {
2861--2918 |             {
2873--2913 |               "Schema": {
2919--2976 |             {
2931--2971 |               "Schema": {
2977--3043 |             {
2989--3038 |               "Schema": {
3028--3037 |                 "Reference": {
3044--3141 |             {
3056--3136 |               "Schema": {
3077--3117 |                 "Items": {
3144--3211 |           "Responses": {
3145--3210 |             "200": {
3148--3205 |               "Content": {
3149--3204 |                 "application/json": {
3150--3199 |                   "Schema": {
3189--3198 |                     "Reference": {
3225--3385 |     "/ContractExamStage/GetContractExamStages": {
3228--3379 |       "Operations": {
3229--3378 |         "Get": {
3230--3239 |           "Tags": [
3231--3238 |             {
3244--3303 |           "Parameters": [
3245--3302 |             {
3257--3297 |               "Schema": {
3305--3372 |           "Responses": {
3306--3371 |             "200": {
3309--3366 |               "Content": {
3310--3365 |                 "application/json": {
3311--3360 |                   "Schema": {
3350--3359 |                     "Reference": {
3386--3663 |     "/ContractExamStage/ExamineContractStage": {
3389--3657 |       "Operations": {
3390--3656 |         "Post": {
3391--3400 |           "Tags": [
3392--3399 |             {
3406--3582 |           "RequestBody": {
3411--3580 |             "Content": {
3412--3467 |               "application/json": {
3413--3462 |                 "Schema": {
3452--3461 |                   "Reference": {
3468--3523 |               "text/json": {
3469--3518 |                 "Schema": {
3508--3517 |                   "Reference": {
3524--3579 |               "application/*\u002Bjson": {
3525--3574 |                 "Schema": {
3564--3573 |                   "Reference": {
3583--3650 |           "Responses": {
3584--3649 |             "200": {
3587--3644 |               "Content": {
3588--3643 |                 "application/json": {
3589--3638 |                   "Schema": {
3628--3637 |                     "Reference": {
3664--3941 |     "/Contracts/GetContracts": {
3667--3935 |       "Operations": {
3668--3934 |         "Post": {
3669--3678 |           "Tags": [
3670--3677 |             {
3684--3860 |           "RequestBody": {
3689--3858 |             "Content": {
3690--3745 |               "application/json": {
3691--3740 |                 "Schema": {
3730--3739 |                   "Reference": {
3746--3801 |               "text/json": {
3747--3796 |                 "Schema": {
3786--3795 |                   "Reference": {
3802--3857 |               "application/*\u002Bjson": {
3803--3852 |                 "Schema": {
3842--3851 |                   "Reference": {
3861--3928 |           "Responses": {
3862--3927 |             "200": {
3865--3922 |               "Content": {
3866--3921 |                 "application/json": {
3867--3916 |                   "Schema": {
3906--3915 |                     "Reference": {
3942--4219 |     "/Contracts/GetPendingContracts": {
3945--4213 |       "Operations": {
3946--4212 |         "Post": {
3947--3956 |           "Tags": [
3948--3955 |             {
3962--4138 |           "RequestBody": {
3967--4136 |             "Content": {
3968--4023 |               "application/json": {
3969--4018 |                 "Schema": {
4008--4017 |                   "Reference": {
4024--4079 |               "text/json": {
4025--4074 |                 "Schema": {
4064--4073 |                   "Reference": {
4080--4135 |               "application/*\u002Bjson": {
4081--4130 |                 "Schema": {
4120--4129 |                   "Reference": {
4139--4206 |           "Responses": {
4140--4205 |             "200": {
4143--4200 |               "Content": {
4144--4199 |                 "application/json": {
4145--4194 |                   "Schema": {
4184--4193 |                     "Reference": {
4220--4497 |     "/Contracts/GetPermittedContractsOfContractAccess": {
4223--4491 |       "Operations": {
4224--4490 |         "Post": {
4225--4234 |           "Tags": [
4226--4233 |             {
4240--4416 |           "RequestBody": {
4245--4414 |             "Content": {
4246--4301 |               "application/json": {
4247--4296 |                 "Schema": {
4286--4295 |                   "Reference": {
4302--4357 |               "text/json": {
4303--4352 |                 "Schema": {
4342--4351 |                   "Reference": {
4358--4413 |               "application/*\u002Bjson": {
4359--4408 |                 "Schema": {
4398--4407 |                   "Reference": {
4417--4484 |           "Responses": {
4418--4483 |             "200": {
4421--4478 |               "Content": {
4422--4477 |                 "application/json": {
4423--4472 |                   "Schema": {
4462--4471 |                     "Reference": {
4498--4599 |     "/ContractTypes/GetContractTypes": {
4501--4593 |       "Operations": {
4502--4592 |         "Get": {
4503--4512 |           "Tags": [
4504--4511 |             {
4519--4586 |           "Responses": {
4520--4585 |             "200": {
4523--4580 |               "Content": {
4524--4579 |                 "application/json": {
4525--4574 |                   "Schema": {
4564--4573 |                     "Reference": {
4600--4701 |     "/Organizations/GetRequestingUnits": {
4603--4695 |       "Operations": {
4604--4694 |         "Get": {
4605--4614 |           "Tags": [
4606--4613 |             {
4621--4688 |           "Responses": {
4622--4687 |             "200": {
4625--4682 |               "Content": {
4626--4681 |                 "application/json": {
4627--4676 |                   "Schema": {
4666--4675 |                     "Reference": {
4702--4979 |     "/Parties/GetParties": {
4705--4973 |       "Operations": {
4706--4972 |         "Post": {
4707--4716 |           "Tags": [
4708--4715 |             {
4722--4898 |           "RequestBody": {
4727--4896 |             "Content": {
4728--4783 |               "application/json": {
4729--4778 |                 "Schema": {
4768--4777 |                   "Reference": {
4784--4839 |               "text/json": {
4785--4834 |                 "Schema": {
4824--4833 |                   "Reference": {
4840--4895 |               "application/*\u002Bjson": {
4841--4890 |                 "Schema": {
4880--4889 |                   "Reference": {
4899--4966 |           "Responses": {
4900--4965 |             "200": {
4903--4960 |               "Content": {
4904--4959 |                 "application/json": {
4905--4954 |                   "Schema": {
4944--4953 |                     "Reference": {
4980--5281 |     "/ProxyCase/GetProxyCase": {
4983--5275 |       "Operations": {
4984--5274 |         "Get": {
4985--4994 |           "Tags": [
4986--4993 |             {
4999--5058 |           "Parameters": [
5000--5057 |             {
5012--5052 |               "Schema": {
5060--5268 |           "Responses": {
5061--5126 |             "200": {
5064--5121 |               "Content": {
5065--5120 |                 "application/json": {
5066--5115 |                   "Schema": {
5105--5114 |                     "Reference": {
5127--5192 |             "400": {
5130--5187 |               "Content": {
5131--5186 |                 "application/json": {
5132--5181 |                   "Schema": {
5171--5180 |                     "Reference": {
5193--5258 |             "404": {
5196--5253 |               "Content": {
5197--5252 |                 "application/json": {
5198--5247 |                   "Schema": {
5237--5246 |                     "Reference": {
5259--5267 |             "501": {
5282--5634 |     "/ProxyCase/CreateProxyCase": {
5285--5628 |       "Operations": {
5286--5627 |         "Post": {
5287--5296 |           "Tags": [
5288--5295 |             {
5302--5478 |           "RequestBody": {
5307--5476 |             "Content": {
5308--5363 |               "application/json": {
5309--5358 |                 "Schema": {
5348--5357 |                   "Reference": {
5364--5419 |               "text/json": {
5365--5414 |                 "Schema": {
5404--5413 |                   "Reference": {
5420--5475 |               "application/*\u002Bjson": {
5421--5470 |                 "Schema": {
5460--5469 |                   "Reference": {
5479--5621 |           "Responses": {
5480--5545 |             "201": {
5483--5540 |               "Content": {
5484--5539 |                 "application/json": {
5485--5534 |                   "Schema": {
5524--5533 |                     "Reference": {
5546--5611 |             "400": {
5549--5606 |               "Content": {
5550--5605 |                 "application/json": {
5551--5600 |                   "Schema": {
5590--5599 |                     "Reference": {
5612--5620 |             "501": {
5635--5912 |     "/ProxyCase/UpdateProxyCase": {
5638--5906 |       "Operations": {
5639--5905 |         "Post": {
5640--5649 |           "Tags": [
5641--5648 |             {
5655--5831 |           "RequestBody": {
5660--5829 |             "Content": {
5661--5716 |               "application/json": {
5662--5711 |                 "Schema": {
5701--5710 |                   "Reference": {
5717--5772 |               "text/json": {
5718--5767 |                 "Schema": {
5757--5766 |                   "Reference": {
5773--5828 |               "application/*\u002Bjson": {
5774--5823 |                 "Schema": {
5813--5822 |                   "Reference": {
5832--5899 |           "Responses": {
5833--5898 |             "200": {
5836--5893 |               "Content": {
5837--5892 |                 "application/json": {
5838--5887 |                   "Schema": {
5877--5886 |                     "Reference": {
5913--6131 |     "/ProxyCases/GetProxyCases": {
5916--6125 |       "Operations": {
5917--6124 |         "Get": {
5918--5927 |           "Tags": [
5919--5926 |             {
5932--6049 |           "Parameters": [
5933--5990 |             {
5945--5985 |               "Schema": {
5991--6048 |             {
6003--6043 |               "Schema": {
6051--6118 |           "Responses": {
6052--6117 |             "200": {
6055--6112 |               "Content": {
6056--6111 |                 "application/json": {
6057--6106 |                   "Schema": {
6096--6105 |                     "Reference": {
6132--6233 |     "/Signatures/GetSignatures": {
6135--6227 |       "Operations": {
6136--6226 |         "Get": {
6137--6146 |           "Tags": [
6138--6145 |             {
6153--6220 |           "Responses": {
6154--6219 |             "200": {
6157--6214 |               "Content": {
6158--6213 |                 "application/json": {
6159--6208 |                   "Schema": {
6198--6207 |                     "Reference": {
6234--6335 |     "/User/GetUser": {
6237--6329 |       "Operations": {
6238--6328 |         "Get": {
6239--6248 |           "Tags": [
6240--6247 |             {
6255--6322 |           "Responses": {
6256--6321 |             "200": {
6259--6316 |               "Content": {
6260--6315 |                 "application/json": {
6261--6310 |                   "Schema": {
6300--6309 |                     "Reference": {
6336--6613 |     "/User/UpdateUser": {
6339--6607 |       "Operations": {
6340--6606 |         "Post": {
6341--6350 |           "Tags": [
6342--6349 |             {
6356--6532 |           "RequestBody": {
6361--6530 |             "Content": {
6362--6417 |               "application/json": {
6363--6412 |                 "Schema": {
6402--6411 |                   "Reference": {
6418--6473 |               "text/json": {
6419--6468 |                 "Schema": {
6458--6467 |                   "Reference": {
6474--6529 |               "application/*\u002Bjson": {
6475--6524 |                 "Schema": {
6514--6523 |                   "Reference": {
6533--6600 |           "Responses": {
6534--6599 |             "200": {
6537--6594 |               "Content": {
6538--6593 |                 "application/json": {
6539--6588 |                   "Schema": {
6578--6587 |                     "Reference": {
6614--6891 |     "/User/UpdatePassword": {
6617--6885 |       "Operations": {
6618--6884 |         "Post": {
6619--6628 |           "Tags": [
6620--6627 |             {
6634--6810 |           "RequestBody": {
6639--6808 |             "Content": {
6640--6695 |               "application/json": {
6641--6690 |                 "Schema": {
6680--6689 |                   "Reference": {
6696--6751 |               "text/json": {
6697--6746 |                 "Schema": {
6736--6745 |                   "Reference": {
6752--6807 |               "application/*\u002Bjson": {
6753--6802 |                 "Schema": {
6792--6801 |                   "Reference": {
6811--6878 |           "Responses": {
6812--6877 |             "200": {
6815--6872 |               "Content": {
6816--6871 |                 "application/json": {
6817--6866 |                   "Schema": {
6856--6865 |                     "Reference": {
6892--7052 |     "/User/GetPreferedContractColumns": {
6895--7046 |       "Operations": {
6896--7045 |         "Get": {
6897--6906 |           "Tags": [
6898--6905 |             {
6911--6970 |           "Parameters": [
6912--6969 |             {
6924--6964 |               "Schema": {
6972--7039 |           "Responses": {
6973--7038 |             "200": {
6976--7033 |               "Content": {
6977--7032 |                 "application/json": {
6978--7027 |                   "Schema": {
7017--7026 |                     "Reference": {
7053--7330 |     "/User/UpdatePreferredContractColumns": {
7056--7324 |       "Operations": {
7057--7323 |         "Post": {
7058--7067 |           "Tags": [
7059--7066 |             {
7073--7249 |           "RequestBody": {
7078--7247 |             "Content": {
7079--7134 |               "application/json": {
7080--7129 |                 "Schema": {
7119--7128 |                   "Reference": {
7135--7190 |               "text/json": {
7136--7185 |                 "Schema": {
7175--7184 |                   "Reference": {
7191--7246 |               "application/*\u002Bjson": {
7192--7241 |                 "Schema": {
7231--7240 |                   "Reference": {
7250--7317 |           "Responses": {
7251--7316 |             "200": {
7254--7311 |               "Content": {
7255--7310 |                 "application/json": {
7256--7305 |                   "Schema": {
7295--7304 |                     "Reference": {
7331--7432 |     "/User/GetReviewCommentTemplates": {
7334--7426 |       "Operations": {
7335--7425 |         "Get": {
7336--7345 |           "Tags": [
7337--7344 |             {
7352--7419 |           "Responses": {
7353--7418 |             "200": {
7356--7413 |               "Content": {
7357--7412 |                 "application/json": {
7358--7407 |                   "Schema": {
7397--7406 |                     "Reference": {
7433--7710 |     "/Users/GetUsers": {
7436--7704 |       "Operations": {
7437--7703 |         "Post": {
7438--7447 |           "Tags": [
7439--7446 |             {
7453--7629 |           "RequestBody": {
7458--7627 |             "Content": {
7459--7514 |               "application/json": {
7460--7509 |                 "Schema": {
7499--7508 |                   "Reference": {
7515--7570 |               "text/json": {
7516--7565 |                 "Schema": {
7555--7564 |                   "Reference": {
7571--7626 |               "application/*\u002Bjson": {
7572--7621 |                 "Schema": {
7611--7620 |                   "Reference": {
7630--7697 |           "Responses": {
7631--7696 |             "200": {
7634--7691 |               "Content": {
7635--7690 |                 "application/json": {
7636--7685 |                   "Schema": {
7675--7684 |                     "Reference": {
7711--7988 |     "/Users/GetUsersByRole": {
7714--7982 |       "Operations": {
7715--7981 |         "Post": {
7716--7725 |           "Tags": [
7717--7724 |             {
7731--7907 |           "RequestBody": {
7736--7905 |             "Content": {
7737--7792 |               "application/json": {
7738--7787 |                 "Schema": {
7777--7786 |                   "Reference": {
7793--7848 |               "text/json": {
7794--7843 |                 "Schema": {
7833--7842 |                   "Reference": {
7849--7904 |               "application/*\u002Bjson": {
7850--7899 |                 "Schema": {
7889--7898 |                   "Reference": {
7908--7975 |           "Responses": {
7909--7974 |             "200": {
7912--7969 |               "Content": {
7913--7968 |                 "application/json": {
7914--7963 |                   "Schema": {
7953--7962 |                     "Reference": {
7990--37208 |   "Components": {
7991--37198 |     "Schemas": {
7992--8155 |       "AssignedExaminer": {
8017--8140 |         "Properties": {
8018--8058 |           "examStageId": {
8059--8139 |           "examinerLoginIds": {
8080--8120 |             "Items": {
8156--8525 |       "AttachmentInfo": {
8181--8510 |         "Properties": {
8182--8222 |           "attachmentGuid": {
8223--8263 |           "fileName": {
8264--8304 |           "fileType": {
8305--8345 |           "uploader": {
8346--8386 |           "description": {
8387--8427 |           "fileSize": {
8428--8468 |           "uploadDate": {
8469--8509 |           "version": {
8526--8573 |       "AutoRenewType": {
8558--8565 |         "Enum": [
8574--8845 |       "BasicQuery": {
8599--8830 |         "Properties": {
8600--8689 |           "filters": {
8621--8670 |             "Items": {
8660--8669 |               "Reference": {
8690--8779 |           "sorts": {
8711--8760 |             "Items": {
8750--8759 |               "Reference": {
8780--8829 |           "pagination": {
8819--8828 |             "Reference": {
8846--8899 |       "CloseStage": {
8878--8891 |         "Enum": [
8900--9145 |       "CoHandlingExaminer": {
8925--9130 |         "Properties": {
8926--8966 |           "examinerLoginId": {
8967--9007 |           "requirement": {
9008--9088 |           "attachmentGuids": {
9029--9069 |             "Items": {
9089--9129 |           "requiresResult": {
9146--9310 |       "CoHandlingExaminerView": {
9171--9295 |         "Properties": {
9172--9212 |           "examinerLoginId": {
9213--9253 |           "replied": {
9254--9294 |           "required": {
9311--10254 |       "ContractAccessListResult": {
9336--10239 |         "Properties": {
9337--9377 |           "contractId": {
9378--9418 |           "contractGuid": {
9419--9459 |           "createDate": {
9460--9500 |           "applyNo": {
9501--9541 |           "applicantNames": {
9542--9582 |           "currentStage": {
9583--9623 |           "currentStageId": {
9624--9664 |           "currentStageIdList": {
9665--9705 |           "currentExaminerSn": {
9706--9746 |           "currentExaminerId": {
9747--9787 |           "contractAccessTypeSN": {
9788--9828 |           "applicationDate": {
9829--9869 |           "accessStartDate": {
9870--9910 |           "accessEndDate": {
9911--9951 |           "searchStartDate": {
9952--9992 |           "searchEndDate": {
9993--10033 |           "contractAccessDescription": {
10034--10074 |           "contractAccessReason": {
10075--10115 |           "newProcessDay": {
10116--10156 |           "currentHandler": {
10157--10197 |           "batchReviewStatusId": {
10198--10238 |           "contractColumnLink": {
10255--10550 |       "ContractAccessListResultPagedResultView": {
10280--10535 |         "Properties": {
10281--10321 |           "totalCount": {
10322--10362 |           "pageIndex": {
10363--10403 |           "pageSize": {
10404--10444 |           "totalPage": {
10445--10534 |           "data": {
10466--10515 |             "Items": {
10505--10514 |               "Reference": {
10551--10733 |       "ContractAccessListResultPagedResultViewResult": {
10576--10718 |         "Properties": {
10577--10617 |           "success": {
10618--10667 |           "value": {
10657--10666 |             "Reference": {
10668--10717 |           "error": {
10707--10716 |             "Reference": {
10734--10784 |       "ContractAccessType": {
10766--10776 |         "Enum": [
10785--11412 |       "ContractArchiveModel": {
10810--11397 |         "Properties": {
10811--10851 |           "contractGuid": {
10852--10892 |           "saveNo": {
10893--10933 |           "documentNo": {
10934--10974 |           "effectiveDate": {
10975--11024 |           "validPeriod": {
11014--11023 |             "Reference": {
11025--11074 |           "renewal": {
11064--11073 |             "Reference": {
11075--11124 |           "payment": {
11114--11123 |             "Reference": {
11125--11174 |           "stampDuty": {
11164--11173 |             "Reference": {
11175--11215 |           "signMemo": {
11216--11256 |           "closeMemo": {
11257--11306 |           "closeStage": {
11296--11305 |             "Reference": {
11307--11396 |           "attachments": {
11328--11377 |             "Items": {
11367--11376 |               "Reference": {
11413--11595 |       "ContractArchiveModelResult": {
11438--11580 |         "Properties": {
11439--11479 |           "success": {
11480--11529 |           "value": {
11519--11528 |             "Reference": {
11530--11579 |           "error": {
11569--11578 |             "Reference": {
11596--12383 |       "ContractBasicInfoResult": {
11621--12368 |         "Properties": {
11622--11662 |           "contractGuid": {
11663--11703 |           "applyNo": {
11704--11744 |           "currentExamStageId": {
11745--11785 |           "currentExamStatus": {
11786--11826 |           "applicationDateUtc": {
11827--11867 |           "departmentId": {
11868--11908 |           "departmentName": {
11909--11949 |           "recorderUserName": {
11950--11990 |           "applicantUserName": {
11991--12031 |           "documentName": {
12032--12072 |           "contractTypeId": {
12073--12113 |           "contractTypeName": {
12114--12154 |           "requestSummary": {
12155--12195 |           "counterParties": {
12196--12236 |           "receiveNo": {
12237--12277 |           "validDuration": {
12278--12367 |           "attachments": {
12299--12348 |             "Items": {
12338--12347 |               "Reference": {
12384--12566 |       "ContractBasicInfoResultResult": {
12409--12551 |         "Properties": {
12410--12450 |           "success": {
12451--12500 |           "value": {
12490--12499 |             "Reference": {
12501--12550 |           "error": {
12540--12549 |             "Reference": {
12567--13618 |       "ContractDetailInfoResult": {
12592--13603 |         "Properties": {
12593--12633 |           "contractGuid": {
12634--12674 |           "applyNo": {
12675--12715 |           "currentExamStageId": {
12716--12756 |           "currentExamStatus": {
12757--12806 |           "urgencyLevel": {
12796--12805 |             "Reference": {
12807--12847 |           "applicationDateUtc": {
12848--12888 |           "executionDateUtc": {
12889--12929 |           "departmentId": {
12930--12970 |           "departmentName": {
12971--13011 |           "recorderUserName": {
13012--13052 |           "applicantUserName": {
13053--13093 |           "documentName": {
13094--13134 |           "contractTypeId": {
13135--13175 |           "contractTypeName": {
13176--13216 |           "requestSummary": {
13217--13257 |           "counterParties": {
13258--13298 |           "receiveNo": {
13299--13339 |           "validDuration": {
13340--13429 |           "attachments": {
13361--13410 |             "Items": {
13400--13409 |               "Reference": {
13430--13470 |           "contractNote": {
13471--13520 |           "paymentDetail": {
13510--13519 |             "Reference": {
13521--13561 |           "pricingTerms": {
13562--13602 |           "additionalTerms": {
13619--13801 |       "ContractDetailInfoResultResult": {
13644--13786 |         "Properties": {
13645--13685 |           "success": {
13686--13735 |           "value": {
13725--13734 |             "Reference": {
13736--13785 |           "error": {
13775--13784 |             "Reference": {
13802--14056 |       "ContractExamStage": {
13827--14041 |         "Properties": {
13828--13868 |           "examStageId": {
13869--13909 |           "examStageSeq": {
13910--13950 |           "isPassed": {
13951--14040 |           "examiners": {
13972--14021 |             "Items": {
14011--14020 |               "Reference": {
14057--14229 |       "ContractExamStagesResult": {
14082--14214 |         "Properties": {
14083--14123 |           "contractGuid": {
14124--14213 |           "examStages": {
14145--14194 |             "Items": {
14184--14193 |               "Reference": {
14230--14412 |       "ContractExamStagesResultResult": {
14255--14397 |         "Properties": {
14256--14296 |           "success": {
14297--14346 |           "value": {
14336--14345 |             "Reference": {
14347--14396 |           "error": {
14386--14395 |             "Reference": {
14413--14913 |       "ContractExaminer": {
14438--14898 |         "Properties": {
14439--14479 |           "examSeq": {
14480--14520 |           "examStageSeq": {
14521--14561 |           "examinerLoginId": {
14562--14602 |           "examStageId": {
14603--14643 |           "examStage": {
14644--14684 |           "examStatusId": {
14685--14725 |           "examStatus": {
14726--14766 |           "examResultId": {
14767--14807 |           "examResult": {
14808--14897 |           "coHandlingExaminers": {
14829--14878 |             "Items": {
14868--14877 |               "Reference": {
14914--23811 |       "ContractListResult": {
14939--23796 |         "Properties": {
14940--14980 |           "contractId": {
14981--15021 |           "contractGuid": {
15022--15062 |           "createDate": {
15063--15103 |           "documentName": {
15104--15144 |           "branchName": {
15145--15185 |           "fullName": {
15186--15226 |           "contractTypeNames": {
15227--15267 |           "urgentLevel": {
15268--15308 |           "urgentLevelID": {
15309--15349 |           "applyNo": {
15350--15390 |           "receiveNo": {
15391--15431 |           "applicantNames": {
15432--15472 |           "parties": {
15473--15513 |           "currentStage": {
15514--15554 |           "currentStageId": {
15555--15595 |           "currentStageIdList": {
15596--15636 |           "currentExaminerSn": {
15637--15677 |           "currentExaminerId": {
15678--15718 |           "closeStatus": {
15719--15759 |           "requirement": {
15760--15800 |           "realExaminerNames": {
15801--15841 |           "shortName": {
15842--15882 |           "applicationDate": {
15883--15923 |           "receiveDate": {
15924--15964 |           "effectiveDate": {
15965--16005 |           "saveDate": {
16006--16046 |           "examDate": {
16047--16087 |           "provisionDate": {
16088--16128 |           "newProcessDay": {
16129--16169 |           "currentHandler": {
16170--16210 |           "directorExaminerNames": {
16211--16251 |           "dispatcherExaminerNames": {
16252--16292 |           "headExaminerNames": {
16293--16333 |           "bossExaminerNames": {
16334--16374 |           "signExaminerNames": {
16375--16415 |           "closeExaminerNames": {
16416--16456 |           "contacts": {
16457--16497 |           "validDuration": {
16498--16538 |           "otherClause": {
16539--16579 |           "currency": {
16580--16620 |           "cost": {
16621--16661 |           "signDemand": {
16662--16702 |           "companySign": {
16703--16743 |           "saveNo": {
16744--16784 |           "contractTypeCode": {
16785--16825 |           "memo": {
16826--16866 |           "signMemo": {
16867--16907 |           "recorderName": {
16908--16948 |           "costClause": {
16949--16989 |           "documentNo": {
16990--17030 |           "closeMemo": {
17031--17071 |           "contractStampDutyName": {
17072--17112 |           "closeStage": {
17113--17153 |           "attributionRights": {
17154--17194 |           "attributionRightsText": {
17195--17235 |           "confidentialityRequirements": {
17236--17276 |           "confidentialityRequirementsText": {
17277--17317 |           "noInfringementGuarantee": {
17318--17358 |           "noInfringementGuaranteeText": {
17359--17399 |           "batchReviewStatusId": {
17400--17440 |           "contractColumnLink": {
17441--17481 |           "txt01": {
17482--17522 |           "txt02": {
17523--17563 |           "txt03": {
17564--17604 |           "txt04": {
17605--17645 |           "txt05": {
17646--17686 |           "txt06": {
17687--17727 |           "txt07": {
17728--17768 |           "txt08": {
17769--17809 |           "txt09": {
17810--17850 |           "txt10": {
17851--17891 |           "txt11": {
17892--17932 |           "txt12": {
17933--17973 |           "txt13": {
17974--18014 |           "txt14": {
18015--18055 |           "txt15": {
18056--18096 |           "txt16": {
18097--18137 |           "txt17": {
18138--18178 |           "txt18": {
18179--18219 |           "txt19": {
18220--18260 |           "txt20": {
18261--18301 |           "txt21": {
18302--18342 |           "txt22": {
18343--18383 |           "txt23": {
18384--18424 |           "txt24": {
18425--18465 |           "txt25": {
18466--18506 |           "txt26": {
18507--18547 |           "txt27": {
18548--18588 |           "txt28": {
18589--18629 |           "txt29": {
18630--18670 |           "txt30": {
18671--18711 |           "txt31": {
18712--18752 |           "txt32": {
18753--18793 |           "txt33": {
18794--18834 |           "txt34": {
18835--18875 |           "txt35": {
18876--18916 |           "memo01": {
18917--18957 |           "memo02": {
18958--18998 |           "memo03": {
18999--19039 |           "memo04": {
19040--19080 |           "memo05": {
19081--19121 |           "memo06": {
19122--19162 |           "memo07": {
19163--19203 |           "memo08": {
19204--19244 |           "memo09": {
19245--19285 |           "memo10": {
19286--19326 |           "memo11": {
19327--19367 |           "memo12": {
19368--19408 |           "memo13": {
19409--19449 |           "memo14": {
19450--19490 |           "memo15": {
19491--19531 |           "memo16": {
19532--19572 |           "memo17": {
19573--19613 |           "memo18": {
19614--19654 |           "memo19": {
19655--19695 |           "memo20": {
19696--19736 |           "checkBox01": {
19737--19777 |           "checkBox02": {
19778--19818 |           "checkBox03": {
19819--19859 |           "checkBox04": {
19860--19900 |           "checkBox05": {
19901--19941 |           "checkBox06": {
19942--19982 |           "checkBox07": {
19983--20023 |           "checkBox08": {
20024--20064 |           "checkBox09": {
20065--20105 |           "checkBox10": {
20106--20146 |           "checkBox11": {
20147--20187 |           "checkBox12": {
20188--20228 |           "checkBox13": {
20229--20269 |           "checkBox14": {
20270--20310 |           "checkBox15": {
20311--20351 |           "checkBox16": {
20352--20392 |           "checkBox17": {
20393--20433 |           "checkBox18": {
20434--20474 |           "checkBox19": {
20475--20515 |           "checkBox20": {
20516--20556 |           "select01": {
20557--20597 |           "select02": {
20598--20638 |           "select03": {
20639--20679 |           "select04": {
20680--20720 |           "select05": {
20721--20761 |           "select06": {
20762--20802 |           "select07": {
20803--20843 |           "select08": {
20844--20884 |           "select09": {
20885--20925 |           "select10": {
20926--20966 |           "select11": {
20967--21007 |           "select12": {
21008--21048 |           "select13": {
21049--21089 |           "select14": {
21090--21130 |           "select15": {
21131--21171 |           "select16": {
21172--21212 |           "select17": {
21213--21253 |           "select18": {
21254--21294 |           "select19": {
21295--21335 |           "select20": {
21336--21376 |           "int01": {
21377--21417 |           "int02": {
21418--21458 |           "int03": {
21459--21499 |           "int04": {
21500--21540 |           "int05": {
21541--21581 |           "int06": {
21582--21622 |           "int07": {
21623--21663 |           "int08": {
21664--21704 |           "int09": {
21705--21745 |           "int10": {
21746--21786 |           "int11": {
21787--21827 |           "int12": {
21828--21868 |           "int13": {
21869--21909 |           "int14": {
21910--21950 |           "int15": {
21951--21991 |           "int16": {
21992--22032 |           "int17": {
22033--22073 |           "int18": {
22074--22114 |           "int19": {
22115--22155 |           "int20": {
22156--22196 |           "double01": {
22197--22237 |           "double02": {
22238--22278 |           "double03": {
22279--22319 |           "double04": {
22320--22360 |           "double05": {
22361--22401 |           "double06": {
22402--22442 |           "double07": {
22443--22483 |           "double08": {
22484--22524 |           "double09": {
22525--22565 |           "double10": {
22566--22606 |           "double11": {
22607--22647 |           "double12": {
22648--22688 |           "double13": {
22689--22729 |           "double14": {
22730--22770 |           "double15": {
22771--22811 |           "double16": {
22812--22852 |           "double17": {
22853--22893 |           "double18": {
22894--22934 |           "double19": {
22935--22975 |           "double20": {
22976--23016 |           "date01": {
23017--23057 |           "date02": {
23058--23098 |           "date03": {
23099--23139 |           "date04": {
23140--23180 |           "date05": {
23181--23221 |           "date06": {
23222--23262 |           "date07": {
23263--23303 |           "date08": {
23304--23344 |           "date09": {
23345--23385 |           "date10": {
23386--23426 |           "radio01": {
23427--23467 |           "radio02": {
23468--23508 |           "radio03": {
23509--23549 |           "radio04": {
23550--23590 |           "radio05": {
23591--23631 |           "radio06": {
23632--23672 |           "radio07": {
23673--23713 |           "radio08": {
23714--23754 |           "radio09": {
23755--23795 |           "radio10": {
23812--24107 |       "ContractListResultPagedResultView": {
23837--24092 |         "Properties": {
23838--23878 |           "totalCount": {
23879--23919 |           "pageIndex": {
23920--23960 |           "pageSize": {
23961--24001 |           "totalPage": {
24002--24091 |           "data": {
24023--24072 |             "Items": {
24062--24071 |               "Reference": {
24108--24290 |       "ContractListResultPagedResultViewResult": {
24133--24275 |         "Properties": {
24134--24174 |           "success": {
24175--24224 |           "value": {
24214--24223 |             "Reference": {
24225--24274 |           "error": {
24264--24273 |             "Reference": {
24291--24344 |       "ContractListType": {
24323--24336 |         "Enum": [
24345--24550 |       "ContractTypeResult": {
24370--24535 |         "Properties": {
24371--24411 |           "contractTypeId": {
24412--24452 |           "name": {
24453--24493 |           "code": {
24494--24534 |           "mainContractTypeID": {
24551--24773 |       "ContractTypeResultListResult": {
24576--24758 |         "Properties": {
24577--24617 |           "success": {
24618--24707 |           "value": {
24639--24688 |             "Items": {
24678--24687 |               "Reference": {
24708--24757 |           "error": {
24747--24756 |             "Reference": {
24774--25095 |       "ContractsQuery": {
24799--25080 |         "Properties": {
24800--24889 |           "filters": {
24821--24870 |             "Items": {
24860--24869 |               "Reference": {
24890--24979 |           "sorts": {
24911--24960 |             "Items": {
24950--24959 |               "Reference": {
24980--25029 |           "pagination": {
25019--25028 |             "Reference": {
25030--25079 |           "listType": {
25069--25078 |             "Reference": {
25096--25219 |       "CounterParty": {
25121--25204 |         "Properties": {
25122--25162 |           "partyId": {
25163--25203 |           "email": {
25220--25516 |       "CreateContractAccessModel": {
25245--25501 |         "Properties": {
25246--25286 |           "applicantLoginId": {
25287--25336 |           "contractAccessType": {
25326--25335 |             "Reference": {
25337--25377 |           "startAccessDateUtc": {
25378--25418 |           "endAccessDateUtc": {
25419--25459 |           "accessRequestMemo": {
25460--25500 |           "accessReason": {
25517--25640 |       "CreateContractAccessResult": {
25542--25625 |         "Properties": {
25543--25583 |           "applyNo": {
25584--25624 |           "contractGuid": {
25641--25823 |       "CreateContractAccessResultResult": {
25666--25808 |         "Properties": {
25667--25707 |           "success": {
25708--25757 |           "value": {
25747--25756 |             "Reference": {
25758--25807 |           "error": {
25797--25806 |             "Reference": {
25824--26812 |       "CreateContractModel": {
25844--25858 |         "Required": [
25863--26797 |         "Properties": {
25864--25913 |           "urgencyLevel": {
25903--25912 |             "Reference": {
25914--25954 |           "executionDateUtc": {
25955--25995 |           "departmentId": {
25996--26036 |           "applicantLoginId": {
26037--26077 |           "documentName": {
26078--26118 |           "contractTypeId": {
26119--26159 |           "requestSummary": {
26160--26249 |           "counterParties": {
26181--26230 |             "Items": {
26220--26229 |               "Reference": {
26250--26330 |           "requiredSignatures": {
26271--26311 |             "Items": {
26331--26371 |           "partySignatureRequired": {
26372--26412 |           "contractNote": {
26413--26462 |           "paymentDetail": {
26452--26461 |             "Reference": {
26463--26503 |           "pricingTerms": {
26504--26544 |           "additionalTerms": {
26545--26625 |           "directExaminerLoginIds": {
26566--26606 |             "Items": {
26626--26715 |           "coHandlingExaminers": {
26647--26696 |             "Items": {
26686--26695 |               "Reference": {
26716--26796 |           "attachmentGuids": {
26737--26777 |             "Items": {
26813--27099 |       "CreateProxyCaseModel": {
26838--27084 |         "Properties": {
26839--26879 |           "agentLoginId": {
26880--26920 |           "proxyStartTime": {
26921--26961 |           "proxyEndTime": {
26962--27002 |           "proxyReason": {
27003--27083 |           "proxyContractGuids": {
27024--27064 |             "Items": {
27100--27182 |       "Error": {
27125--27167 |         "Properties": {
27126--27166 |           "message": {
27183--27600 |       "ExamineContractStageModel": {
27208--27585 |         "Properties": {
27209--27249 |           "contractGuid": {
27250--27290 |           "examStageId": {
27291--27331 |           "examinerLoginId": {
27332--27372 |           "examStatusId": {
27373--27413 |           "examMemo": {
27414--27494 |           "returnExamStageIds": {
27435--27475 |             "Items": {
27495--27584 |           "assignedExaminers": {
27516--27565 |             "Items": {
27555--27564 |               "Reference": {
27601--27905 |       "Filter": {
27626--27890 |         "Properties": {
27627--27667 |           "field": {
27668--27708 |           "fieldType": {
27709--27789 |           "value": {
27730--27770 |             "Items": {
27790--27839 |           "operator": {
27829--27838 |             "Reference": {
27840--27889 |           "logic": {
27879--27888 |             "Reference": {
27906--28284 |       "GetContractAccessResult": {
27931--28269 |         "Properties": {
27932--27972 |           "contractGuid": {
27973--28013 |           "applyNo": {
28014--28054 |           "applicantLoginId": {
28055--28104 |           "contractAccessType": {
28094--28103 |             "Reference": {
28105--28145 |           "startAccessDateUtc": {
28146--28186 |           "endAccessDateUtc": {
28187--28227 |           "accessRequestMemo": {
28228--28268 |           "accessReason": {
28285--28467 |       "GetContractAccessResultResult": {
28310--28452 |         "Properties": {
28311--28351 |           "success": {
28352--28401 |           "value": {
28391--28400 |             "Reference": {
28402--28451 |           "error": {
28441--28450 |             "Reference": {
28468--28796 |       "GetPermittedContractsOfContractAccessResult": {
28493--28781 |         "Properties": {
28494--28534 |           "contractGuid": {
28535--28575 |           "applyNo": {
28576--28616 |           "applicantLoginId": {
28617--28657 |           "contacts": {
28658--28698 |           "validDuration": {
28699--28739 |           "startAccessDateUtc": {
28740--28780 |           "endAccessDateUtc": {
28797--29092 |       "GetPermittedContractsOfContractAccessResultPagedResultView": {
28822--29077 |         "Properties": {
28823--28863 |           "totalCount": {
28864--28904 |           "pageIndex": {
28905--28945 |           "pageSize": {
28946--28986 |           "totalPage": {
28987--29076 |           "data": {
29008--29057 |             "Items": {
29047--29056 |               "Reference": {
29093--29275 |       "GetPermittedContractsOfContractAccessResultPagedResultViewResult": {
29118--29260 |         "Properties": {
29119--29159 |           "success": {
29160--29209 |           "value": {
29199--29208 |             "Reference": {
29210--29259 |           "error": {
29249--29258 |             "Reference": {
29276--29481 |       "GetRequestingUnitsResult": {
29301--29466 |         "Properties": {
29302--29342 |           "departmentId": {
29343--29383 |           "name": {
29384--29424 |           "code": {
29425--29465 |           "parentDepartmentId": {
29482--29704 |       "GetRequestingUnitsResultListResult": {
29507--29689 |         "Properties": {
29508--29548 |           "success": {
29549--29638 |           "value": {
29570--29619 |             "Items": {
29609--29618 |               "Reference": {
29639--29688 |           "error": {
29678--29687 |             "Reference": {
29705--29752 |       "Logic": {
29737--29744 |         "Enum": [
29753--29879 |       "LoginModel": {
29773--29776 |         "Required": [
29781--29864 |         "Properties": {
29782--29822 |           "loginId": {
29823--29863 |           "password": {
29880--29920 |       "LoginResult": {
29921--30103 |       "LoginResultResult": {
29946--30088 |         "Properties": {
29947--29987 |           "success": {
29988--30037 |           "value": {
30027--30036 |             "Reference": {
30038--30087 |           "error": {
30077--30086 |             "Reference": {
30104--30268 |       "NotificationInfo": {
30129--30253 |         "Properties": {
30130--30170 |           "isEnabled": {
30171--30211 |           "daysBefore": {
30212--30252 |           "frequencyDays": {
30269--30334 |       "Operator": {
30301--30326 |         "Enum": [
30335--30458 |       "Pagination": {
30360--30443 |         "Properties": {
30361--30401 |           "pageIndex": {
30402--30442 |           "pageSize": {
30459--30705 |       "PartyResult": {
30484--30690 |         "Properties": {
30485--30525 |           "partyId": {
30526--30566 |           "name": {
30567--30607 |           "defaultContactEmail": {
30608--30648 |           "phone": {
30649--30689 |           "address": {
30706--31001 |       "PartyResultPagedResultView": {
30731--30986 |         "Properties": {
30732--30772 |           "totalCount": {
30773--30813 |           "pageIndex": {
30814--30854 |           "pageSize": {
30855--30895 |           "totalPage": {
30896--30985 |           "data": {
30917--30966 |             "Items": {
30956--30965 |               "Reference": {
31002--31184 |       "PartyResultPagedResultViewResult": {
31027--31169 |         "Properties": {
31028--31068 |           "success": {
31069--31118 |           "value": {
31108--31117 |             "Reference": {
31119--31168 |           "error": {
31158--31167 |             "Reference": {
31185--31481 |       "PaymentDetail": {
31210--31466 |         "Properties": {
31211--31260 |           "paymentType": {
31250--31259 |             "Reference": {
31261--31301 |           "currency": {
31302--31342 |           "isTaxIncluded": {
31343--31383 |           "amount": {
31384--31424 |           "paymentTerms": {
31425--31465 |           "otherTerms": {
31482--31605 |       "PaymentInfo": {
31507--31590 |         "Properties": {
31508--31548 |           "currency": {
31549--31589 |           "amount": {
31606--31656 |       "PaymentType": {
31638--31648 |         "Enum": [
31657--31943 |       "ProblemDetails": {
31682--31888 |         "Properties": {
31683--31723 |           "type": {
31724--31764 |           "title": {
31765--31805 |           "status": {
31806--31846 |           "detail": {
31847--31887 |           "instance": {
31892--31932 |         "AdditionalProperties": {
31944--32312 |       "ProxyCaseResult": {
31969--32297 |         "Properties": {
31970--32010 |           "proxyCaseId": {
32011--32051 |           "principalLoginId": {
32052--32092 |           "agentLoginId": {
32093--32133 |           "proxyStartTime": {
32134--32174 |           "proxyEndTime": {
32175--32215 |           "proxyReason": {
32216--32296 |           "proxyContractGuids": {
32237--32277 |             "Items": {
32313--32608 |       "ProxyCaseResultPagedResultView": {
32338--32593 |         "Properties": {
32339--32379 |           "totalCount": {
32380--32420 |           "pageIndex": {
32421--32461 |           "pageSize": {
32462--32502 |           "totalPage": {
32503--32592 |           "data": {
32524--32573 |             "Items": {
32563--32572 |               "Reference": {
32609--32791 |       "ProxyCaseResultPagedResultViewResult": {
32634--32776 |         "Properties": {
32635--32675 |           "success": {
32676--32725 |           "value": {
32715--32724 |             "Reference": {
32726--32775 |           "error": {
32765--32774 |             "Reference": {
32792--32974 |       "ProxyCaseResultResult": {
32817--32959 |         "Properties": {
32818--32858 |           "success": {
32859--32908 |           "value": {
32898--32907 |             "Reference": {
32909--32958 |           "error": {
32948--32957 |             "Reference": {
32975--33239 |       "RenewalInfo": {
33000--33224 |         "Properties": {
33001--33050 |           "autoRenewType": {
33040--33049 |             "Reference": {
33051--33091 |           "autoRenewValidEndDate": {
33092--33132 |           "extendPeriodYear": {
33133--33173 |           "extendPeriodMonth": {
33174--33223 |           "notification": {
33213--33222 |             "Reference": {
33240--33317 |       "Role": {
33272--33309 |         "Enum": [
33318--33491 |       "SignatureResult": {
33343--33476 |         "Properties": {
33344--33384 |           "signatureId": {
33385--33434 |           "signatureType": {
33424--33433 |             "Reference": {
33435--33475 |           "signedBy": {
33492--33714 |       "SignatureResultListResult": {
33517--33699 |         "Properties": {
33518--33558 |           "success": {
33559--33648 |           "value": {
33580--33629 |             "Items": {
33619--33628 |               "Reference": {
33649--33698 |           "error": {
33688--33697 |             "Reference": {
33715--33768 |       "SignatureType": {
33747--33760 |         "Enum": [
33769--33901 |       "Sort": {
33794--33886 |         "Properties": {
33795--33835 |           "field": {
33836--33885 |           "sortDirection": {
33875--33884 |             "Reference": {
33902--33949 |       "SortDirection": {
33934--33941 |         "Enum": [
33950--34082 |       "StampDutyInfo": {
33975--34067 |         "Properties": {
33976--34025 |           "stampDutyType": {
34015--34024 |             "Reference": {
34026--34066 |           "description": {
34083--34139 |       "StampDutyType": {
34115--34131 |         "Enum": [
34140--34353 |       "StringListResult": {
34165--34338 |         "Properties": {
34166--34206 |           "success": {
34207--34287 |           "value": {
34228--34268 |             "Items": {
34288--34337 |           "error": {
34327--34336 |             "Reference": {
34354--34522 |       "UpdatePasswordModel": {
34374--34378 |         "Required": [
34383--34507 |         "Properties": {
34384--34424 |           "oldPassword": {
34425--34465 |           "newPassword": {
34466--34506 |           "confirmPassword": {
34523--34563 |       "UpdatePasswordResult": {
34564--34746 |       "UpdatePasswordResultResult": {
34589--34731 |         "Properties": {
34590--34630 |           "success": {
34631--34680 |           "value": {
34670--34679 |             "Reference": {
34681--34730 |           "error": {
34720--34729 |             "Reference": {
34747--34910 |       "UpdatePreferredContractColumnsModel": {
34772--34895 |         "Properties": {
34773--34813 |           "listType": {
34814--34894 |           "columns": {
34835--34875 |             "Items": {
34911--35238 |       "UpdateProxyCaseModel": {
34936--35223 |         "Properties": {
34937--34977 |           "proxyCaseId": {
34978--35018 |           "agentLoginId": {
35019--35059 |           "proxyStartTime": {
35060--35100 |           "proxyEndTime": {
35101--35141 |           "proxyReason": {
35142--35222 |           "proxyContractGuids": {
35163--35203 |             "Items": {
35239--35533 |       "UpdateUserModel": {
35259--35266 |         "Required": [
35271--35518 |         "Properties": {
35272--35312 |           "chineseName": {
35313--35353 |           "englishName": {
35354--35394 |           "email": {
35395--35435 |           "employeeNumber": {
35436--35476 |           "phone": {
35477--35517 |           "address": {
35534--35581 |       "UrgencyLevel": {
35566--35573 |         "Enum": [
35582--35943 |       "UserQuery": {
35607--35928 |         "Properties": {
35608--35697 |           "filters": {
35629--35678 |             "Items": {
35668--35677 |               "Reference": {
35698--35787 |           "sorts": {
35719--35768 |             "Items": {
35758--35767 |               "Reference": {
35788--35837 |           "pagination": {
35827--35836 |             "Reference": {
35838--35927 |           "roles": {
35859--35908 |             "Items": {
35898--35907 |               "Reference": {
35944--36272 |       "UserResult": {
35969--36257 |         "Properties": {
35970--36010 |           "loginId": {
36011--36051 |           "chineseName": {
36052--36092 |           "englishName": {
36093--36133 |           "email": {
36134--36174 |           "employeeNumber": {
36175--36215 |           "phone": {
36216--36256 |           "address": {
36273--36568 |       "UserResultPagedResultView": {
36298--36553 |         "Properties": {
36299--36339 |           "totalCount": {
36340--36380 |           "pageIndex": {
36381--36421 |           "pageSize": {
36422--36462 |           "totalPage": {
36463--36552 |           "data": {
36484--36533 |             "Items": {
36523--36532 |               "Reference": {
36569--36751 |       "UserResultPagedResultViewResult": {
36594--36736 |         "Properties": {
36595--36635 |           "success": {
36636--36685 |           "value": {
36675--36684 |             "Reference": {
36686--36735 |           "error": {
36725--36734 |             "Reference": {
36752--36934 |       "UserResultResult": {
36777--36919 |         "Properties": {
36778--36818 |           "success": {
36819--36868 |           "value": {
36858--36867 |             "Reference": {
36869--36918 |           "error": {
36908--36917 |             "Reference": {
36935--37149 |       "ValidPeriodInfo": {
36960--37134 |         "Properties": {
36961--37010 |           "validPeriodType": {
37000--37009 |             "Reference": {
37011--37051 |           "validStartDate": {
37052--37092 |           "validEndDate": {
37093--37133 |           "duration": {
37150--37197 |       "ValidPeriodType": {
37182--37189 |         "Enum": [
</list_code_definition_names>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:53:39 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
59,743 (30%)

# Current Cost
$0.25

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
我已經查看了 Prisma schema 和 Swagger 定義，現在我對系統有了更全面的了解。讓我查看一下 auth-route.ts 和 user-route.ts 文件，以了解當前的 API 實現情況：
</thinking>

<read_file>
<path>src/routes/auth-route.ts</path>
</read_file>

---

**User:**

[read_file for 'src/routes/auth-route.ts'] Result:
<file><path>src/routes/auth-route.ts</path>
<content lines="1-47">
 1 | /**
 2 |  * 認證相關路由
 3 |  */
 4 | 
 5 | import { Elysia, t } from "elysia";
 6 | import { AUTH_CONFIG } from "../env-manager";
 7 | import { Middleware } from "../middleware/index";
 8 | import { authService } from "../services/auth-service";
 9 | 
10 | // 創建認證路由
11 | export const authRoutes = new Elysia({ prefix: "/auth" })
12 |   .use(Middleware)
13 |   /**
14 |    * 用戶本地登入
15 |    * 路由: /auth/login-local
16 |    * 方法: POST
17 |    * 返回: 登入結果和JWT令牌（通過cookie設置）
18 |    */
19 |   .post(
20 |     "/login-local",
21 |     async ({ body, cookie, jwtSign }) => {
22 |       const result = await authService.loginLocal(body.loginId, body.password);
23 | 
24 |       if (result.success) {
25 |         // 生成 JWT token
26 |         const token = await jwtSign.sign({
27 |           userId: 100, // 這裡應該使用實際的用戶ID
28 |           user: body.loginId,
29 |         });
30 | 
31 |         // 設置 cookie
32 |         cookie?.[AUTH_CONFIG.jwtCookieName]?.set({
33 |           value: token,
34 |           httpOnly: false,
35 |           maxAge: AUTH_CONFIG.cookieMaxAge,
36 |         });
37 |       }
38 | 
39 |       return result;
40 |     },
41 |     {
42 |       body: t.Object({
43 |         loginId: t.String(),
44 |         password: t.String(),
45 |       }),
46 |     },
47 |   );
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:53:53 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
100,845 (50%)

# Current Cost
$0.42

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
現在我來查看 user-route.ts 文件：
</thinking>

<read_file>
<path>src/routes/user-route.ts</path>
</read_file>

---

**User:**

[read_file for 'src/routes/user-route.ts'] Result:
<file><path>src/routes/user-route.ts</path>
<content lines="1-20">
 1 | /**
 2 |  * 用戶相關路由
 3 |  */
 4 | 
 5 | import { Elysia } from "elysia";
 6 | import { Middleware } from "../middleware/index";
 7 | import { userService } from "../services/user-service";
 8 | 
 9 | // 創建用戶路由
10 | export const userRoutes = new Elysia({ prefix: "/user" })
11 |   .use(Middleware)
12 |   /**
13 |    * 獲取當前用戶信息
14 |    * 路由: /user/get-user
15 |    * 方法: GET
16 |    * 返回: 當前登錄用戶的詳細信息
17 |    */
18 |   .get("/get-user", async ({ auth }) => {
19 |     return await userService.getUserById(auth.userId);
20 |   });
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:54:04 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
101,792 (51%)

# Current Cost
$0.46

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 auth-service.ts 文件，了解認證服務的實現：
</thinking>

<read_file>
<path>src/services/auth-service.ts</path>
</read_file>

---

**User:**

[read_file for 'src/services/auth-service.ts'] Result:
<file><path>src/services/auth-service.ts</path>
<content lines="1-61">
 1 | /**
 2 |  * 認證服務
 3 |  * 包含所有與用戶認證相關的業務邏輯
 4 |  */
 5 | 
 6 | import { ERROR_MESSAGES } from "../env-manager";
 7 | import { userRepository } from "../repositories/user-repository";
 8 | import type { ApiResponse } from "../types/user-types";
 9 | import { verifyPassword } from "../utils/password-util";
10 | 
11 | export class AuthService {
12 |   /**
13 |    * 用戶本地登入
14 |    * @param loginId 登入ID
15 |    * @param password 密碼
16 |    * @returns 登入結果響應
17 |    */
18 |   async loginLocal(loginId: string, password: string): Promise<ApiResponse<Record<string, never>>> {
19 |     try {
20 |       // 根據登入ID查找用戶
21 |       const user = await userRepository.findByLoginId(loginId);
22 | 
23 |       // 用戶不存在
24 |       if (!user) {
25 |         return {
26 |           success: false,
27 |           error: {
28 |             message: ERROR_MESSAGES.USER_NOT_FOUND,
29 |           },
30 |         };
31 |       }
32 | 
33 |       // 使用加鹽哈希驗證密碼
34 |       if (!verifyPassword(user.password, password)) {
35 |         return {
36 |           success: false,
37 |           error: {
38 |             message: ERROR_MESSAGES.UNAUTHORIZED,
39 |           },
40 |         };
41 |       }
42 | 
43 |       // 登入成功
44 |       return {
45 |         success: true,
46 |         value: {},
47 |       };
48 |     } catch (error) {
49 |       console.error("用戶登入失敗:", error);
50 |       return {
51 |         success: false,
52 |         error: {
53 |           message: ERROR_MESSAGES.SERVER_ERROR,
54 |         },
55 |       };
56 |     }
57 |   }
58 | }
59 | 
60 | // 導出單例實例
61 | export const authService = new AuthService();
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:54:10 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
102,460 (51%)

# Current Cost
$0.49

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 user-repository.ts 文件，了解用戶數據訪問層的實現：
</thinking>

<read_file>
<path>src/repositories/user-repository.ts</path>
</read_file>

---

**User:**

[read_file for 'src/repositories/user-repository.ts'] Result:
<file><path>src/repositories/user-repository.ts</path>
<content lines="1-77">
 1 | /**
 2 |  * 用戶存儲庫
 3 |  * 負責所有與用戶相關的數據存取操作
 4 |  */
 5 | 
 6 | import type { PrismaClient } from "../../generated/prisma/client";
 7 | import { prisma } from "../prisma-client";
 8 | import type { User } from "../types/user-types";
 9 | 
10 | export class UserRepository {
11 |   /**
12 |    * 構造函數，通過依賴注入接收 Prisma 客戶端
13 |    * @param prisma Prisma 客戶端實例
14 |    */
15 |   constructor(private prisma: PrismaClient) {}
16 | 
17 |   /**
18 |    * 根據用戶 ID 獲取用戶信息
19 |    * @param userId 用戶 ID
20 |    * @returns 用戶信息或 null
21 |    */
22 |   async getUserById(userId: number): Promise<User | null> {
23 |     const user = await this.prisma.user.findUnique({
24 |       where: { UserID: userId },
25 |       select: {
26 |         LoginID: true,
27 |         Name: true,
28 |         EnglishName: true,
29 |         Email: true,
30 |         EmployeeID: true,
31 |         Tel: true,
32 |         Address: true,
33 |       },
34 |     });
35 | 
36 |     if (!user) {
37 |       return null;
38 |     }
39 | 
40 |     return {
41 |       loginId: user.LoginID || "",
42 |       chineseName: user.Name || "",
43 |       englishName: user.EnglishName || "",
44 |       email: user.Email || "",
45 |       employeeNumber: user.EmployeeID || "",
46 |       phone: user.Tel || "",
47 |       address: user.Address || "",
48 |     };
49 |   }
50 | 
51 |   /**
52 |    * 根據登入 ID 查找用戶
53 |    * @param loginId 登入 ID
54 |    * @returns 用戶信息或 null
55 |    */
56 |   async findByLoginId(loginId: string): Promise<{ loginId: string; password: string } | null> {
57 |     const user = await this.prisma.user.findFirst({
58 |       where: { LoginID: loginId },
59 |       select: {
60 |         LoginID: true,
61 |         Password: true,
62 |       },
63 |     });
64 | 
65 |     if (!user) {
66 |       return null;
67 |     }
68 | 
69 |     return {
70 |       loginId: user.LoginID || "",
71 |       password: user.Password || "",
72 |     };
73 |   }
74 | }
75 | 
76 | // 導出單例實例
77 | export const userRepository = new UserRepository(prisma);
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:54:21 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
103,523 (52%)

# Current Cost
$0.52

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 middleware/jwt.ts 文件，了解 JWT 認證中間件的實現：
</thinking>

<read_file>
<path>src/middleware/jwt.ts</path>
</read_file>

---

**User:**

[read_file for 'src/middleware/jwt.ts'] Result:
<file><path>src/middleware/jwt.ts</path>
<content lines="1-16">
 1 | ﻿import { jwt } from "@elysiajs/jwt";
 2 | import { Elysia } from "elysia";
 3 | 
 4 | export const JWTMiddleware = new Elysia({ name: "Middleware.JWT" })
 5 |   .use(
 6 |     jwt({
 7 |       name: "jwtSign",
 8 |       secret: "019657af-c4cb-7ebd-950d-1aac7c126954",
 9 |     }),
10 |   )
11 |   .use(
12 |     jwt({
13 |       name: "jwtVerify",
14 |       secret: "019657af-c4cb-7ebd-950d-1aac7c126954",
15 |     }),
16 |   );
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:54:29 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
104,799 (52%)

# Current Cost
$0.56

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 middleware/index.ts 文件，了解中間件的組織方式：
</thinking>

<read_file>
<path>src/middleware/index.ts</path>
</read_file>

---

**User:**

[read_file for 'src/middleware/index.ts'] Result:
<file><path>src/middleware/index.ts</path>
<content lines="1-11">
 1 | /**
 2 |  * 路由索引
 3 |  * 集中導入和導出所有中間件
 4 |  */
 5 | 
 6 | import { Elysia } from "elysia";
 7 | import { AuthMiddleware } from "./auth";
 8 | import { JWTMiddleware } from "./jwt";
 9 | 
10 | // 集中導出所有中間件
11 | export const Middleware = new Elysia().use(AuthMiddleware).use(JWTMiddleware);
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:54:37 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
105,425 (53%)

# Current Cost
$0.60

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 middleware/auth.ts 文件，了解認證中間件的實現：
</thinking>

<read_file>
<path>src/middleware/auth.ts</path>
</read_file>

---

**User:**

[read_file for 'src/middleware/auth.ts'] Result:
<file><path>src/middleware/auth.ts</path>
<content lines="1-11">
 1 | import { Elysia } from "elysia";
 2 | 
 3 | export const AuthMiddleware = new Elysia({ name: "Middleware.Auth" }).derive(
 4 | 	{ as: "global" },
 5 | 	({ cookie: { session } }) => ({
 6 | 		auth: {
 7 | 			userId: 100,
 8 | 			user: "user",
 9 | 		},
10 | 	}),
11 | );
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:54:45 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
105,978 (53%)

# Current Cost
$0.63

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 src/index.ts 文件，了解應用的入口點和路由組織：
</thinking>

<read_file>
<path>src/index.ts</path>
</read_file>

---

**User:**

[read_file for 'src/index.ts'] Result:
<file><path>src/index.ts</path>
<content lines="1-12">
 1 | import { swagger } from "@elysiajs/swagger";
 2 | import { Elysia } from "elysia";
 3 | import { APP_CONFIG } from "./env-manager";
 4 | import { routes } from "./routes";
 5 | 
 6 | // 創建應用並使用整合後的路由
 7 | const app = new Elysia().use(swagger()).use(routes).listen(APP_CONFIG.PORT);
 8 | 
 9 | console.log("🦊 Elysia is running", {
10 |   listen: `http://${app.server?.hostname}:${app.server?.port}`,
11 |   swagger: `http://${app.server?.hostname}:${app.server?.port}/swagger`,
12 | });
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:54:52 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
106,518 (53%)

# Current Cost
$0.67

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 src/routes/index.ts 文件，了解路由的組織方式：
</thinking>

<read_file>
<path>src/routes/index.ts</path>
</read_file>

---

**User:**

[read_file for 'src/routes/index.ts'] Result:
<file><path>src/routes/index.ts</path>
<content lines="1-11">
 1 | /**
 2 |  * 路由索引
 3 |  * 集中導入和導出所有路由
 4 |  */
 5 | 
 6 | import { Elysia } from "elysia";
 7 | import { authRoutes } from "./auth-route";
 8 | import { userRoutes } from "./user-route";
 9 | 
10 | // 集中導出所有路由
11 | export const routes = new Elysia().use(userRoutes).use(authRoutes);
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:55:03 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
107,124 (54%)

# Current Cost
$0.70

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 src/env-manager.ts 文件，了解環境配置：
</thinking>

<read_file>
<path>src/env-manager.ts</path>
</read_file>

---

**User:**

[read_file for 'src/env-manager.ts'] Result:
<file><path>src/env-manager.ts</path>
<content lines="1-30">
 1 | /**
 2 |  * 環境變數管理器
 3 |  * 集中管理所有應用程序配置和常數
 4 |  */
 5 | 
 6 | // 應用程序配置
 7 | export const APP_CONFIG = {
 8 |   PORT: process.env.PORT || 3000,
 9 |   NODE_ENV: process.env.NODE_ENV || "development",
10 |   API_PREFIX: "/api",
11 | };
12 | 
13 | // JWT 和 Cookie 配置
14 | export const AUTH_CONFIG = {
15 |   jwtCookieName: "jwtToken",
16 |   cookieMaxAge: 7 * 86400, // 7天有效期（秒）
17 |   jwtSecret: process.env.JWT_SECRET || "019657af-c4cb-7ebd-950d-1aac7c126954",
18 | };
19 | 
20 | // 錯誤訊息
21 | export const ERROR_MESSAGES = {
22 |   USER_NOT_FOUND: "找不到用戶",
23 |   UNAUTHORIZED: "未授權的請求",
24 |   SERVER_ERROR: "伺服器內部錯誤",
25 | };
26 | 
27 | // 成功訊息
28 | export const SUCCESS_MESSAGES = {
29 |   USER_FETCHED: "成功獲取用戶信息",
30 | };
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:55:10 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
107,672 (54%)

# Current Cost
$0.74

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 src/utils/password-util.ts 文件，了解密碼處理工具：
</thinking>

<read_file>
<path>src/utils/password-util.ts</path>
</read_file>

---

**User:**

[read_file for 'src/utils/password-util.ts'] Result:
<file><path>src/utils/password-util.ts</path>
<content lines="1-67">
 1 | /**
 2 |  * 密碼工具類
 3 |  * 提供密碼加密和驗證功能
 4 |  */
 5 | 
 6 | import * as crypto from "node:crypto";
 7 | 
 8 | // 鹽值字符串長度
 9 | const SALT_BYTE_LEN = 3;
10 | const SALT_STRING_LEN = Math.ceil(SALT_BYTE_LEN / 3.0) * 4;
11 | 
12 | /**
13 |  * 使用 SHA1 算法對密碼進行哈希
14 |  * @param password 要哈希的密碼
15 |  * @returns 哈希後的密碼
16 |  */
17 | export function hashPassword(password: string): string {
18 |   return crypto.createHash("sha1").update(password).digest("hex").toUpperCase();
19 | }
20 | 
21 | /**
22 |  * 驗證密碼是否匹配
23 |  * @param storedPassword 存儲的加鹽哈希密碼
24 |  * @param inputPassword 用戶輸入的密碼
25 |  * @returns 密碼是否匹配
26 |  */
27 | export function verifyPassword(storedPassword: string, inputPassword: string): boolean {
28 |   try {
29 |     // 從存儲的密碼中提取鹽值和哈希值
30 |     const salt = storedPassword.substring(0, SALT_STRING_LEN);
31 |     const storedHash = storedPassword.substring(SALT_STRING_LEN);
32 | 
33 |     // 將鹽值與輸入的密碼組合
34 |     const saltedPassword = salt + inputPassword;
35 | 
36 |     // 對組合後的密碼進行哈希
37 |     const computedHash = hashPassword(saltedPassword);
38 | 
39 |     // 比較計算出的哈希值與存儲的哈希值
40 |     return storedHash === computedHash;
41 |   } catch (error) {
42 |     console.error("密碼驗證失敗:", error);
43 |     return false;
44 |   }
45 | }
46 | 
47 | /**
48 |  * 生成加鹽哈希密碼
49 |  * @param password 原始密碼
50 |  * @returns 加鹽哈希後的密碼
51 |  */
52 | export function generateSaltedPassword(password: string): string {
53 |   // 生成隨機鹽值
54 |   const salt = crypto
55 |     .randomBytes(SALT_STRING_LEN / 2)
56 |     .toString("hex")
57 |     .substring(0, SALT_STRING_LEN);
58 | 
59 |   // 將鹽值與密碼組合
60 |   const saltedPassword = salt + password;
61 | 
62 |   // 對組合後的密碼進行哈希
63 |   const hash = hashPassword(saltedPassword);
64 | 
65 |   // 返回鹽值+哈希值的組合
66 |   return salt + hash;
67 | }
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:55:22 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
108,486 (54%)

# Current Cost
$0.77

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 src/types/user-types.ts 文件，了解用戶相關的類型定義：
</thinking>

<read_file>
<path>src/types/user-types.ts</path>
</read_file>

---

**User:**

[read_file for 'src/types/user-types.ts'] Result:
<file><path>src/types/user-types.ts</path>
<content lines="1-26">
 1 | /**
 2 |  * 用戶相關類型定義
 3 |  */
 4 | 
 5 | // 用戶基本信息
 6 | export interface User {
 7 | 	loginId: string;
 8 | 	chineseName: string;
 9 | 	englishName: string;
10 | 	email: string;
11 | 	employeeNumber: string;
12 | 	phone: string;
13 | 	address: string;
14 | }
15 | 
16 | // API 響應格式
17 | export interface ApiResponse<T> {
18 | 	success: boolean;
19 | 	value?: T;
20 | 	error?: {
21 | 		message: string;
22 | 	};
23 | }
24 | 
25 | // 用戶 API 響應
26 | export type UserResponse = ApiResponse<User>;
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:55:31 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
109,824 (55%)

# Current Cost
$0.81

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 src/services/user-service.ts 文件，了解用戶服務的實現：
</thinking>

<read_file>
<path>src/services/user-service.ts</path>
</read_file>

---

**User:**

[read_file for 'src/services/user-service.ts'] Result:
<file><path>src/services/user-service.ts</path>
<content lines="1-45">
 1 | /**
 2 |  * 用戶服務
 3 |  * 包含所有與用戶相關的業務邏輯
 4 |  */
 5 | 
 6 | import { ERROR_MESSAGES } from "../env-manager";
 7 | import { userRepository } from "../repositories/user-repository";
 8 | import type { UserResponse } from "../types/user-types";
 9 | 
10 | export class UserService {
11 | 	/**
12 | 	 * 獲取當前登錄用戶信息
13 | 	 * @returns 用戶信息響應
14 | 	 */
15 | 	async getUserById(userId: number): Promise<UserResponse> {
16 | 		try {
17 | 			const user = await userRepository.getUserById(userId);
18 | 
19 | 			if (!user) {
20 | 				return {
21 | 					success: false,
22 | 					error: {
23 | 						message: ERROR_MESSAGES.USER_NOT_FOUND,
24 | 					},
25 | 				};
26 | 			}
27 | 
28 | 			return {
29 | 				success: true,
30 | 				value: user,
31 | 			};
32 | 		} catch (error) {
33 | 			console.error("獲取當前用戶信息失敗:", error);
34 | 			return {
35 | 				success: false,
36 | 				error: {
37 | 					message: ERROR_MESSAGES.SERVER_ERROR,
38 | 				},
39 | 			};
40 | 		}
41 | 	}
42 | }
43 | 
44 | // 導出單例實例
45 | export const userService = new UserService();
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:55:39 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
110,496 (55%)

# Current Cost
$0.85

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 src/prisma-client.ts 文件，了解 Prisma 客戶端的配置：
</thinking>

<read_file>
<path>src/prisma-client.ts</path>
</read_file>

---

**User:**

[read_file for 'src/prisma-client.ts'] Result:
<file><path>src/prisma-client.ts</path>
<content lines="1-6">
1 | import { PrismaClient } from "../generated/prisma/client";
2 | 
3 | // 使用單例模式確保整個應用只有一個 PrismaClient 實例
4 | export const prisma = new PrismaClient();
5 | 
6 | console.log("Prisma 客戶端初始化完成");
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:55:48 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
111,407 (56%)

# Current Cost
$0.89

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 .env 文件，了解環境變數的配置：
</thinking>

<read_file>
<path>.env</path>
</read_file>

---

**User:**

[read_file for '.env'] Result:
<file><path>.env</path>
<content lines="1-1">
1 | DATABASE_URL="sqlserver://ecs2022.ltc:1433;database=LT_ECS_STDCoreDemo;user=ecs_user;password=happyecs;encrypt=true;trustServerCertificate=true"
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:55:55 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
111,898 (56%)

# Current Cost
$0.92

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
讓我查看 taskmaster-plan.md 文件，了解任務計劃：
</thinking>

<read_file>
<path>taskmaster-plan.md</path>
</read_file>

---

**User:**

[read_file for 'taskmaster-plan.md'] Result:
<file><path>taskmaster-plan.md</path>
<content lines="1-108">
  1 | # Taskmaster-AI 初始化計劃
  2 | 
  3 | ## 專案概述
  4 | 
  5 | 這是一個使用 Elysia 框架的後端 API 服務，運行在 Bun 環境中。它使用 Prisma ORM 與 SQL Server 數據庫交互，提供了豐富的功能，包括用戶認證、合約管理、合約審核、文件管理等。專案的 API 定義在 final-swagger.json 中，數據庫結構在 prisma/schema.prisma 中定義。
  6 | 
  7 | ## 初始化步驟
  8 | 
  9 | 1. **創建 PRD 文件**：
 10 |    - 在 `scripts/prd.txt` 中創建產品需求文檔
 11 |    - 基於 final-swagger.json 和 prisma/schema.prisma 詳細描述專案功能和開發計劃
 12 |    - 確保 PRD 完全遵守這些文件定義的數據結構和 API
 13 | 
 14 | 2. **使用 parse-prd 工具生成任務**：
 15 |    - 使用 taskmaster-ai 的 parse-prd 工具解析 PRD 文件
 16 |    - 生成任務列表，確保任務與 API 和數據庫結構一致
 17 | 
 18 | 3. **查看和管理任務**：
 19 |    - 使用 taskmaster-ai 提供的工具查看和管理任務
 20 |    - 根據需要調整任務優先級和依賴關係
 21 | 
 22 | ## PRD 內容大綱
 23 | 
 24 | PRD 文件將包含以下內容，並且將詳細參考 final-swagger.json 和 prisma/schema.prisma：
 25 | 
 26 | ```
 27 | <context>
 28 | # 概述
 29 | 這是一個使用 Elysia 框架的後端 API 服務，運行在 Bun 環境中。它使用 Prisma ORM 與 SQL Server 數據庫交互，提供了豐富的功能，包括用戶認證、合約管理、合約審核、文件管理等。API 定義在 final-swagger.json 中，數據庫結構在 prisma/schema.prisma 中定義。
 30 | 
 31 | # 核心功能
 32 | - 用戶認證和授權（基於 JWT）
 33 | - 合約管理（包括創建、查詢、更新合約）
 34 | - 合約審核流程（包括多階段審核和簽名）
 35 | - 文件管理（附件上傳和管理）
 36 | - API 端點提供（遵循 final-swagger.json 定義）
 37 | 
 38 | # 用戶體驗
 39 | - 提供 RESTful API 接口，遵循 final-swagger.json 定義
 40 | - 使用 JWT 進行身份驗證
 41 | - 提供 Swagger 文檔
 42 | - 確保 API 響應與數據庫模型一致
 43 | </context>
 44 | 
 45 | <PRD>
 46 | # 技術架構
 47 | - Elysia 框架：用於構建 API 服務
 48 | - Prisma ORM：用於數據庫交互，基於 prisma/schema.prisma 定義的模型
 49 | - SQL Server：數據庫，包含 code, data, dbo, join 等多個模式
 50 | - JWT：用於身份驗證
 51 | - Swagger：API 文檔，基於 final-swagger.json
 52 | 
 53 | # 開發路線圖
 54 | ## 階段一：基礎設施
 55 | - 設置基本的 API 結構，遵循 final-swagger.json 定義
 56 | - 實現用戶認證和授權（Auth 相關 API）
 57 | - 設置數據庫連接和模型，確保與 prisma/schema.prisma 一致
 58 | 
 59 | ## 階段二：核心功能
 60 | - 實現合約管理功能（Contract 相關 API）
 61 | - 實現合約審核流程（ContractExaminer 相關功能）
 62 | - 實現文件管理功能（Attachment 相關 API）
 63 | - 實現合約訪問控制（ContractAccess 相關 API）
 64 | 
 65 | ## 階段三：優化和擴展
 66 | - 優化 API 性能
 67 | - 添加更多功能和端點
 68 | - 完善錯誤處理和日誌記錄
 69 | - 確保所有 API 與 final-swagger.json 定義一致
 70 | 
 71 | # 邏輯依賴鏈
 72 | - 首先實現用戶認證和授權（User, Auth API）
 73 | - 然後實現基本的合約管理功能（Contract API）
 74 | - 接著實現合約審核流程（ContractExaminer, ContractExamStage）
 75 | - 然後實現合約訪問控制（ContractAccess API）
 76 | - 最後實現文件管理和其他功能（Attachment, ContractAttachment API）
 77 | 
 78 | # 風險和緩解
 79 | - 數據庫結構複雜：確保使用 Prisma 正確映射和管理，嚴格遵循 schema.prisma
 80 | - API 端點眾多：使用模塊化設計和良好的文檔，確保與 final-swagger.json 一致
 81 | - 性能考慮：優化查詢和使用適當的索引，特別是對於複雜的合約查詢
 82 | 
 83 | # 附錄
 84 | - 數據庫包含多個模式：code, data, dbo, join，詳見 prisma/schema.prisma
 85 | - API 定義詳見 final-swagger.json
 86 | - 主要實體關係：
 87 |   * User <-> Contract
 88 |   * Contract <-> ContractExaminer
 89 |   * Contract <-> ContractAttachment
 90 |   * Contract <-> ContractAccessRelated
 91 | </PRD>
 92 | ```
 93 | 
 94 | ## 下一步行動
 95 | 
 96 | 為了完成 taskmaster-ai 的初始化，我們需要切換到 Code 模式，因為 Architect 模式只能編輯 Markdown 文件。在 Code 模式下，我們將：
 97 | 
 98 | 1. 創建 `scripts/prd.txt` 文件，確保其內容詳細參考 final-swagger.json 和 prisma/schema.prisma
 99 | 2. 使用 taskmaster-ai 的 parse-prd 工具生成任務
100 | 3. 查看和管理生成的任務，確保它們與 API 和數據庫結構一致
101 | 
102 | ```mermaid
103 | graph TD
104 |     A[初始化 taskmaster-ai] --> B[創建參考 swagger 和 prisma 的 PRD 文件]
105 |     B --> C[使用 parse-prd 工具]
106 |     C --> D[生成任務]
107 |     D --> E[查看和管理任務]
108 |     E --> F[確保任務與 API 和數據庫結構一致]
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:56:10 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
112,346 (56%)

# Current Cost
$0.96

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
現在我已經查看了項目的主要文件，包括：
1. 產品需求文檔 (PRD)
2. Prisma 數據庫模型
3. Swagger API 定義
4. 現有的代碼結構和實現

基於這些信息，我可以幫助用戶完善 PRD 文件，使其更加詳細和全面。現有的 PRD 已經包含了基本的技術架構、開發路線圖、邏輯依賴鏈和風險緩解策略，但可以進一步完善以下方面：

1. 更詳細的功能需求描述
2. 更具體的用戶故事和使用場景
3. 更詳細的技術實現細節
4. 更明確的驗收標準
5. 更詳細的項目時間線和里程碑

我將基於現有的 PRD 和項目文件，提供一個更完善的 PRD 版本。
</thinking>

# 產品需求文檔 (PRD) 完善建議

我已經詳細分析了您的專案，包括現有的 PRD、Prisma 數據庫模型、Swagger API 定義以及代碼實現。以下是我對 PRD 的完善建議，使其更加全面和詳細。

## 1. 產品概述部分完善

現有的概述已經很好，但可以增加以下內容：

```
<context>
# 概述
這是一個使用 Elysia 框架的後端 API 服務，運行在 Bun 環境中。它使用 Prisma ORM 與 SQL Server 數據庫交互，提供了豐富的功能，包括用戶認證、合約管理、合約審核流程、文件管理等。API 定義在 final-swagger.json 中，數據庫結構在 prisma/schema.prisma 中定義。

# 業務背景
本系統旨在提供一個全面的合約管理解決方案，支持企業內部的合約創建、審核、簽署和管理流程。系統將幫助企業規範合約處理流程，提高工作效率，並確保合約處理的合規性和安全性。

# 核心功能
- 用戶認證和授權（基於 JWT）
- 合約管理（創建、查詢、更新合約）
- 合約審核流程（多階段審核和簽名）
- 文件管理（附件上傳和管理）
- 合約訪問控制（管理合約的訪問權限）
- 代理案例管理（處理用戶代理關係）
- API 端點提供（遵循 final-swagger.json 定義）

# 用戶體驗
- 提供 RESTful API 接口，遵循 final-swagger.json 定義
- 使用 JWT 進行身份驗證
- 提供 Swagger 文檔
- 確保 API 響應與數據庫模型一致
- 提供統一的錯誤處理和響應格式
</context>
```

## 2. 技術架構部分完善

```
# 技術架構
- Elysia 框架：用於構建 API 服務，提供路由、中間件和請求處理功能
- Bun 運行環境：高性能 JavaScript/TypeScript 運行時
- Prisma ORM：用於數據庫交互，基於 prisma/schema.prisma 定義的模型
- SQL Server：數據庫，包含 code, data, dbo, join 等多個模式
- JWT：用於身份驗證和授權
- Swagger：API 文檔，基於 final-swagger.json
- 分層架構：
  * 路由層 (routes)：處理 HTTP 請求和響應
  * 中間件層 (middleware)：提供認證、日誌等橫切關注點
  * 服務層 (services)：實現業務邏輯
  * 存儲庫層 (repositories)：處理數據訪問
  * 工具層 (utils)：提供通用功能
```

## 3. 功能需求部分完善

增加更詳細的功能需求描述：

```
# 功能需求

## 用戶認證與授權
- 用戶本地登入 (POST /Auth/LoginLocal)
  * 驗證用戶憑證並生成 JWT 令牌
  * 設置 Cookie 以維持會話
- 獲取當前用戶信息 (GET /User/GetUser)
  * 返回當前登錄用戶的詳細信息
- 更新用戶信息 (POST /User/UpdateUser)
  * 允許用戶更新個人資料
- 更新密碼 (POST /User/UpdatePassword)
  * 允許用戶更改密碼
- 基於 JWT 的訪問控制
  * 保護需要認證的 API 端點
  * 驗證用戶權限

## 合約管理
- 創建合約 (POST /Contract/CreateContract)
  * 支持創建新合約並設置基本信息
  * 支持添加合約相關方
  * 支持設置合約條款和條件
- 獲取合約基本信息 (GET /Contract/GetContractBasic)
  * 根據合約 GUID 獲取基本信息
- 獲取合約詳細信息 (GET /Contract/GetContractDetail)
  * 根據合約 GUID 獲取完整詳細信息
- 查詢合約列表 (POST /Contracts/GetContracts)
  * 支持分頁、排序和過濾
- 查詢待處理合約 (POST /Contracts/GetPendingContracts)
  * 獲取需要用戶處理的合約

## 合約審核流程
- 獲取合約審核階段 (GET /ContractExamStage/GetContractExamStages)
  * 獲取特定合約的審核階段信息
- 審核合約階段 (POST /ContractExamStage/ExamineContractStage)
  * 允許審核人員審核合約階段
  * 支持添加審核意見
  * 支持設置審核結果

## 文件管理
- 支持合約附件上傳和管理
- 支持文件版本控制
- 支持文件類型驗證和安全檢查

## 合約訪問控制
- 創建合約訪問申請 (POST /ContractAccess/CreateContractAccess)
  * 允許用戶申請訪問特定合約
- 獲取合約訪問詳情 (GET /ContractAccess/GetContractAccess)
  * 查詢特定合約的訪問申請
- 獲取待審核的合約訪問申請 (POST /ContractAccesses/GetPendingContractAccesses)
  * 獲取需要審核的訪問申請列表

## 代理案例管理
- 創建代理案例 (POST /ProxyCase/CreateProxyCase)
  * 設置代理關係，允許一個用戶代表另一個用戶處理合約
- 更新代理案例 (POST /ProxyCase/UpdateProxyCase)
  * 修改現有代理關係
- 獲取代理案例 (GET /ProxyCase/GetProxyCase)
  * 查詢特定代理案例的詳情
```

## 4. 非功能需求部分完善

增加非功能需求部分：

```
# 非功能需求

## 性能要求
- API 響應時間：大多數 API 請求應在 500ms 內完成
- 系統應能同時處理至少 100 個並發用戶
- 數據庫查詢應優化，特別是對於複雜的合約查詢

## 安全要求
- 所有密碼必須使用加鹽哈希存儲
- JWT 令牌應有適當的過期時間
- 敏感數據傳輸應使用 HTTPS
- 實現適當的訪問控制，確保用戶只能訪問授權的資源

## 可擴展性要求
- 系統架構應支持未來功能擴展
- 數據庫設計應考慮未來數據增長
- API 設計應遵循 RESTful 原則，便於集成和擴展

## 可用性要求
- 系統應提供清晰的錯誤消息
- API 文檔應完整且易於理解
- 系統日誌應詳細記錄錯誤和異常情況
```

## 5. 開發路線圖完善

```
# 開發路線圖

## 階段一：基礎設施（2週）
- 設置基本的 API 結構，遵循 final-swagger.json 定義
- 實現用戶認證和授權（Auth 相關 API）
  * 實現 JWT 中間件
  * 實現登入 API
  * 實現用戶信息 API
- 設置數據庫連接和模型，確保與 prisma/schema.prisma 一致
  * 配置 Prisma 客戶端
  * 實現基本的數據訪問層

## 階段二：核心功能（4週）
- 實現合約管理功能（Contract 相關 API）
  * 創建合約 API
  * 查詢合約 API
  * 更新合約 API
- 實現合約審核流程（ContractExaminer 相關功能）
  * 審核階段管理
  * 審核流程控制
  * 審核結果處理
- 實現文件管理功能（Attachment 相關 API）
  * 文件上傳
  * 文件版本控制
  * 文件安全檢查
- 實現合約訪問控制（ContractAccess 相關 API）
  * 訪問申請
  * 訪問審核
  * 訪問權限控制

## 階段三：優化和擴展（2週）
- 優化 API 性能
  * 實現查詢緩存
  * 優化數據庫查詢
- 添加更多功能和端點
  * 實現代理案例管理
  * 實現合約歸檔功能
- 完善錯誤處理和日誌記錄
  * 統一錯誤響應格式
  * 實現詳細日誌記錄
- 確保所有 API 與 final-swagger.json 定義一致
  * 全面測試 API 端點
  * 驗證 API 響應格式
```

## 6. 驗收標準部分新增

```
# 驗收標準

## 功能驗收標準
- 所有 API 端點必須按照 final-swagger.json 定義實現
- 用戶認證流程必須正確工作，包括登入、JWT 生成和驗證
- 合約管理功能必須支持創建、查詢和更新操作
- 合約審核流程必須支持多階段審核和簽名
- 文件管理功能必須支持上傳、下載和版本控制
- 合約訪問控制必須正確實施權限檢查

## 性能驗收標準
- API 響應時間必須符合性能要求
- 系統必須能夠處理指定的並發用戶數
- 數據庫查詢必須優化，避免 N+1 查詢問題

## 質量驗收標準
- 代碼必須遵循項目的編碼規範
- 必須有適當的單元測試和集成測試
- 系統必須有完整的錯誤處理機制
- API 文檔必須完整且與實際實現一致
```

## 7. 技術實現細節部分新增

```
# 技術實現細節

## 認證與授權實現
- 使用 JWT 進行身份驗證
- JWT 令牌包含用戶 ID 和角色信息
- 使用中間件驗證 JWT 令牌
- 密碼使用 SHA1 加鹽哈希存儲

## 數據庫交互
- 使用 Prisma ORM 進行數據庫操作
- 遵循存儲庫模式分離數據訪問邏輯
- 使用事務確保數據一致性
- 實現適當的錯誤處理和重試機制

## API 實現
- 使用 Elysia 框架定義路由和中間件
- 實現統一的請求驗證
- 實現統一的響應格式
- 使用 Swagger 提供 API 文檔

## 錯誤處理
- 實現全局錯誤處理中間件
- 定義標準錯誤響應格式
- 記錄詳細的錯誤日誌
- 提供友好的錯誤消息
```

## 8. 風險和緩解策略完善

```
# 風險和緩解策略

## 數據庫結構複雜
- 風險：多模式數據庫結構增加了映射和管理的複雜性
- 緩解：使用 Prisma 的 multiSchema 功能正確映射和管理，嚴格遵循 schema.prisma
- 緩解：實現全面的單元測試和集成測試，確保數據庫操作正確

## API 端點眾多
- 風險：大量 API 端點增加了維護和一致性的難度
- 緩解：使用模塊化設計和良好的文檔，確保與 final-swagger.json 一致
- 緩解：實現自動化測試，驗證 API 響應與文檔一致

## 性能考慮
- 風險：複雜的合約查詢可能導致性能問題
- 緩解：優化查詢和使用適當的索引，特別是對於複雜的合約查詢
- 緩解：實現查詢緩存，減少數據庫負載
- 緩解：進行性能測試，識別和解決瓶頸

## 安全風險
- 風險：敏感合約數據可能被未授權訪問
- 緩解：實現嚴格的訪問控制和權限檢查
- 緩解：使用 HTTPS 保護數據傳輸
- 緩解：定期進行安全審計和漏洞掃描
```

## 9. 附錄部分完善

```
# 附錄

## 數據庫結構
- 數據庫包含多個模式：code, data, dbo, join，詳見 prisma/schema.prisma
- 主要表格：
  * User：用戶信息
  * Contract：合約信息
  * ContractExaminer：合約審核人員
  * ContractAttachment：合約附件
  * ContractAccessRelated：合約訪問關係

## API 定義
- API 定義詳見 final-swagger.json
- 主要 API 組：
  * Auth：認證相關 API
  * User：用戶相關 API
  * Contract：合約相關 API
  * ContractExamStage：合約審核階段相關 API
  * ContractAccess：合約訪問相關 API
  * ProxyCase：代理案例相關 API

## 主要實體關係
- User <-> Contract：用戶創建和管理合約
- Contract <-> ContractExaminer：合約與審核人員關係
- Contract <-> ContractAttachment：合約與附件關係
- Contract <-> ContractAccessRelated：合約與訪問關係
- User <-> ActingEntry：用戶與代理關係

## 技術依賴
- Elysia：Web 框架
- Prisma：ORM 工具
- JWT：身份驗證
- SQL Server：數據庫
```

## 下一步建議

完善 PRD 後，我建議您使用 taskmaster-ai 的 parse-prd 工具來解析 PRD 並生成任務。這將幫助您更好地組織和管理開發工作。具體步驟如下：

1. 將完善後的 PRD 保存到 `scripts/prd.txt` 文件中
2. 使用以下命令初始化 taskmaster-ai 項目（如果尚未初始化）：
   ```
   npx -y task-master-ai initialize
   ```
3. 使用 parse-prd 工具解析 PRD 並生成任務：
   ```
   npx -y task-master-ai parse-prd
   ```
4. 查看和管理生成的任務：
   ```
   npx -y task-master-ai get-tasks
   ```

您可以根據需要調整任務優先級、依賴關係和詳細信息，確保它們與您的開發計劃一致。

您希望我幫您實施這些 PRD 完善建議嗎？或者您有其他方面需要進一步完善？

---

**User:**

[ERROR] You did not use a tool in your previous response! Please retry with a tool use.

# Reminder: Instructions for Tool Use

Tool uses are formatted using XML-style tags. The tool name is enclosed in opening and closing tags, and each parameter is similarly enclosed within its own set of tags. Here's the structure:

<tool_name>
<parameter1_name>value1</parameter1_name>
<parameter2_name>value2</parameter2_name>
...
</tool_name>

For example:

<attempt_completion>
<result>
I have completed the task...
</result>
</attempt_completion>

Always adhere to this format for all tool uses to ensure proper parsing and execution.

# Next Steps

If you have completed the user's task, use the attempt_completion tool. 
If you require additional information from the user, use the ask_followup_question tool. 
Otherwise, if you have not completed the task and do not need additional information, then proceed with the next step of the task. 
(This is an automated message, so do not respond to it conversationally.)
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,scripts/prd.txt,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 11:57:35 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
119,927 (60%)

# Current Cost
$1.08

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
我需要使用工具來完成這個任務。我已經分析了用戶的需求，他們希望完善現有的 PRD。我將使用 write_to_file 工具來更新 scripts/prd.txt 文件，提供一個更完善的 PRD 版本。
</thinking>

<write_to_file>
<path>scripts/prd.txt</path>
<content>
<context>
# 概述
這是一個使用 Elysia 框架的後端 API 服務，運行在 Bun 環境中。它使用 Prisma ORM 與 SQL Server 數據庫交互，提供了豐富的功能，包括用戶認證、合約管理、合約審核流程、文件管理等。API 定義在 final-swagger.json 中，數據庫結構在 prisma/schema.prisma 中定義。

# 業務背景
本系統旨在提供一個全面的合約管理解決方案，支持企業內部的合約創建、審核、簽署和管理流程。系統將幫助企業規範合約處理流程，提高工作效率，並確保合約處理的合規性和安全性。

# 核心功能
- 用戶認證和授權（基於 JWT）
- 合約管理（創建、查詢、更新合約）
- 合約審核流程（多階段審核和簽名）
- 文件管理（附件上傳和管理）
- 合約訪問控制（管理合約的訪問權限）
- 代理案例管理（處理用戶代理關係）
- API 端點提供（遵循 final-swagger.json 定義）

# 用戶體驗
- 提供 RESTful API 接口，遵循 final-swagger.json 定義
- 使用 JWT 進行身份驗證
- 提供 Swagger 文檔
- 確保 API 響應與數據庫模型一致
- 提供統一的錯誤處理和響應格式
</context>

<PRD>
# 技術架構
- Elysia 框架：用於構建 API 服務，提供路由、中間件和請求處理功能
- Bun 運行環境：高性能 JavaScript/TypeScript 運行時
- Prisma ORM：用於數據庫交互，基於 prisma/schema.prisma 定義的模型
- SQL Server：數據庫，包含 code, data, dbo, join 等多個模式
- JWT：用於身份驗證和授權
- Swagger：API 文檔，基於 final-swagger.json
- 分層架構：
  * 路由層 (routes)：處理 HTTP 請求和響應
  * 中間件層 (middleware)：提供認證、日誌等橫切關注點
  * 服務層 (services)：實現業務邏輯
  * 存儲庫層 (repositories)：處理數據訪問
  * 工具層 (utils)：提供通用功能

# 功能需求

## 用戶認證與授權
- 用戶本地登入 (POST /Auth/LoginLocal)
  * 驗證用戶憑證並生成 JWT 令牌
  * 設置 Cookie 以維持會話
- 獲取當前用戶信息 (GET /User/GetUser)
  * 返回當前登錄用戶的詳細信息
- 更新用戶信息 (POST /User/UpdateUser)
  * 允許用戶更新個人資料
- 更新密碼 (POST /User/UpdatePassword)
  * 允許用戶更改密碼
- 基於 JWT 的訪問控制
  * 保護需要認證的 API 端點
  * 驗證用戶權限

## 合約管理
- 創建合約 (POST /Contract/CreateContract)
  * 支持創建新合約並設置基本信息
  * 支持添加合約相關方
  * 支持設置合約條款和條件
- 獲取合約基本信息 (GET /Contract/GetContractBasic)
  * 根據合約 GUID 獲取基本信息
- 獲取合約詳細信息 (GET /Contract/GetContractDetail)
  * 根據合約 GUID 獲取完整詳細信息
- 查詢合約列表 (POST /Contracts/GetContracts)
  * 支持分頁、排序和過濾
- 查詢待處理合約 (POST /Contracts/GetPendingContracts)
  * 獲取需要用戶處理的合約

## 合約審核流程
- 獲取合約審核階段 (GET /ContractExamStage/GetContractExamStages)
  * 獲取特定合約的審核階段信息
- 審核合約階段 (POST /ContractExamStage/ExamineContractStage)
  * 允許審核人員審核合約階段
  * 支持添加審核意見
  * 支持設置審核結果

## 文件管理
- 支持合約附件上傳和管理
- 支持文件版本控制
- 支持文件類型驗證和安全檢查

## 合約訪問控制
- 創建合約訪問申請 (POST /ContractAccess/CreateContractAccess)
  * 允許用戶申請訪問特定合約
- 獲取合約訪問詳情 (GET /ContractAccess/GetContractAccess)
  * 查詢特定合約的訪問申請
- 獲取待審核的合約訪問申請 (POST /ContractAccesses/GetPendingContractAccesses)
  * 獲取需要審核的訪問申請列表

## 代理案例管理
- 創建代理案例 (POST /ProxyCase/CreateProxyCase)
  * 設置代理關係，允許一個用戶代表另一個用戶處理合約
- 更新代理案例 (POST /ProxyCase/UpdateProxyCase)
  * 修改現有代理關係
- 獲取代理案例 (GET /ProxyCase/GetProxyCase)
  * 查詢特定代理案例的詳情

# 非功能需求

## 性能要求
- API 響應時間：大多數 API 請求應在 500ms 內完成
- 系統應能同時處理至少 100 個並發用戶
- 數據庫查詢應優化，特別是對於複雜的合約查詢

## 安全要求
- 所有密碼必須使用加鹽哈希存儲
- JWT 令牌應有適當的過期時間
- 敏感數據傳輸應使用 HTTPS
- 實現適當的訪問控制，確保用戶只能訪問授權的資源

## 可擴展性要求
- 系統架構應支持未來功能擴展
- 數據庫設計應考慮未來數據增長
- API 設計應遵循 RESTful 原則，便於集成和擴展

## 可用性要求
- 系統應提供清晰的錯誤消息
- API 文檔應完整且易於理解
- 系統日誌應詳細記錄錯誤和異常情況

# 開發路線圖

## 階段一：基礎設施（2週）
- 設置基本的 API 結構，遵循 final-swagger.json 定義
- 實現用戶認證和授權（Auth 相關 API）
  * 實現 JWT 中間件
  * 實現登入 API
  * 實現用戶信息 API
- 設置數據庫連接和模型，確保與 prisma/schema.prisma 一致
  * 配置 Prisma 客戶端
  * 實現基本的數據訪問層

## 階段二：核心功能（4週）
- 實現合約管理功能（Contract 相關 API）
  * 創建合約 API
  * 查詢合約 API
  * 更新合約 API
- 實現合約審核流程（ContractExaminer 相關功能）
  * 審核階段管理
  * 審核流程控制
  * 審核結果處理
- 實現文件管理功能（Attachment 相關 API）
  * 文件上傳
  * 文件版本控制
  * 文件安全檢查
- 實現合約訪問控制（ContractAccess 相關 API）
  * 訪問申請
  * 訪問審核
  * 訪問權限控制

## 階段三：優化和擴展（2週）
- 優化 API 性能
  * 實現查詢緩存
  * 優化數據庫查詢
- 添加更多功能和端點
  * 實現代理案例管理
  * 實現合約歸檔功能
- 完善錯誤處理和日誌記錄
  * 統一錯誤響應格式
  * 實現詳細日誌記錄
- 確保所有 API 與 final-swagger.json 定義一致
  * 全面測試 API 端點
  * 驗證 API 響應格式

# 邏輯依賴鏈
- 首先實現用戶認證和授權（User, Auth API）
- 然後實現基本的合約管理功能（Contract API）
- 接著實現合約審核流程（ContractExaminer, ContractExamStage）
- 然後實現合約訪問控制（ContractAccess API）
- 最後實現文件管理和其他功能（Attachment, ContractAttachment API）

# 驗收標準

## 功能驗收標準
- 所有 API 端點必須按照 final-swagger.json 定義實現
- 用戶認證流程必須正確工作，包括登入、JWT 生成和驗證
- 合約管理功能必須支持創建、查詢和更新操作
- 合約審核流程必須支持多階段審核和簽名
- 文件管理功能必須支持上傳、下載和版本控制
- 合約訪問控制必須正確實施權限檢查

## 性能驗收標準
- API 響應時間必須符合性能要求
- 系統必須能夠處理指定的並發用戶數
- 數據庫查詢必須優化，避免 N+1 查詢問題

## 質量驗收標準
- 代碼必須遵循項目的編碼規範
- 必須有適當的單元測試和集成測試
- 系統必須有完整的錯誤處理機制
- API 文檔必須完整且與實際實現一致

# 技術實現細節

## 認證與授權實現
- 使用 JWT 進行身份驗證
- JWT 令牌包含用戶 ID 和角色信息
- 使用中間件驗證 JWT 令牌
- 密碼使用 SHA1 加鹽哈希存儲

## 數據庫交互
- 使用 Prisma ORM 進行數據庫操作
- 遵循存儲庫模式分離數據訪問邏輯
- 使用事務確保數據一致性
- 實現適當的錯誤處理和重試機制

## API 實現
- 使用 Elysia 框架定義路由和中間件
- 實現統一的請求驗證
- 實現統一的響應格式
- 使用 Swagger 提供 API 文檔

## 錯誤處理
- 實現全局錯誤處理中間件
- 定義標準錯誤響應格式
- 記錄詳細的錯誤日誌
- 提供友好的錯誤消息

# 風險和緩解策略

## 數據庫結構複雜
- 風險：多模式數據庫結構增加了映射和管理的複雜性
- 緩解：使用 Prisma 的 multiSchema 功能正確映射和管理，嚴格遵循 schema.prisma
- 緩解：實現全面的單元測試和集成測試，確保數據庫操作正確

## API 端點眾多
- 風險：大量 API 端點增加了維護和一致性的難度
- 緩解：使用模塊化設計和良好的文檔，確保與 final-swagger.json 一致
- 緩解：實現自動化測試，驗證 API 響應與文檔一致

## 性能考慮
- 風險：複雜的合約查詢可能導致性能問題
- 緩解：優化查詢和使用適當的索引，特別是對於複雜的合約查詢
- 緩解：實現查詢緩存，減少數據庫負載
- 緩解：進行性能測試，識別和解決瓶頸

## 安全風險
- 風險：敏感合約數據可能被未授權訪問
- 緩解：實現嚴格的訪問控制和權限檢查
- 緩解：使用 HTTPS 保護數據傳輸
- 緩解：定期進行安全審計和漏洞掃描

# 附錄

## 數據庫結構
- 數據庫包含多個模式：code, data, dbo, join，詳見 prisma/schema.prisma
- 主要表格：
  * User：用戶信息
  * Contract：合約信息
  * ContractExaminer：合約審核人員
  * ContractAttachment：合約附件
  * ContractAccessRelated：合約訪問關係

## API 定義
- API 定義詳見 final-swagger.json
- 主要 API 組：
  * Auth：認證相關 API
  * User：用戶相關 API
  * Contract：合約相關 API
  * ContractExamStage：合約審核階段相關 API
  * ContractAccess：合約訪問相關 API
  * ProxyCase：代理案例相關 API

## 主要實體關係
- User <-> Contract：用戶創建和管理合約
- Contract <-> ContractExaminer：合約與審核人員關係
- Contract <-> ContractAttachment：合約與附件關係
- Contract <-> ContractAccessRelated：合約與訪問關係
- User <-> ActingEntry：用戶與代理關係

## 技術依賴
- Elysia：Web 框架
- Prisma：ORM 工具
- JWT：身份驗證
- SQL Server：數據庫
</PRD>
</content>
<line_count>240</line_count>
</write_to_file>

---

**User:**

[write_to_file for 'scripts/prd.txt'] Result:
The content was successfully saved to scripts/prd.txt.
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Recently Modified Files
These files have been modified since you last accessed them (file was just edited so you may need to re-read it before editing):
scripts/prd.txt

# Current Time
4/22/2025, 11:58:45 AM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
124,787 (62%)

# Current Cost
$1.20

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
我已經成功更新了 scripts/prd.txt 文件，提供了一個更完善的 PRD 版本。現在我應該向用戶解釋我做了哪些改進，並建議下一步行動。我將使用 ask_followup_question 工具來詢問用戶是否希望使用 taskmaster-ai 的 parse-prd 工具來解析這個 PRD 並生成任務。
</thinking>

<ask_followup_question>
<question>我已經完善了 PRD 文件，增加了更詳細的功能需求、非功能需求、驗收標準、技術實現細節等內容。這個 PRD 現在更加全面和結構化，可以更好地指導開發工作。您希望現在使用 taskmaster-ai 的 parse-prd 工具來解析這個 PRD 並生成任務嗎？</question>
<follow_up>
<suggest>
是的，請幫我使用 taskmaster-ai 的 parse-prd 工具解析 PRD 並生成任務
</suggest>
<suggest>
不，我想先查看一下完善後的 PRD 內容，然後再決定下一步
</suggest>
<suggest>
我想先了解一下 taskmaster-ai 的 parse-prd 工具的使用方法和效果
</suggest>
</follow_up>
</ask_followup_question>

---

**User:**

[ask_followup_question for '我已經完善了 PRD 文件，增加了更詳細的功能需求、非功能需求、驗收標準、技術實現細節等內容。這個 PRD 現在更加全面和結構化，可以更好地指導開發工作。您希望現在使用 taskmaster-ai 的 parse-prd 工具來解析這個 PRD 並生成任務嗎？'] Result:
<answer>
繼續修改 PRD

使用 Kebab Case 命名所有資料夾和文件和路徑
path:  routes/user.ts
API route ex: <group>/<action>-<Name>
</answer>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 12:02:15 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
125,556 (63%)

# Current Cost
$1.26

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
用戶希望我繼續修改 PRD，並提到要使用 Kebab Case 命名所有資料夾和文件和路徑，例如 routes/user.ts 而不是 routes/user-route.ts，以及 API 路由應該遵循 <group>/<action>-<Name> 的格式。我需要更新 PRD 文件以反映這些命名規範。
</thinking>

<read_file>
<path>scripts/prd.txt</path>
</read_file>

---

**User:**

[read_file for 'scripts/prd.txt'] Result:
The user denied this operation and provided the following feedback:
<feedback>
不好意思 的確是使用 user-route.ts
全部都是 Kebab Case  , api 路徑也是
</feedback>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 12:03:18 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
126,192 (63%)

# Current Cost
$1.30

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
用戶澄清了命名規範：文件名確實是使用 Kebab Case，如 user-route.ts，而 API 路徑也是使用 Kebab Case。我需要確保 PRD 中的 API 路徑遵循 Kebab Case 命名規範。讓我再次嘗試讀取 PRD 文件，然後進行修改。
</thinking>

<read_file>
<path>scripts/prd.txt</path>
</read_file>

---

**User:**

[read_file for 'scripts/prd.txt'] Result:
<file><path>scripts/prd.txt</path>
<content lines="1-277">
  1 | <context>
  2 | # 概述
  3 | 這是一個使用 Elysia 框架的後端 API 服務，運行在 Bun 環境中。它使用 Prisma ORM 與 SQL Server 數據庫交互，提供了豐富的功能，包括用戶認證、合約管理、合約審核流程、文件管理等。API 定義在 final-swagger.json 中，數據庫結構在 prisma/schema.prisma 中定義。
  4 | 
  5 | # 業務背景
  6 | 本系統旨在提供一個全面的合約管理解決方案，支持企業內部的合約創建、審核、簽署和管理流程。系統將幫助企業規範合約處理流程，提高工作效率，並確保合約處理的合規性和安全性。
  7 | 
  8 | # 核心功能
  9 | - 用戶認證和授權（基於 JWT）
 10 | - 合約管理（創建、查詢、更新合約）
 11 | - 合約審核流程（多階段審核和簽名）
 12 | - 文件管理（附件上傳和管理）
 13 | - 合約訪問控制（管理合約的訪問權限）
 14 | - 代理案例管理（處理用戶代理關係）
 15 | - API 端點提供（遵循 final-swagger.json 定義）
 16 | 
 17 | # 用戶體驗
 18 | - 提供 RESTful API 接口，遵循 final-swagger.json 定義
 19 | - 使用 JWT 進行身份驗證
 20 | - 提供 Swagger 文檔
 21 | - 確保 API 響應與數據庫模型一致
 22 | - 提供統一的錯誤處理和響應格式
 23 | </context>
 24 | 
 25 | <PRD>
 26 | # 技術架構
 27 | - Elysia 框架：用於構建 API 服務，提供路由、中間件和請求處理功能
 28 | - Bun 運行環境：高性能 JavaScript/TypeScript 運行時
 29 | - Prisma ORM：用於數據庫交互，基於 prisma/schema.prisma 定義的模型
 30 | - SQL Server：數據庫，包含 code, data, dbo, join 等多個模式
 31 | - JWT：用於身份驗證和授權
 32 | - Swagger：API 文檔，基於 final-swagger.json
 33 | - 分層架構：
 34 |   * 路由層 (routes)：處理 HTTP 請求和響應
 35 |   * 中間件層 (middleware)：提供認證、日誌等橫切關注點
 36 |   * 服務層 (services)：實現業務邏輯
 37 |   * 存儲庫層 (repositories)：處理數據訪問
 38 |   * 工具層 (utils)：提供通用功能
 39 | 
 40 | # 功能需求
 41 | 
 42 | ## 用戶認證與授權
 43 | - 用戶本地登入 (POST /Auth/LoginLocal)
 44 |   * 驗證用戶憑證並生成 JWT 令牌
 45 |   * 設置 Cookie 以維持會話
 46 | - 獲取當前用戶信息 (GET /User/GetUser)
 47 |   * 返回當前登錄用戶的詳細信息
 48 | - 更新用戶信息 (POST /User/UpdateUser)
 49 |   * 允許用戶更新個人資料
 50 | - 更新密碼 (POST /User/UpdatePassword)
 51 |   * 允許用戶更改密碼
 52 | - 基於 JWT 的訪問控制
 53 |   * 保護需要認證的 API 端點
 54 |   * 驗證用戶權限
 55 | 
 56 | ## 合約管理
 57 | - 創建合約 (POST /Contract/CreateContract)
 58 |   * 支持創建新合約並設置基本信息
 59 |   * 支持添加合約相關方
 60 |   * 支持設置合約條款和條件
 61 | - 獲取合約基本信息 (GET /Contract/GetContractBasic)
 62 |   * 根據合約 GUID 獲取基本信息
 63 | - 獲取合約詳細信息 (GET /Contract/GetContractDetail)
 64 |   * 根據合約 GUID 獲取完整詳細信息
 65 | - 查詢合約列表 (POST /Contracts/GetContracts)
 66 |   * 支持分頁、排序和過濾
 67 | - 查詢待處理合約 (POST /Contracts/GetPendingContracts)
 68 |   * 獲取需要用戶處理的合約
 69 | 
 70 | ## 合約審核流程
 71 | - 獲取合約審核階段 (GET /ContractExamStage/GetContractExamStages)
 72 |   * 獲取特定合約的審核階段信息
 73 | - 審核合約階段 (POST /ContractExamStage/ExamineContractStage)
 74 |   * 允許審核人員審核合約階段
 75 |   * 支持添加審核意見
 76 |   * 支持設置審核結果
 77 | 
 78 | ## 文件管理
 79 | - 支持合約附件上傳和管理
 80 | - 支持文件版本控制
 81 | - 支持文件類型驗證和安全檢查
 82 | 
 83 | ## 合約訪問控制
 84 | - 創建合約訪問申請 (POST /ContractAccess/CreateContractAccess)
 85 |   * 允許用戶申請訪問特定合約
 86 | - 獲取合約訪問詳情 (GET /ContractAccess/GetContractAccess)
 87 |   * 查詢特定合約的訪問申請
 88 | - 獲取待審核的合約訪問申請 (POST /ContractAccesses/GetPendingContractAccesses)
 89 |   * 獲取需要審核的訪問申請列表
 90 | 
 91 | ## 代理案例管理
 92 | - 創建代理案例 (POST /ProxyCase/CreateProxyCase)
 93 |   * 設置代理關係，允許一個用戶代表另一個用戶處理合約
 94 | - 更新代理案例 (POST /ProxyCase/UpdateProxyCase)
 95 |   * 修改現有代理關係
 96 | - 獲取代理案例 (GET /ProxyCase/GetProxyCase)
 97 |   * 查詢特定代理案例的詳情
 98 | 
 99 | # 非功能需求
100 | 
101 | ## 性能要求
102 | - API 響應時間：大多數 API 請求應在 500ms 內完成
103 | - 系統應能同時處理至少 100 個並發用戶
104 | - 數據庫查詢應優化，特別是對於複雜的合約查詢
105 | 
106 | ## 安全要求
107 | - 所有密碼必須使用加鹽哈希存儲
108 | - JWT 令牌應有適當的過期時間
109 | - 敏感數據傳輸應使用 HTTPS
110 | - 實現適當的訪問控制，確保用戶只能訪問授權的資源
111 | 
112 | ## 可擴展性要求
113 | - 系統架構應支持未來功能擴展
114 | - 數據庫設計應考慮未來數據增長
115 | - API 設計應遵循 RESTful 原則，便於集成和擴展
116 | 
117 | ## 可用性要求
118 | - 系統應提供清晰的錯誤消息
119 | - API 文檔應完整且易於理解
120 | - 系統日誌應詳細記錄錯誤和異常情況
121 | 
122 | # 開發路線圖
123 | 
124 | ## 階段一：基礎設施（2週）
125 | - 設置基本的 API 結構，遵循 final-swagger.json 定義
126 | - 實現用戶認證和授權（Auth 相關 API）
127 |   * 實現 JWT 中間件
128 |   * 實現登入 API
129 |   * 實現用戶信息 API
130 | - 設置數據庫連接和模型，確保與 prisma/schema.prisma 一致
131 |   * 配置 Prisma 客戶端
132 |   * 實現基本的數據訪問層
133 | 
134 | ## 階段二：核心功能（4週）
135 | - 實現合約管理功能（Contract 相關 API）
136 |   * 創建合約 API
137 |   * 查詢合約 API
138 |   * 更新合約 API
139 | - 實現合約審核流程（ContractExaminer 相關功能）
140 |   * 審核階段管理
141 |   * 審核流程控制
142 |   * 審核結果處理
143 | - 實現文件管理功能（Attachment 相關 API）
144 |   * 文件上傳
145 |   * 文件版本控制
146 |   * 文件安全檢查
147 | - 實現合約訪問控制（ContractAccess 相關 API）
148 |   * 訪問申請
149 |   * 訪問審核
150 |   * 訪問權限控制
151 | 
152 | ## 階段三：優化和擴展（2週）
153 | - 優化 API 性能
154 |   * 實現查詢緩存
155 |   * 優化數據庫查詢
156 | - 添加更多功能和端點
157 |   * 實現代理案例管理
158 |   * 實現合約歸檔功能
159 | - 完善錯誤處理和日誌記錄
160 |   * 統一錯誤響應格式
161 |   * 實現詳細日誌記錄
162 | - 確保所有 API 與 final-swagger.json 定義一致
163 |   * 全面測試 API 端點
164 |   * 驗證 API 響應格式
165 | 
166 | # 邏輯依賴鏈
167 | - 首先實現用戶認證和授權（User, Auth API）
168 | - 然後實現基本的合約管理功能（Contract API）
169 | - 接著實現合約審核流程（ContractExaminer, ContractExamStage）
170 | - 然後實現合約訪問控制（ContractAccess API）
171 | - 最後實現文件管理和其他功能（Attachment, ContractAttachment API）
172 | 
173 | # 驗收標準
174 | 
175 | ## 功能驗收標準
176 | - 所有 API 端點必須按照 final-swagger.json 定義實現
177 | - 用戶認證流程必須正確工作，包括登入、JWT 生成和驗證
178 | - 合約管理功能必須支持創建、查詢和更新操作
179 | - 合約審核流程必須支持多階段審核和簽名
180 | - 文件管理功能必須支持上傳、下載和版本控制
181 | - 合約訪問控制必須正確實施權限檢查
182 | 
183 | ## 性能驗收標準
184 | - API 響應時間必須符合性能要求
185 | - 系統必須能夠處理指定的並發用戶數
186 | - 數據庫查詢必須優化，避免 N+1 查詢問題
187 | 
188 | ## 質量驗收標準
189 | - 代碼必須遵循項目的編碼規範
190 | - 必須有適當的單元測試和集成測試
191 | - 系統必須有完整的錯誤處理機制
192 | - API 文檔必須完整且與實際實現一致
193 | 
194 | # 技術實現細節
195 | 
196 | ## 認證與授權實現
197 | - 使用 JWT 進行身份驗證
198 | - JWT 令牌包含用戶 ID 和角色信息
199 | - 使用中間件驗證 JWT 令牌
200 | - 密碼使用 SHA1 加鹽哈希存儲
201 | 
202 | ## 數據庫交互
203 | - 使用 Prisma ORM 進行數據庫操作
204 | - 遵循存儲庫模式分離數據訪問邏輯
205 | - 使用事務確保數據一致性
206 | - 實現適當的錯誤處理和重試機制
207 | 
208 | ## API 實現
209 | - 使用 Elysia 框架定義路由和中間件
210 | - 實現統一的請求驗證
211 | - 實現統一的響應格式
212 | - 使用 Swagger 提供 API 文檔
213 | 
214 | ## 錯誤處理
215 | - 實現全局錯誤處理中間件
216 | - 定義標準錯誤響應格式
217 | - 記錄詳細的錯誤日誌
218 | - 提供友好的錯誤消息
219 | 
220 | # 風險和緩解策略
221 | 
222 | ## 數據庫結構複雜
223 | - 風險：多模式數據庫結構增加了映射和管理的複雜性
224 | - 緩解：使用 Prisma 的 multiSchema 功能正確映射和管理，嚴格遵循 schema.prisma
225 | - 緩解：實現全面的單元測試和集成測試，確保數據庫操作正確
226 | 
227 | ## API 端點眾多
228 | - 風險：大量 API 端點增加了維護和一致性的難度
229 | - 緩解：使用模塊化設計和良好的文檔，確保與 final-swagger.json 一致
230 | - 緩解：實現自動化測試，驗證 API 響應與文檔一致
231 | 
232 | ## 性能考慮
233 | - 風險：複雜的合約查詢可能導致性能問題
234 | - 緩解：優化查詢和使用適當的索引，特別是對於複雜的合約查詢
235 | - 緩解：實現查詢緩存，減少數據庫負載
236 | - 緩解：進行性能測試，識別和解決瓶頸
237 | 
238 | ## 安全風險
239 | - 風險：敏感合約數據可能被未授權訪問
240 | - 緩解：實現嚴格的訪問控制和權限檢查
241 | - 緩解：使用 HTTPS 保護數據傳輸
242 | - 緩解：定期進行安全審計和漏洞掃描
243 | 
244 | # 附錄
245 | 
246 | ## 數據庫結構
247 | - 數據庫包含多個模式：code, data, dbo, join，詳見 prisma/schema.prisma
248 | - 主要表格：
249 |   * User：用戶信息
250 |   * Contract：合約信息
251 |   * ContractExaminer：合約審核人員
252 |   * ContractAttachment：合約附件
253 |   * ContractAccessRelated：合約訪問關係
254 | 
255 | ## API 定義
256 | - API 定義詳見 final-swagger.json
257 | - 主要 API 組：
258 |   * Auth：認證相關 API
259 |   * User：用戶相關 API
260 |   * Contract：合約相關 API
261 |   * ContractExamStage：合約審核階段相關 API
262 |   * ContractAccess：合約訪問相關 API
263 |   * ProxyCase：代理案例相關 API
264 | 
265 | ## 主要實體關係
266 | - User <-> Contract：用戶創建和管理合約
267 | - Contract <-> ContractExaminer：合約與審核人員關係
268 | - Contract <-> ContractAttachment：合約與附件關係
269 | - Contract <-> ContractAccessRelated：合約與訪問關係
270 | - User <-> ActingEntry：用戶與代理關係
271 | 
272 | ## 技術依賴
273 | - Elysia：Web 框架
274 | - Prisma：ORM 工具
275 | - JWT：身份驗證
276 | - SQL Server：數據庫
277 | </PRD>
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 12:03:35 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
126,698 (63%)

# Current Cost
$1.34

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
我需要修改 PRD 文件中的 API 路徑，確保它們遵循 Kebab Case 命名規範。根據用戶的反饋，文件名確實是使用 Kebab Case（如 user-route.ts），而 API 路徑也應該使用 Kebab Case。

目前 PRD 中的 API 路徑使用的是 PascalCase（如 /Auth/LoginLocal），我需要將它們改為 Kebab Case（如 /auth/login-local）。

我將修改 PRD 文件中的所有 API 路徑，確保它們遵循 Kebab Case 命名規範。
</thinking>

<write_to_file>
<path>scripts/prd.txt</path>
<content>
<context>
# 概述
這是一個使用 Elysia 框架的後端 API 服務，運行在 Bun 環境中。它使用 Prisma ORM 與 SQL Server 數據庫交互，提供了豐富的功能，包括用戶認證、合約管理、合約審核流程、文件管理等。API 定義在 final-swagger.json 中，數據庫結構在 prisma/schema.prisma 中定義。

# 業務背景
本系統旨在提供一個全面的合約管理解決方案，支持企業內部的合約創建、審核、簽署和管理流程。系統將幫助企業規範合約處理流程，提高工作效率，並確保合約處理的合規性和安全性。

# 核心功能
- 用戶認證和授權（基於 JWT）
- 合約管理（創建、查詢、更新合約）
- 合約審核流程（多階段審核和簽名）
- 文件管理（附件上傳和管理）
- 合約訪問控制（管理合約的訪問權限）
- 代理案例管理（處理用戶代理關係）
- API 端點提供（遵循 final-swagger.json 定義）

# 用戶體驗
- 提供 RESTful API 接口，遵循 final-swagger.json 定義
- 使用 JWT 進行身份驗證
- 提供 Swagger 文檔
- 確保 API 響應與數據庫模型一致
- 提供統一的錯誤處理和響應格式
</context>

<PRD>
# 技術架構
- Elysia 框架：用於構建 API 服務，提供路由、中間件和請求處理功能
- Bun 運行環境：高性能 JavaScript/TypeScript 運行時
- Prisma ORM：用於數據庫交互，基於 prisma/schema.prisma 定義的模型
- SQL Server：數據庫，包含 code, data, dbo, join 等多個模式
- JWT：用於身份驗證和授權
- Swagger：API 文檔，基於 final-swagger.json
- 分層架構：
  * 路由層 (routes)：處理 HTTP 請求和響應
  * 中間件層 (middleware)：提供認證、日誌等橫切關注點
  * 服務層 (services)：實現業務邏輯
  * 存儲庫層 (repositories)：處理數據訪問
  * 工具層 (utils)：提供通用功能

# 命名規範
- 文件和目錄命名：使用 Kebab Case（如 user-route.ts, password-util.ts）
- API 路徑命名：使用 Kebab Case（如 /auth/login-local, /user/get-user）
- 代碼變量命名：使用 camelCase
- 類和接口命名：使用 PascalCase
- 常量命名：使用 UPPER_SNAKE_CASE

# 功能需求

## 用戶認證與授權
- 用戶本地登入 (POST /auth/login-local)
  * 驗證用戶憑證並生成 JWT 令牌
  * 設置 Cookie 以維持會話
- 獲取當前用戶信息 (GET /user/get-user)
  * 返回當前登錄用戶的詳細信息
- 更新用戶信息 (POST /user/update-user)
  * 允許用戶更新個人資料
- 更新密碼 (POST /user/update-password)
  * 允許用戶更改密碼
- 基於 JWT 的訪問控制
  * 保護需要認證的 API 端點
  * 驗證用戶權限

## 合約管理
- 創建合約 (POST /contract/create-contract)
  * 支持創建新合約並設置基本信息
  * 支持添加合約相關方
  * 支持設置合約條款和條件
- 獲取合約基本信息 (GET /contract/get-contract-basic)
  * 根據合約 GUID 獲取基本信息
- 獲取合約詳細信息 (GET /contract/get-contract-detail)
  * 根據合約 GUID 獲取完整詳細信息
- 查詢合約列表 (POST /contracts/get-contracts)
  * 支持分頁、排序和過濾
- 查詢待處理合約 (POST /contracts/get-pending-contracts)
  * 獲取需要用戶處理的合約

## 合約審核流程
- 獲取合約審核階段 (GET /contract-exam-stage/get-contract-exam-stages)
  * 獲取特定合約的審核階段信息
- 審核合約階段 (POST /contract-exam-stage/examine-contract-stage)
  * 允許審核人員審核合約階段
  * 支持添加審核意見
  * 支持設置審核結果

## 文件管理
- 支持合約附件上傳和管理
- 支持文件版本控制
- 支持文件類型驗證和安全檢查

## 合約訪問控制
- 創建合約訪問申請 (POST /contract-access/create-contract-access)
  * 允許用戶申請訪問特定合約
- 獲取合約訪問詳情 (GET /contract-access/get-contract-access)
  * 查詢特定合約的訪問申請
- 獲取待審核的合約訪問申請 (POST /contract-accesses/get-pending-contract-accesses)
  * 獲取需要審核的訪問申請列表

## 代理案例管理
- 創建代理案例 (POST /proxy-case/create-proxy-case)
  * 設置代理關係，允許一個用戶代表另一個用戶處理合約
- 更新代理案例 (POST /proxy-case/update-proxy-case)
  * 修改現有代理關係
- 獲取代理案例 (GET /proxy-case/get-proxy-case)
  * 查詢特定代理案例的詳情

# 非功能需求

## 性能要求
- API 響應時間：大多數 API 請求應在 500ms 內完成
- 系統應能同時處理至少 100 個並發用戶
- 數據庫查詢應優化，特別是對於複雜的合約查詢

## 安全要求
- 所有密碼必須使用加鹽哈希存儲
- JWT 令牌應有適當的過期時間
- 敏感數據傳輸應使用 HTTPS
- 實現適當的訪問控制，確保用戶只能訪問授權的資源

## 可擴展性要求
- 系統架構應支持未來功能擴展
- 數據庫設計應考慮未來數據增長
- API 設計應遵循 RESTful 原則，便於集成和擴展

## 可用性要求
- 系統應提供清晰的錯誤消息
- API 文檔應完整且易於理解
- 系統日誌應詳細記錄錯誤和異常情況

# 開發路線圖

## 階段一：基礎設施（2週）
- 設置基本的 API 結構，遵循 final-swagger.json 定義
- 實現用戶認證和授權（Auth 相關 API）
  * 實現 JWT 中間件
  * 實現登入 API
  * 實現用戶信息 API
- 設置數據庫連接和模型，確保與 prisma/schema.prisma 一致
  * 配置 Prisma 客戶端
  * 實現基本的數據訪問層

## 階段二：核心功能（4週）
- 實現合約管理功能（Contract 相關 API）
  * 創建合約 API
  * 查詢合約 API
  * 更新合約 API
- 實現合約審核流程（ContractExaminer 相關功能）
  * 審核階段管理
  * 審核流程控制
  * 審核結果處理
- 實現文件管理功能（Attachment 相關 API）
  * 文件上傳
  * 文件版本控制
  * 文件安全檢查
- 實現合約訪問控制（ContractAccess 相關 API）
  * 訪問申請
  * 訪問審核
  * 訪問權限控制

## 階段三：優化和擴展（2週）
- 優化 API 性能
  * 實現查詢緩存
  * 優化數據庫查詢
- 添加更多功能和端點
  * 實現代理案例管理
  * 實現合約歸檔功能
- 完善錯誤處理和日誌記錄
  * 統一錯誤響應格式
  * 實現詳細日誌記錄
- 確保所有 API 與 final-swagger.json 定義一致
  * 全面測試 API 端點
  * 驗證 API 響應格式

# 邏輯依賴鏈
- 首先實現用戶認證和授權（User, Auth API）
- 然後實現基本的合約管理功能（Contract API）
- 接著實現合約審核流程（ContractExaminer, ContractExamStage）
- 然後實現合約訪問控制（ContractAccess API）
- 最後實現文件管理和其他功能（Attachment, ContractAttachment API）

# 驗收標準

## 功能驗收標準
- 所有 API 端點必須按照 final-swagger.json 定義實現
- 用戶認證流程必須正確工作，包括登入、JWT 生成和驗證
- 合約管理功能必須支持創建、查詢和更新操作
- 合約審核流程必須支持多階段審核和簽名
- 文件管理功能必須支持上傳、下載和版本控制
- 合約訪問控制必須正確實施權限檢查

## 性能驗收標準
- API 響應時間必須符合性能要求
- 系統必須能夠處理指定的並發用戶數
- 數據庫查詢必須優化，避免 N+1 查詢問題

## 質量驗收標準
- 代碼必須遵循項目的編碼規範
- 必須有適當的單元測試和集成測試
- 系統必須有完整的錯誤處理機制
- API 文檔必須完整且與實際實現一致

# 技術實現細節

## 認證與授權實現
- 使用 JWT 進行身份驗證
- JWT 令牌包含用戶 ID 和角色信息
- 使用中間件驗證 JWT 令牌
- 密碼使用 SHA1 加鹽哈希存儲

## 數據庫交互
- 使用 Prisma ORM 進行數據庫操作
- 遵循存儲庫模式分離數據訪問邏輯
- 使用事務確保數據一致性
- 實現適當的錯誤處理和重試機制

## API 實現
- 使用 Elysia 框架定義路由和中間件
- 實現統一的請求驗證
- 實現統一的響應格式
- 使用 Swagger 提供 API 文檔

## 錯誤處理
- 實現全局錯誤處理中間件
- 定義標準錯誤響應格式
- 記錄詳細的錯誤日誌
- 提供友好的錯誤消息

# 風險和緩解策略

## 數據庫結構複雜
- 風險：多模式數據庫結構增加了映射和管理的複雜性
- 緩解：使用 Prisma 的 multiSchema 功能正確映射和管理，嚴格遵循 schema.prisma
- 緩解：實現全面的單元測試和集成測試，確保數據庫操作正確

## API 端點眾多
- 風險：大量 API 端點增加了維護和一致性的難度
- 緩解：使用模塊化設計和良好的文檔，確保與 final-swagger.json 一致
- 緩解：實現自動化測試，驗證 API 響應與文檔一致

## 性能考慮
- 風險：複雜的合約查詢可能導致性能問題
- 緩解：優化查詢和使用適當的索引，特別是對於複雜的合約查詢
- 緩解：實現查詢緩存，減少數據庫負載
- 緩解：進行性能測試，識別和解決瓶頸

## 安全風險
- 風險：敏感合約數據可能被未授權訪問
- 緩解：實現嚴格的訪問控制和權限檢查
- 緩解：使用 HTTPS 保護數據傳輸
- 緩解：定期進行安全審計和漏洞掃描

# 附錄

## 數據庫結構
- 數據庫包含多個模式：code, data, dbo, join，詳見 prisma/schema.prisma
- 主要表格：
  * User：用戶信息
  * Contract：合約信息
  * ContractExaminer：合約審核人員
  * ContractAttachment：合約附件
  * ContractAccessRelated：合約訪問關係

## API 定義
- API 定義詳見 final-swagger.json
- 主要 API 組：
  * auth：認證相關 API
  * user：用戶相關 API
  * contract：合約相關 API
  * contract-exam-stage：合約審核階段相關 API
  * contract-access：合約訪問相關 API
  * proxy-case：代理案例相關 API

## 主要實體關係
- User <-> Contract：用戶創建和管理合約
- Contract <-> ContractExaminer：合約與審核人員關係
- Contract <-> ContractAttachment：合約與附件關係
- Contract <-> ContractAccessRelated：合約與訪問關係
- User <-> ActingEntry：用戶與代理關係

## 技術依賴
- Elysia：Web 框架
- Prisma：ORM 工具
- JWT：身份驗證
- SQL Server：數據庫
</PRD>
</content>
<line_count>277</line_count>
</write_to_file>

---

**User:**

[write_to_file for 'scripts/prd.txt'] Result:
The content was successfully saved to scripts/prd.txt.
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Recently Modified Files
These files have been modified since you last accessed them (file was just edited so you may need to re-read it before editing):
scripts/prd.txt

# Current Time
4/22/2025, 12:05:46 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
136,759 (68%)

# Current Cost
$1.47

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
我已經成功更新了 scripts/prd.txt 文件，主要做了以下修改：

1. 將所有 API 路徑從 PascalCase 改為 Kebab Case，例如：
   - /Auth/LoginLocal → /auth/login-local
   - /User/GetUser → /user/get-user
   - /Contract/CreateContract → /contract/create-contract
   - 等等

2. 添加了一個新的「命名規範」部分，明確說明了項目中使用的各種命名規範：
   - 文件和目錄命名：使用 Kebab Case（如 user-route.ts, password-util.ts）
   - API 路徑命名：使用 Kebab Case（如 /auth/login-local, /user/get-user）
   - 代碼變量命名：使用 camelCase
   - 類和接口命名：使用 PascalCase
   - 常量命名：使用 UPPER_SNAKE_CASE

3. 在附錄的 API 定義部分，也將 API 組名稱從 PascalCase 改為 Kebab Case。

現在我應該詢問用戶是否滿意這些修改，以及是否希望進一步完善 PRD 或使用 taskmaster-ai 的 parse-prd 工具來解析 PRD 並生成任務。
</thinking>

<ask_followup_question>
<question>我已經更新了 PRD 文件，主要做了以下修改：

1. 將所有 API 路徑從 PascalCase 改為 Kebab Case（如 /auth/login-local 而非 /Auth/LoginLocal）
2. 添加了「命名規範」部分，明確說明了項目中使用的各種命名規範
3. 在附錄的 API 定義部分，也將 API 組名稱改為 Kebab Case

您對這些修改滿意嗎？是否希望進一步完善 PRD，或者現在使用 taskmaster-ai 的 parse-prd 工具來解析 PRD 並生成任務？</question>
<follow_up>
<suggest>
是的，我對修改很滿意，請幫我使用 taskmaster-ai 的 parse-prd 工具解析 PRD 並生成任務
</suggest>
<suggest>
我還想進一步完善 PRD，特別是在某些功能描述方面
</suggest>
<suggest>
PRD 看起來不錯，但我想先了解一下 taskmaster-ai 的 parse-prd 工具的使用方法
</suggest>
</follow_up>
</ask_followup_question>

---

**User:**

[ask_followup_question for '我已經更新了 PRD 文件，主要做了以下修改：

1. 將所有 API 路徑從 PascalCase 改為 Kebab Case（如 /auth/login-local 而非 /Auth/LoginLocal）
2. 添加了「命名規範」部分，明確說明了項目中使用的各種命名規範
3. 在附錄的 API 定義部分，也將 API 組名稱改為 Kebab Case

您對這些修改滿意嗎？是否希望進一步完善 PRD，或者現在使用 taskmaster-ai 的 parse-prd 工具來解析 PRD 並生成任務？'] Result:
<answer>
PRD 還需要要求 httpYac 的 API 測試 在每一個 api 完成時候
</answer>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 12:10:38 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
137,879 (69%)

# Current Cost
$1.54

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
用戶希望在 PRD 中添加關於使用 httpYac 進行 API 測試的要求，指定在每個 API 完成時都需要進行測試。我需要更新 PRD 文件，添加這個要求。

我將在 PRD 中添加一個關於測試的部分，特別強調使用 httpYac 進行 API 測試的要求。這可以放在「技術實現細節」部分或「驗收標準」部分，或者作為一個單獨的部分。我認為最好將其添加為「測試策略」的獨立部分，並在「驗收標準」中也提及這一要求。
</thinking>

<read_file>
<path>scripts/prd.txt</path>
</read_file>

---

**User:**

[read_file for 'scripts/prd.txt'] Result:
<file><path>scripts/prd.txt</path>
<content lines="1-284">
  1 | <context>
  2 | # 概述
  3 | 這是一個使用 Elysia 框架的後端 API 服務，運行在 Bun 環境中。它使用 Prisma ORM 與 SQL Server 數據庫交互，提供了豐富的功能，包括用戶認證、合約管理、合約審核流程、文件管理等。API 定義在 final-swagger.json 中，數據庫結構在 prisma/schema.prisma 中定義。
  4 | 
  5 | # 業務背景
  6 | 本系統旨在提供一個全面的合約管理解決方案，支持企業內部的合約創建、審核、簽署和管理流程。系統將幫助企業規範合約處理流程，提高工作效率，並確保合約處理的合規性和安全性。
  7 | 
  8 | # 核心功能
  9 | - 用戶認證和授權（基於 JWT）
 10 | - 合約管理（創建、查詢、更新合約）
 11 | - 合約審核流程（多階段審核和簽名）
 12 | - 文件管理（附件上傳和管理）
 13 | - 合約訪問控制（管理合約的訪問權限）
 14 | - 代理案例管理（處理用戶代理關係）
 15 | - API 端點提供（遵循 final-swagger.json 定義）
 16 | 
 17 | # 用戶體驗
 18 | - 提供 RESTful API 接口，遵循 final-swagger.json 定義
 19 | - 使用 JWT 進行身份驗證
 20 | - 提供 Swagger 文檔
 21 | - 確保 API 響應與數據庫模型一致
 22 | - 提供統一的錯誤處理和響應格式
 23 | </context>
 24 | 
 25 | <PRD>
 26 | # 技術架構
 27 | - Elysia 框架：用於構建 API 服務，提供路由、中間件和請求處理功能
 28 | - Bun 運行環境：高性能 JavaScript/TypeScript 運行時
 29 | - Prisma ORM：用於數據庫交互，基於 prisma/schema.prisma 定義的模型
 30 | - SQL Server：數據庫，包含 code, data, dbo, join 等多個模式
 31 | - JWT：用於身份驗證和授權
 32 | - Swagger：API 文檔，基於 final-swagger.json
 33 | - 分層架構：
 34 |   * 路由層 (routes)：處理 HTTP 請求和響應
 35 |   * 中間件層 (middleware)：提供認證、日誌等橫切關注點
 36 |   * 服務層 (services)：實現業務邏輯
 37 |   * 存儲庫層 (repositories)：處理數據訪問
 38 |   * 工具層 (utils)：提供通用功能
 39 | 
 40 | # 命名規範
 41 | - 文件和目錄命名：使用 Kebab Case（如 user-route.ts, password-util.ts）
 42 | - API 路徑命名：使用 Kebab Case（如 /auth/login-local, /user/get-user）
 43 | - 代碼變量命名：使用 camelCase
 44 | - 類和接口命名：使用 PascalCase
 45 | - 常量命名：使用 UPPER_SNAKE_CASE
 46 | 
 47 | # 功能需求
 48 | 
 49 | ## 用戶認證與授權
 50 | - 用戶本地登入 (POST /auth/login-local)
 51 |   * 驗證用戶憑證並生成 JWT 令牌
 52 |   * 設置 Cookie 以維持會話
 53 | - 獲取當前用戶信息 (GET /user/get-user)
 54 |   * 返回當前登錄用戶的詳細信息
 55 | - 更新用戶信息 (POST /user/update-user)
 56 |   * 允許用戶更新個人資料
 57 | - 更新密碼 (POST /user/update-password)
 58 |   * 允許用戶更改密碼
 59 | - 基於 JWT 的訪問控制
 60 |   * 保護需要認證的 API 端點
 61 |   * 驗證用戶權限
 62 | 
 63 | ## 合約管理
 64 | - 創建合約 (POST /contract/create-contract)
 65 |   * 支持創建新合約並設置基本信息
 66 |   * 支持添加合約相關方
 67 |   * 支持設置合約條款和條件
 68 | - 獲取合約基本信息 (GET /contract/get-contract-basic)
 69 |   * 根據合約 GUID 獲取基本信息
 70 | - 獲取合約詳細信息 (GET /contract/get-contract-detail)
 71 |   * 根據合約 GUID 獲取完整詳細信息
 72 | - 查詢合約列表 (POST /contracts/get-contracts)
 73 |   * 支持分頁、排序和過濾
 74 | - 查詢待處理合約 (POST /contracts/get-pending-contracts)
 75 |   * 獲取需要用戶處理的合約
 76 | 
 77 | ## 合約審核流程
 78 | - 獲取合約審核階段 (GET /contract-exam-stage/get-contract-exam-stages)
 79 |   * 獲取特定合約的審核階段信息
 80 | - 審核合約階段 (POST /contract-exam-stage/examine-contract-stage)
 81 |   * 允許審核人員審核合約階段
 82 |   * 支持添加審核意見
 83 |   * 支持設置審核結果
 84 | 
 85 | ## 文件管理
 86 | - 支持合約附件上傳和管理
 87 | - 支持文件版本控制
 88 | - 支持文件類型驗證和安全檢查
 89 | 
 90 | ## 合約訪問控制
 91 | - 創建合約訪問申請 (POST /contract-access/create-contract-access)
 92 |   * 允許用戶申請訪問特定合約
 93 | - 獲取合約訪問詳情 (GET /contract-access/get-contract-access)
 94 |   * 查詢特定合約的訪問申請
 95 | - 獲取待審核的合約訪問申請 (POST /contract-accesses/get-pending-contract-accesses)
 96 |   * 獲取需要審核的訪問申請列表
 97 | 
 98 | ## 代理案例管理
 99 | - 創建代理案例 (POST /proxy-case/create-proxy-case)
100 |   * 設置代理關係，允許一個用戶代表另一個用戶處理合約
101 | - 更新代理案例 (POST /proxy-case/update-proxy-case)
102 |   * 修改現有代理關係
103 | - 獲取代理案例 (GET /proxy-case/get-proxy-case)
104 |   * 查詢特定代理案例的詳情
105 | 
106 | # 非功能需求
107 | 
108 | ## 性能要求
109 | - API 響應時間：大多數 API 請求應在 500ms 內完成
110 | - 系統應能同時處理至少 100 個並發用戶
111 | - 數據庫查詢應優化，特別是對於複雜的合約查詢
112 | 
113 | ## 安全要求
114 | - 所有密碼必須使用加鹽哈希存儲
115 | - JWT 令牌應有適當的過期時間
116 | - 敏感數據傳輸應使用 HTTPS
117 | - 實現適當的訪問控制，確保用戶只能訪問授權的資源
118 | 
119 | ## 可擴展性要求
120 | - 系統架構應支持未來功能擴展
121 | - 數據庫設計應考慮未來數據增長
122 | - API 設計應遵循 RESTful 原則，便於集成和擴展
123 | 
124 | ## 可用性要求
125 | - 系統應提供清晰的錯誤消息
126 | - API 文檔應完整且易於理解
127 | - 系統日誌應詳細記錄錯誤和異常情況
128 | 
129 | # 開發路線圖
130 | 
131 | ## 階段一：基礎設施（2週）
132 | - 設置基本的 API 結構，遵循 final-swagger.json 定義
133 | - 實現用戶認證和授權（Auth 相關 API）
134 |   * 實現 JWT 中間件
135 |   * 實現登入 API
136 |   * 實現用戶信息 API
137 | - 設置數據庫連接和模型，確保與 prisma/schema.prisma 一致
138 |   * 配置 Prisma 客戶端
139 |   * 實現基本的數據訪問層
140 | 
141 | ## 階段二：核心功能（4週）
142 | - 實現合約管理功能（Contract 相關 API）
143 |   * 創建合約 API
144 |   * 查詢合約 API
145 |   * 更新合約 API
146 | - 實現合約審核流程（ContractExaminer 相關功能）
147 |   * 審核階段管理
148 |   * 審核流程控制
149 |   * 審核結果處理
150 | - 實現文件管理功能（Attachment 相關 API）
151 |   * 文件上傳
152 |   * 文件版本控制
153 |   * 文件安全檢查
154 | - 實現合約訪問控制（ContractAccess 相關 API）
155 |   * 訪問申請
156 |   * 訪問審核
157 |   * 訪問權限控制
158 | 
159 | ## 階段三：優化和擴展（2週）
160 | - 優化 API 性能
161 |   * 實現查詢緩存
162 |   * 優化數據庫查詢
163 | - 添加更多功能和端點
164 |   * 實現代理案例管理
165 |   * 實現合約歸檔功能
166 | - 完善錯誤處理和日誌記錄
167 |   * 統一錯誤響應格式
168 |   * 實現詳細日誌記錄
169 | - 確保所有 API 與 final-swagger.json 定義一致
170 |   * 全面測試 API 端點
171 |   * 驗證 API 響應格式
172 | 
173 | # 邏輯依賴鏈
174 | - 首先實現用戶認證和授權（User, Auth API）
175 | - 然後實現基本的合約管理功能（Contract API）
176 | - 接著實現合約審核流程（ContractExaminer, ContractExamStage）
177 | - 然後實現合約訪問控制（ContractAccess API）
178 | - 最後實現文件管理和其他功能（Attachment, ContractAttachment API）
179 | 
180 | # 驗收標準
181 | 
182 | ## 功能驗收標準
183 | - 所有 API 端點必須按照 final-swagger.json 定義實現
184 | - 用戶認證流程必須正確工作，包括登入、JWT 生成和驗證
185 | - 合約管理功能必須支持創建、查詢和更新操作
186 | - 合約審核流程必須支持多階段審核和簽名
187 | - 文件管理功能必須支持上傳、下載和版本控制
188 | - 合約訪問控制必須正確實施權限檢查
189 | 
190 | ## 性能驗收標準
191 | - API 響應時間必須符合性能要求
192 | - 系統必須能夠處理指定的並發用戶數
193 | - 數據庫查詢必須優化，避免 N+1 查詢問題
194 | 
195 | ## 質量驗收標準
196 | - 代碼必須遵循項目的編碼規範
197 | - 必須有適當的單元測試和集成測試
198 | - 系統必須有完整的錯誤處理機制
199 | - API 文檔必須完整且與實際實現一致
200 | 
201 | # 技術實現細節
202 | 
203 | ## 認證與授權實現
204 | - 使用 JWT 進行身份驗證
205 | - JWT 令牌包含用戶 ID 和角色信息
206 | - 使用中間件驗證 JWT 令牌
207 | - 密碼使用 SHA1 加鹽哈希存儲
208 | 
209 | ## 數據庫交互
210 | - 使用 Prisma ORM 進行數據庫操作
211 | - 遵循存儲庫模式分離數據訪問邏輯
212 | - 使用事務確保數據一致性
213 | - 實現適當的錯誤處理和重試機制
214 | 
215 | ## API 實現
216 | - 使用 Elysia 框架定義路由和中間件
217 | - 實現統一的請求驗證
218 | - 實現統一的響應格式
219 | - 使用 Swagger 提供 API 文檔
220 | 
221 | ## 錯誤處理
222 | - 實現全局錯誤處理中間件
223 | - 定義標準錯誤響應格式
224 | - 記錄詳細的錯誤日誌
225 | - 提供友好的錯誤消息
226 | 
227 | # 風險和緩解策略
228 | 
229 | ## 數據庫結構複雜
230 | - 風險：多模式數據庫結構增加了映射和管理的複雜性
231 | - 緩解：使用 Prisma 的 multiSchema 功能正確映射和管理，嚴格遵循 schema.prisma
232 | - 緩解：實現全面的單元測試和集成測試，確保數據庫操作正確
233 | 
234 | ## API 端點眾多
235 | - 風險：大量 API 端點增加了維護和一致性的難度
236 | - 緩解：使用模塊化設計和良好的文檔，確保與 final-swagger.json 一致
237 | - 緩解：實現自動化測試，驗證 API 響應與文檔一致
238 | 
239 | ## 性能考慮
240 | - 風險：複雜的合約查詢可能導致性能問題
241 | - 緩解：優化查詢和使用適當的索引，特別是對於複雜的合約查詢
242 | - 緩解：實現查詢緩存，減少數據庫負載
243 | - 緩解：進行性能測試，識別和解決瓶頸
244 | 
245 | ## 安全風險
246 | - 風險：敏感合約數據可能被未授權訪問
247 | - 緩解：實現嚴格的訪問控制和權限檢查
248 | - 緩解：使用 HTTPS 保護數據傳輸
249 | - 緩解：定期進行安全審計和漏洞掃描
250 | 
251 | # 附錄
252 | 
253 | ## 數據庫結構
254 | - 數據庫包含多個模式：code, data, dbo, join，詳見 prisma/schema.prisma
255 | - 主要表格：
256 |   * User：用戶信息
257 |   * Contract：合約信息
258 |   * ContractExaminer：合約審核人員
259 |   * ContractAttachment：合約附件
260 |   * ContractAccessRelated：合約訪問關係
261 | 
262 | ## API 定義
263 | - API 定義詳見 final-swagger.json
264 | - 主要 API 組：
265 |   * auth：認證相關 API
266 |   * user：用戶相關 API
267 |   * contract：合約相關 API
268 |   * contract-exam-stage：合約審核階段相關 API
269 |   * contract-access：合約訪問相關 API
270 |   * proxy-case：代理案例相關 API
271 | 
272 | ## 主要實體關係
273 | - User <-> Contract：用戶創建和管理合約
274 | - Contract <-> ContractExaminer：合約與審核人員關係
275 | - Contract <-> ContractAttachment：合約與附件關係
276 | - Contract <-> ContractAccessRelated：合約與訪問關係
277 | - User <-> ActingEntry：用戶與代理關係
278 | 
279 | ## 技術依賴
280 | - Elysia：Web 框架
281 | - Prisma：ORM 工具
282 | - JWT：身份驗證
283 | - SQL Server：數據庫
284 | </PRD>
</content>
</file>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 12:10:53 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
138,645 (69%)

# Current Cost
$1.59

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
我需要在 PRD 中添加關於使用 httpYac 進行 API 測試的要求。我將添加一個新的「測試策略」部分，並在「驗收標準」的「質量驗收標準」部分添加相關要求。
</thinking>

<write_to_file>
<path>scripts/prd.txt</path>
<content>
<context>
# 概述
這是一個使用 Elysia 框架的後端 API 服務，運行在 Bun 環境中。它使用 Prisma ORM 與 SQL Server 數據庫交互，提供了豐富的功能，包括用戶認證、合約管理、合約審核流程、文件管理等。API 定義在 final-swagger.json 中，數據庫結構在 prisma/schema.prisma 中定義。

# 業務背景
本系統旨在提供一個全面的合約管理解決方案，支持企業內部的合約創建、審核、簽署和管理流程。系統將幫助企業規範合約處理流程，提高工作效率，並確保合約處理的合規性和安全性。

# 核心功能
- 用戶認證和授權（基於 JWT）
- 合約管理（創建、查詢、更新合約）
- 合約審核流程（多階段審核和簽名）
- 文件管理（附件上傳和管理）
- 合約訪問控制（管理合約的訪問權限）
- 代理案例管理（處理用戶代理關係）
- API 端點提供（遵循 final-swagger.json 定義）

# 用戶體驗
- 提供 RESTful API 接口，遵循 final-swagger.json 定義
- 使用 JWT 進行身份驗證
- 提供 Swagger 文檔
- 確保 API 響應與數據庫模型一致
- 提供統一的錯誤處理和響應格式
</context>

<PRD>
# 技術架構
- Elysia 框架：用於構建 API 服務，提供路由、中間件和請求處理功能
- Bun 運行環境：高性能 JavaScript/TypeScript 運行時
- Prisma ORM：用於數據庫交互，基於 prisma/schema.prisma 定義的模型
- SQL Server：數據庫，包含 code, data, dbo, join 等多個模式
- JWT：用於身份驗證和授權
- Swagger：API 文檔，基於 final-swagger.json
- 分層架構：
  * 路由層 (routes)：處理 HTTP 請求和響應
  * 中間件層 (middleware)：提供認證、日誌等橫切關注點
  * 服務層 (services)：實現業務邏輯
  * 存儲庫層 (repositories)：處理數據訪問
  * 工具層 (utils)：提供通用功能

# 命名規範
- 文件和目錄命名：使用 Kebab Case（如 user-route.ts, password-util.ts）
- API 路徑命名：使用 Kebab Case（如 /auth/login-local, /user/get-user）
- 代碼變量命名：使用 camelCase
- 類和接口命名：使用 PascalCase
- 常量命名：使用 UPPER_SNAKE_CASE

# 功能需求

## 用戶認證與授權
- 用戶本地登入 (POST /auth/login-local)
  * 驗證用戶憑證並生成 JWT 令牌
  * 設置 Cookie 以維持會話
- 獲取當前用戶信息 (GET /user/get-user)
  * 返回當前登錄用戶的詳細信息
- 更新用戶信息 (POST /user/update-user)
  * 允許用戶更新個人資料
- 更新密碼 (POST /user/update-password)
  * 允許用戶更改密碼
- 基於 JWT 的訪問控制
  * 保護需要認證的 API 端點
  * 驗證用戶權限

## 合約管理
- 創建合約 (POST /contract/create-contract)
  * 支持創建新合約並設置基本信息
  * 支持添加合約相關方
  * 支持設置合約條款和條件
- 獲取合約基本信息 (GET /contract/get-contract-basic)
  * 根據合約 GUID 獲取基本信息
- 獲取合約詳細信息 (GET /contract/get-contract-detail)
  * 根據合約 GUID 獲取完整詳細信息
- 查詢合約列表 (POST /contracts/get-contracts)
  * 支持分頁、排序和過濾
- 查詢待處理合約 (POST /contracts/get-pending-contracts)
  * 獲取需要用戶處理的合約

## 合約審核流程
- 獲取合約審核階段 (GET /contract-exam-stage/get-contract-exam-stages)
  * 獲取特定合約的審核階段信息
- 審核合約階段 (POST /contract-exam-stage/examine-contract-stage)
  * 允許審核人員審核合約階段
  * 支持添加審核意見
  * 支持設置審核結果

## 文件管理
- 支持合約附件上傳和管理
- 支持文件版本控制
- 支持文件類型驗證和安全檢查

## 合約訪問控制
- 創建合約訪問申請 (POST /contract-access/create-contract-access)
  * 允許用戶申請訪問特定合約
- 獲取合約訪問詳情 (GET /contract-access/get-contract-access)
  * 查詢特定合約的訪問申請
- 獲取待審核的合約訪問申請 (POST /contract-accesses/get-pending-contract-accesses)
  * 獲取需要審核的訪問申請列表

## 代理案例管理
- 創建代理案例 (POST /proxy-case/create-proxy-case)
  * 設置代理關係，允許一個用戶代表另一個用戶處理合約
- 更新代理案例 (POST /proxy-case/update-proxy-case)
  * 修改現有代理關係
- 獲取代理案例 (GET /proxy-case/get-proxy-case)
  * 查詢特定代理案例的詳情

# 非功能需求

## 性能要求
- API 響應時間：大多數 API 請求應在 500ms 內完成
- 系統應能同時處理至少 100 個並發用戶
- 數據庫查詢應優化，特別是對於複雜的合約查詢

## 安全要求
- 所有密碼必須使用加鹽哈希存儲
- JWT 令牌應有適當的過期時間
- 敏感數據傳輸應使用 HTTPS
- 實現適當的訪問控制，確保用戶只能訪問授權的資源

## 可擴展性要求
- 系統架構應支持未來功能擴展
- 數據庫設計應考慮未來數據增長
- API 設計應遵循 RESTful 原則，便於集成和擴展

## 可用性要求
- 系統應提供清晰的錯誤消息
- API 文檔應完整且易於理解
- 系統日誌應詳細記錄錯誤和異常情況

# 測試策略

## API 測試
- 使用 httpYac 進行 API 測試
  * 每個 API 完成後必須創建對應的 httpYac 測試腳本
  * 測試腳本應覆蓋正常流程和異常流程
  * 測試腳本應包含請求和預期響應的驗證
- 單元測試
  * 使用適當的測試框架對關鍵業務邏輯進行單元測試
  * 確保測試覆蓋率達到預定目標
- 集成測試
  * 測試 API 與數據庫的交互
  * 測試多個 API 之間的協作流程

## 測試環境
- 開發環境：用於開發人員本地測試
- 測試環境：用於集成測試和 QA 測試
- 生產環境：最終部署環境

## 測試數據
- 使用模擬數據進行開發和測試
- 確保測試數據覆蓋各種場景和邊界條件
- 敏感數據應在測試環境中進行脫敏處理

# 開發路線圖

## 階段一：基礎設施（2週）
- 設置基本的 API 結構，遵循 final-swagger.json 定義
- 實現用戶認證和授權（Auth 相關 API）
  * 實現 JWT 中間件
  * 實現登入 API
  * 實現用戶信息 API
  * 為每個 API 創建 httpYac 測試腳本
- 設置數據庫連接和模型，確保與 prisma/schema.prisma 一致
  * 配置 Prisma 客戶端
  * 實現基本的數據訪問層

## 階段二：核心功能（4週）
- 實現合約管理功能（Contract 相關 API）
  * 創建合約 API
  * 查詢合約 API
  * 更新合約 API
  * 為每個 API 創建 httpYac 測試腳本
- 實現合約審核流程（ContractExaminer 相關功能）
  * 審核階段管理
  * 審核流程控制
  * 審核結果處理
  * 為每個 API 創建 httpYac 測試腳本
- 實現文件管理功能（Attachment 相關 API）
  * 文件上傳
  * 文件版本控制
  * 文件安全檢查
  * 為每個 API 創建 httpYac 測試腳本
- 實現合約訪問控制（ContractAccess 相關 API）
  * 訪問申請
  * 訪問審核
  * 訪問權限控制
  * 為每個 API 創建 httpYac 測試腳本

## 階段三：優化和擴展（2週）
- 優化 API 性能
  * 實現查詢緩存
  * 優化數據庫查詢
- 添加更多功能和端點
  * 實現代理案例管理
  * 實現合約歸檔功能
  * 為每個新 API 創建 httpYac 測試腳本
- 完善錯誤處理和日誌記錄
  * 統一錯誤響應格式
  * 實現詳細日誌記錄
- 確保所有 API 與 final-swagger.json 定義一致
  * 全面測試 API 端點
  * 驗證 API 響應格式

# 邏輯依賴鏈
- 首先實現用戶認證和授權（User, Auth API）
- 然後實現基本的合約管理功能（Contract API）
- 接著實現合約審核流程（ContractExaminer, ContractExamStage）
- 然後實現合約訪問控制（ContractAccess API）
- 最後實現文件管理和其他功能（Attachment, ContractAttachment API）

# 驗收標準

## 功能驗收標準
- 所有 API 端點必須按照 final-swagger.json 定義實現
- 用戶認證流程必須正確工作，包括登入、JWT 生成和驗證
- 合約管理功能必須支持創建、查詢和更新操作
- 合約審核流程必須支持多階段審核和簽名
- 文件管理功能必須支持上傳、下載和版本控制
- 合約訪問控制必須正確實施權限檢查

## 性能驗收標準
- API 響應時間必須符合性能要求
- 系統必須能夠處理指定的並發用戶數
- 數據庫查詢必須優化，避免 N+1 查詢問題

## 質量驗收標準
- 代碼必須遵循項目的編碼規範
- 每個 API 必須有對應的 httpYac 測試腳本，並通過測試
- 必須有適當的單元測試和集成測試
- 系統必須有完整的錯誤處理機制
- API 文檔必須完整且與實際實現一致

# 技術實現細節

## 認證與授權實現
- 使用 JWT 進行身份驗證
- JWT 令牌包含用戶 ID 和角色信息
- 使用中間件驗證 JWT 令牌
- 密碼使用 SHA1 加鹽哈希存儲

## 數據庫交互
- 使用 Prisma ORM 進行數據庫操作
- 遵循存儲庫模式分離數據訪問邏輯
- 使用事務確保數據一致性
- 實現適當的錯誤處理和重試機制

## API 實現
- 使用 Elysia 框架定義路由和中間件
- 實現統一的請求驗證
- 實現統一的響應格式
- 使用 Swagger 提供 API 文檔

## API 測試實現
- 使用 httpYac 創建 API 測試腳本
- 每個 API 完成後立即創建對應的測試腳本
- 測試腳本應包含：
  * 請求 URL、方法和參數
  * 請求頭和認證信息
  * 請求體（如適用）
  * 預期響應狀態碼
  * 預期響應體的驗證
- 測試腳本應覆蓋正常流程和異常流程

## 錯誤處理
- 實現全局錯誤處理中間件
- 定義標準錯誤響應格式
- 記錄詳細的錯誤日誌
- 提供友好的錯誤消息

# 風險和緩解策略

## 數據庫結構複雜
- 風險：多模式數據庫結構增加了映射和管理的複雜性
- 緩解：使用 Prisma 的 multiSchema 功能正確映射和管理，嚴格遵循 schema.prisma
- 緩解：實現全面的單元測試和集成測試，確保數據庫操作正確

## API 端點眾多
- 風險：大量 API 端點增加了維護和一致性的難度
- 緩解：使用模塊化設計和良好的文檔，確保與 final-swagger.json 一致
- 緩解：為每個 API 創建 httpYac 測試腳本，確保功能正確性
- 緩解：實現自動化測試，驗證 API 響應與文檔一致

## 性能考慮
- 風險：複雜的合約查詢可能導致性能問題
- 緩解：優化查詢和使用適當的索引，特別是對於複雜的合約查詢
- 緩解：實現查詢緩存，減少數據庫負載
- 緩解：進行性能測試，識別和解決瓶頸

## 安全風險
- 風險：敏感合約數據可能被未授權訪問
- 緩解：實現嚴格的訪問控制和權限檢查
- 緩解：使用 HTTPS 保護數據傳輸
- 緩解：定期進行安全審計和漏洞掃描

# 附錄

## 數據庫結構
- 數據庫包含多個模式：code, data, dbo, join，詳見 prisma/schema.prisma
- 主要表格：
  * User：用戶信息
  * Contract：合約信息
  * ContractExaminer：合約審核人員
  * ContractAttachment：合約附件
  * ContractAccessRelated：合約訪問關係

## API 定義
- API 定義詳見 final-swagger.json
- 主要 API 組：
  * auth：認證相關 API
  * user：用戶相關 API
  * contract：合約相關 API
  * contract-exam-stage：合約審核階段相關 API
  * contract-access：合約訪問相關 API
  * proxy-case：代理案例相關 API

## 主要實體關係
- User <-> Contract：用戶創建和管理合約
- Contract <-> ContractExaminer：合約與審核人員關係
- Contract <-> ContractAttachment：合約與附件關係
- Contract <-> ContractAccessRelated：合約與訪問關係
- User <-> ActingEntry：用戶與代理關係

## 技術依賴
- Elysia：Web 框架
- Prisma：ORM 工具
- JWT：身份驗證
- SQL Server：數據庫
- httpYac：API 測試工具
</PRD>
</content>
<line_count>337</line_count>
</write_to_file>

---

**User:**

[write_to_file for 'scripts/prd.txt'] Result:
The content was successfully saved to scripts/prd.txt.
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Recently Modified Files
These files have been modified since you last accessed them (file was just edited so you may need to re-read it before editing):
scripts/prd.txt

# Current Time
4/22/2025, 12:12:50 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
149,443 (75%)

# Current Cost
$1.73

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
我已經成功更新了 scripts/prd.txt 文件，添加了關於使用 httpYac 進行 API 測試的要求。主要做了以下修改：

1. 添加了一個新的「測試策略」部分，詳細描述了 API 測試、單元測試、集成測試、測試環境和測試數據的要求。

2. 在「開發路線圖」的各個階段中，添加了為每個 API 創建 httpYac 測試腳本的要求。

3. 在「驗收標準」的「質量驗收標準」部分，添加了「每個 API 必須有對應的 httpYac 測試腳本，並通過測試」的要求。

4. 添加了一個新的「API 測試實現」部分，詳細描述了使用 httpYac 創建 API 測試腳本的具體要求。

5. 在「風險和緩解策略」的「API 端點眾多」部分，添加了「為每個 API 創建 httpYac 測試腳本，確保功能正確性」的緩解措施。

6. 在「技術依賴」部分，添加了 httpYac 作為 API 測試工具。

現在我應該詢問用戶是否滿意這些修改，以及是否希望進一步完善 PRD 或使用 taskmaster-ai 的 parse-prd 工具來解析 PRD 並生成任務。
</thinking>

<ask_followup_question>
<question>我已經更新了 PRD 文件，添加了關於使用 httpYac 進行 API 測試的要求。主要修改包括：

1. 添加了「測試策略」部分，詳細描述 API 測試要求
2. 在開發路線圖中添加了為每個 API 創建 httpYac 測試腳本的任務
3. 在驗收標準中添加了 httpYac 測試的要求
4. 添加了「API 測試實現」部分，詳細說明測試腳本內容
5. 在風險緩解策略中添加了相關措施
6. 在技術依賴中添加了 httpYac

您對這些修改滿意嗎？是否希望進一步完善 PRD，或者現在使用 taskmaster-ai 的 parse-prd 工具來解析 PRD 並生成任務？</question>
<follow_up>
<suggest>
是的，我對修改很滿意，請幫我使用 taskmaster-ai 的 parse-prd 工具解析 PRD 並生成任務
</suggest>
<suggest>
我還想進一步完善 PRD，特別是在某些功能描述方面
</suggest>
<suggest>
PRD 看起來很完整了，但我想先了解一下 taskmaster-ai 的 parse-prd 工具的使用方法
</suggest>
</follow_up>
</ask_followup_question>

---

**User:**

[ask_followup_question for '我已經更新了 PRD 文件，添加了關於使用 httpYac 進行 API 測試的要求。主要修改包括：

1. 添加了「測試策略」部分，詳細描述 API 測試要求
2. 在開發路線圖中添加了為每個 API 創建 httpYac 測試腳本的任務
3. 在驗收標準中添加了 httpYac 測試的要求
4. 添加了「API 測試實現」部分，詳細說明測試腳本內容
5. 在風險緩解策略中添加了相關措施
6. 在技術依賴中添加了 httpYac

您對這些修改滿意嗎？是否希望進一步完善 PRD，或者現在使用 taskmaster-ai 的 parse-prd 工具來解析 PRD 並生成任務？'] Result:
<answer>
是的，我對修改很滿意，請幫我使用 taskmaster-ai 的 parse-prd 工具解析 PRD 並生成任務
</answer>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 12:14:05 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
150,676 (75%)

# Current Cost
$1.81

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
用戶對 PRD 的修改很滿意，並希望我幫助使用 taskmaster-ai 的 parse-prd 工具解析 PRD 並生成任務。我需要使用 MCP 工具來執行這個操作。

首先，我需要確認 taskmaster-ai MCP 服務器是否已連接。然後，我將使用 taskmaster-ai 的 parse-prd 工具來解析 PRD 文件並生成任務。

我將使用 use_mcp_tool 工具來執行 parse-prd 操作。
</thinking>

<use_mcp_tool>
<server_name>taskmaster-ai</server_name>
<tool_name>initialize_project</tool_name>
<arguments>
{
  "projectRoot": "/home/bevis/ecs-ten/ecs-ten-server",
  "yes": true
}
</arguments>
</use_mcp_tool>

---

**User:**

[use_mcp_tool for 'taskmaster-ai'] Result:
{
  "fromCache": false,
  "data": {
    "message": "Project initialized successfully.",
    "next_step": "Now that the project is initialized, the next step is to create the tasks by parsing a PRD. This will create the tasks folder and the initial task files (tasks folder will be created when parse-prd is run). The parse-prd tool will require a prd.txt file as input (typically found in the project root directory, scripts/ directory). You can create a prd.txt file by asking the user about their idea, and then using the scripts/example_prd.txt file as a template to genrate a prd.txt file in scripts/. You may skip all of this if the user already has a prd.txt file. You can THEN use the parse-prd tool to create the tasks. So: step 1 after initialization is to create a prd.txt file in scripts/prd.txt or confirm the user already has one. Step 2 is to use the parse-prd tool to create the tasks. Do not bother looking for tasks after initialization, just use the parse-prd tool to create the tasks after creating a prd.txt from which to parse the tasks. You do NOT need to reinitialize the project to parse-prd."
  }
}
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 12:14:29 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
151,551 (76%)

# Current Cost
$1.86

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
很好，我已經成功初始化了 taskmaster-ai 項目。現在我可以使用 parse-prd 工具來解析 PRD 文件並生成任務。我們已經有了 scripts/prd.txt 文件，所以可以直接使用 parse-prd 工具。

我將使用 use_mcp_tool 工具來執行 parse-prd 操作。
</thinking>

<use_mcp_tool>
<server_name>taskmaster-ai</server_name>
<tool_name>parse_prd</tool_name>
<arguments>
{
  "projectRoot": "/home/bevis/ecs-ten/ecs-ten-server",
  "input": "scripts/prd.txt",
  "numTasks": "20"
}
</arguments>
</use_mcp_tool>

---

**User:**

[use_mcp_tool for 'taskmaster-ai'] Result:
The tool execution failed with the following error:
<error>
Error executing MCP tool: {"code":-32001,"data":{"timeout":60000},"name":"McpError","message":"MCP error -32001: Request timed out","stack":"McpError: MCP error -32001: Request timed out\n    at Timeout.G (/home/bevis/.vscode/extensions/rooveterinaryinc.roo-cline-3.13.2/dist/extension.js:1003:86893)\n    at listOnTimeout (node:internal/timers:581:17)\n    at processTimers (node:internal/timers:519:7)"}
</error>
<environment_details>
# VSCode Visible Files
scripts/prd.txt

# VSCode Open Tabs
src/middleware/jwt.ts,src/routes/user-route.ts,src/repositories/user-repository.ts,prisma/schema.prisma,taskmaster-plan.md,../../.config/Code/User/globalStorage/rooveterinaryinc.roo-cline/settings/mcp_settings.json,.env,scripts/prd.txt,src/utils/password-util.ts,src/services/auth-service.ts,src/index.ts,src/env-manager.ts,src/routes/auth-route.ts,src/routes/index.ts,src/middleware/index.ts

# Current Time
4/22/2025, 12:15:40 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
152,387 (76%)

# Current Cost
$1.91

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
看起來 parse_prd 工具執行超時了。這可能是因為 PRD 文件太大或者解析過程太複雜。我可以嘗試以下幾種方法：

1. 減少 numTasks 參數的值，生成更少的任務
2. 嘗試再次執行，可能是暫時性的超時問題
3. 建議用戶手動執行 parse-prd 命令

讓我先嘗試減少 numTasks 參數的值，再次執行 parse-prd 工具。
</thinking>

<use_mcp_tool>
<server_name>taskmaster-ai</server_name>
<tool_name>parse_prd</tool_name>
<arguments>
{
  "projectRoot": "/home/bevis/ecs-ten/ecs-ten-server",
  "input": "scripts/prd.txt",
  "numTasks": "10"
}
</arguments>
</use_mcp_tool>

---

**User:**

[use_mcp_tool for 'taskmaster-ai'] Result:
The user denied this operation and provided the following feedback:
<feedback>
已經成功執行
</feedback>
<environment_details>
# VSCode Visible Files
tasks/tasks.json

# VSCode Open Tabs
tasks/tasks.json

# Current Time
4/22/2025, 12:25:23 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
153,138 (77%)

# Current Cost
$1.96

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
用戶表示 parse-prd 已經成功執行了，這很好。現在我可以查看生成的任務，並幫助用戶理解和管理這些任務。

我看到 VSCode 已經打開了 tasks/tasks.json 文件，這表示任務已經成功生成。我可以使用 use_mcp_tool 工具來獲取所有任務的列表，以便查看生成了哪些任務。
</thinking>

<use_mcp_tool>
<server_name>taskmaster-ai</server_name>
<tool_name>get_tasks</tool_name>
<arguments>
{
  "projectRoot": "/home/bevis/ecs-ten/ecs-ten-server",
  "withSubtasks": true
}
</arguments>
</use_mcp_tool>

---

**User:**

[use_mcp_tool for 'taskmaster-ai'] Result:
{
  "fromCache": false,
  "data": {
    "tasks": [
      {
        "id": 1,
        "title": "Project Initialization and Structure Setup",
        "description": "Initialize the project with Elysia framework on Bun runtime and set up the basic project structure following the layered architecture.",
        "status": "pending",
        "dependencies": [],
        "priority": "high"
      },
      {
        "id": 2,
        "title": "Prisma ORM Configuration with SQL Server",
        "description": "Configure Prisma ORM to connect with SQL Server database using the schema defined in prisma/schema.prisma.",
        "status": "pending",
        "dependencies": [
          1
        ],
        "priority": "high"
      },
      {
        "id": 3,
        "title": "Error Handling and Logging Middleware",
        "description": "Implement global error handling middleware and logging system for the API.",
        "status": "pending",
        "dependencies": [
          1
        ],
        "priority": "high"
      },
      {
        "id": 4,
        "title": "JWT Authentication Middleware",
        "description": "Implement JWT-based authentication middleware to protect API endpoints.",
        "status": "pending",
        "dependencies": [
          3
        ],
        "priority": "high"
      },
      {
        "id": 5,
        "title": "User Authentication API Implementation",
        "description": "Implement the local login API endpoint for user authentication.",
        "status": "pending",
        "dependencies": [
          2,
          4
        ],
        "priority": "high"
      },
      {
        "id": 6,
        "title": "User Information API Implementation",
        "description": "Implement APIs for retrieving and updating user information.",
        "status": "pending",
        "dependencies": [
          5
        ],
        "priority": "high"
      },
      {
        "id": 7,
        "title": "Password Management API Implementation",
        "description": "Implement API for updating user passwords.",
        "status": "pending",
        "dependencies": [
          6
        ],
        "priority": "medium"
      },
      {
        "id": 8,
        "title": "Contract Creation API Implementation",
        "description": "Implement API for creating new contracts with basic information, related parties, and terms.",
        "status": "pending",
        "dependencies": [
          6
        ],
        "priority": "high"
      },
      {
        "id": 9,
        "title": "Contract Retrieval APIs Implementation",
        "description": "Implement APIs for retrieving basic and detailed contract information.",
        "status": "pending",
        "dependencies": [
          8
        ],
        "priority": "high"
      },
      {
        "id": 10,
        "title": "Contract Listing API Implementation",
        "description": "Implement API for listing contracts with pagination, sorting, and filtering.",
        "status": "pending",
        "dependencies": [
          9
        ],
        "priority": "medium"
      },
      {
        "id": 11,
        "title": "Pending Contracts API Implementation",
        "description": "Implement API for retrieving contracts that require user action.",
        "status": "pending",
        "dependencies": [
          10
        ],
        "priority": "medium"
      },
      {
        "id": 12,
        "title": "Contract Review Stage API Implementation",
        "description": "Implement API for retrieving contract review stages.",
        "status": "pending",
        "dependencies": [
          9
        ],
        "priority": "high"
      },
      {
        "id": 13,
        "title": "Contract Examination API Implementation",
        "description": "Implement API for examining contract stages with comments and results.",
        "status": "pending",
        "dependencies": [
          12
        ],
        "priority": "high"
      },
      {
        "id": 14,
        "title": "File Upload and Attachment Management Implementation",
        "description": "Implement functionality for contract attachment upload and management.",
        "status": "pending",
        "dependencies": [
          9
        ],
        "priority": "medium"
      },
      {
        "id": 15,
        "title": "File Version Control Implementation",
        "description": "Implement version control for contract attachments.",
        "status": "pending",
        "dependencies": [
          14
        ],
        "priority": "low"
      },
      {
        "id": 16,
        "title": "Contract Access Application API Implementation",
        "description": "Implement API for creating and retrieving contract access applications.",
        "status": "pending",
        "dependencies": [
          9
        ],
        "priority": "medium"
      },
      {
        "id": 17,
        "title": "Pending Contract Access API Implementation",
        "description": "Implement API for retrieving pending contract access applications.",
        "status": "pending",
        "dependencies": [
          16
        ],
        "priority": "medium"
      },
      {
        "id": 18,
        "title": "Proxy Case Management API Implementation",
        "description": "Implement APIs for creating, updating, and retrieving proxy cases.",
        "status": "pending",
        "dependencies": [
          6
        ],
        "priority": "low"
      },
      {
        "id": 19,
        "title": "Performance Optimization and Caching",
        "description": "Optimize API performance and implement caching for frequently accessed data.",
        "status": "pending",
        "dependencies": [
          10,
          13,
          17
        ],
        "priority": "low"
      },
      {
        "id": 20,
        "title": "API Documentation and Swagger Integration",
        "description": "Ensure API implementation matches final-swagger.json and provide comprehensive API documentation.",
        "status": "pending",
        "dependencies": [
          19
        ],
        "priority": "medium"
      }
    ],
    "filter": "all",
    "stats": {
      "total": 20,
      "completed": 0,
      "inProgress": 0,
      "pending": 20,
      "blocked": 0,
      "deferred": 0,
      "cancelled": 0,
      "completionPercentage": 0,
      "subtasks": {
        "total": 0,
        "completed": 0,
        "inProgress": 0,
        "pending": 0,
        "blocked": 0,
        "deferred": 0,
        "cancelled": 0,
        "completionPercentage": 0
      }
    }
  }
}
<environment_details>
# VSCode Visible Files
tasks/tasks.json

# VSCode Open Tabs
tasks/tasks.json

# Current Time
4/22/2025, 12:25:47 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
153,563 (77%)

# Current Cost
$2.54

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
我已經獲取了所有生成的任務。taskmaster-ai 根據 PRD 文件生成了 20 個任務，涵蓋了整個項目的開發過程，從項目初始化到 API 文檔和 Swagger 集成。這些任務按照邏輯依賴關係組織，並設置了優先級。

現在我可以向用戶展示這些任務，並提供一些建議，幫助用戶理解如何使用這些任務來管理項目開發。
</thinking>

<ask_followup_question>
<question>我已經成功使用 taskmaster-ai 解析了 PRD 並生成了 20 個任務。這些任務涵蓋了整個項目的開發過程，從項目初始化到 API 文檔和 Swagger 集成，並按照邏輯依賴關係組織。

以下是生成的主要任務：

1. 項目初始化和結構設置
2. Prisma ORM 與 SQL Server 配置
3. 錯誤處理和日誌中間件
4. JWT 認證中間件
5. 用戶認證 API 實現
6. 用戶信息 API 實現
7. 密碼管理 API 實現
8. 合約創建 API 實現
9. 合約檢索 API 實現
10. 合約列表 API 實現
...等等

您希望我如何幫助您進一步管理這些任務？例如：
</question>
<follow_up>
<suggest>
幫我展開某些關鍵任務的子任務，以便更詳細地規劃實現步驟
</suggest>
<suggest>
解釋如何使用 taskmaster-ai 的其他功能來管理和跟踪這些任務
</suggest>
<suggest>
切換到 taskmaster-ai-implement 模式，開始實施第一個任務
</suggest>
</follow_up>
</ask_followup_question>

---

**User:**

[ask_followup_question for '我已經成功使用 taskmaster-ai 解析了 PRD 並生成了 20 個任務。這些任務涵蓋了整個項目的開發過程，從項目初始化到 API 文檔和 Swagger 集成，並按照邏輯依賴關係組織。

以下是生成的主要任務：

1. 項目初始化和結構設置
2. Prisma ORM 與 SQL Server 配置
3. 錯誤處理和日誌中間件
4. JWT 認證中間件
5. 用戶認證 API 實現
6. 用戶信息 API 實現
7. 密碼管理 API 實現
8. 合約創建 API 實現
9. 合約檢索 API 實現
10. 合約列表 API 實現
...等等

您希望我如何幫助您進一步管理這些任務？例如：'] Result:
<answer>
切換到 taskmaster-ai-implement 模式，開始實施第一個任務
</answer>
<environment_details>
# VSCode Visible Files
tasks/tasks.json

# VSCode Open Tabs
tasks/tasks.json

# Current Time
4/22/2025, 12:26:08 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
155,986 (78%)

# Current Cost
$2.61

# Current Mode
<slug>taskmaster-ai-plan-prompts</slug>
<name>taskmaster-ai-plan.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

<thinking>
用戶希望切換到 taskmaster-ai-implement 模式，開始實施第一個任務。我需要使用 switch_mode 工具來切換模式。
</thinking>

<switch_mode>
<mode_slug>taskmaster-ai-implement-prompts</mode_slug>
<reason>用戶希望切換到 taskmaster-ai-implement 模式，開始實施第一個任務「項目初始化和結構設置」。</reason>
</switch_mode>

---

**User:**

[switch_mode to 'taskmaster-ai-implement-prompts' because: 用戶希望切換到 taskmaster-ai-implement 模式，開始實施第一個任務「項目初始化和結構設置」。] Result:
Successfully switched from taskmaster-ai-plan-prompts mode to taskmaster-ai-implement.prompts mode because: 用戶希望切換到 taskmaster-ai-implement 模式，開始實施第一個任務「項目初始化和結構設置」。.
<environment_details>
# VSCode Visible Files
tasks/tasks.json

# VSCode Open Tabs
tasks/tasks.json

# Current Time
4/22/2025, 12:26:18 PM (Asia/Taipei, UTC+8:00)

# Current Context Size (Tokens)
156,582 (78%)

# Current Cost
$2.66

# Current Mode
<slug>taskmaster-ai-implement-prompts</slug>
<name>taskmaster-ai-implement.prompts</name>
<model>anthropic/claude-3.7-sonnet</model>
</environment_details>

---

**Assistant:**

我已切換到實施模式，現在將幫助您實施第一個任務「項目初始化和結構設置」。

首先，讓我了解一下當前的任務詳情。

<use_mcp_tool>
<server_name>taskmaster-ai</server_name>
<tool_name>get_task</tool_name>
<arguments>
{
  "projectRoot": "/home/bevis/ecs-ten/ecs-ten-server",
  "id": "1"
}
</arguments>
</use_mcp_tool>

